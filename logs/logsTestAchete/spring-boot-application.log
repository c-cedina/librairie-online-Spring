2025-01-30T13:21:45.752+01:00  INFO 20234 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 20234 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-30T13:21:45.769+01:00  INFO 20234 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-30T13:21:46.550+01:00  INFO 20234 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-30T13:21:46.639+01:00  INFO 20234 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 80 ms. Found 14 JPA repository interfaces.
2025-01-30T13:21:47.227+01:00  INFO 20234 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-30T13:21:47.320+01:00  INFO 20234 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-30T13:21:47.367+01:00  INFO 20234 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-30T13:21:47.791+01:00  INFO 20234 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-30T13:21:47.824+01:00  INFO 20234 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-30T13:21:48.101+01:00  INFO 20234 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-30T13:21:48.104+01:00  INFO 20234 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-30T13:21:48.140+01:00  WARN 20234 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-30T13:21:49.412+01:00  INFO 20234 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-30T13:21:49.432+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T13:21:49.438+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T13:21:49.438+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T13:21:49.438+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T13:21:49.439+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T13:21:49.439+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T13:21:49.439+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T13:21:49.439+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T13:21:49.440+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T13:21:49.440+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T13:21:49.440+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T13:21:49.440+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T13:21:49.440+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T13:21:49.440+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T13:21:49.447+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-30T13:21:49.458+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-30T13:21:49.459+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-30T13:21:49.461+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-30T13:21:49.462+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-30T13:21:49.463+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-30T13:21:49.464+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-30T13:21:49.466+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-30T13:21:49.467+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-30T13:21:49.468+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T13:21:49.471+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T13:21:49.473+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-30T13:21:49.474+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-30T13:21:49.475+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-30T13:21:49.477+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-30T13:21:49.491+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-30T13:21:49.492+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-30T13:21:49.494+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-30T13:21:49.495+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-30T13:21:49.497+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-30T13:21:49.499+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-30T13:21:49.501+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-30T13:21:49.503+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-30T13:21:49.506+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-30T13:21:49.507+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-30T13:21:49.509+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-30T13:21:49.510+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-30T13:21:49.511+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-30T13:21:49.513+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-30T13:21:49.514+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-30T13:21:49.519+01:00  INFO 20234 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T13:21:50.147+01:00  WARN 20234 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 6a286159-c56b-48b0-a519-42dee0483ee5

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-30T13:21:50.210+01:00  INFO 20234 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-30T13:21:50.891+01:00  INFO 20234 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-30T13:21:50.952+01:00  INFO 20234 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-30T13:21:50.952+01:00  INFO 20234 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-30T13:21:50.954+01:00  INFO 20234 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-01-30T13:21:50.981+01:00  INFO 20234 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.687 seconds (process running for 7.145)
2025-01-30T13:21:51.663+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T13:21:51.686+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T13:21:51.692+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T13:21:51.694+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T13:21:51.716+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T13:21:51.737+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T13:21:51.740+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T13:21:51.912+01:00  INFO 20234 --- [librairie-online] [main] c.e.l.service.AcheteService              : Création d'un achat: com.example.librairie_online.dto.AcheteDTO@3c67b7a9
2025-01-30T13:21:51.913+01:00  INFO 20234 --- [librairie-online] [main] c.e.l.service.MangaService               : Recherche d'un manga avec l'ID: 1
2025-01-30T13:21:51.930+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T13:21:51.940+01:00  INFO 20234 --- [librairie-online] [main] c.e.l.service.MangaService               : Manga trouvé: com.example.librairie_online.entity.Manga@4d992634
2025-01-30T13:21:51.940+01:00  INFO 20234 --- [librairie-online] [main] c.e.l.service.ClientService              : Recherche d'un client avec l'ID: 1
2025-01-30T13:21:51.941+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T13:21:51.943+01:00  INFO 20234 --- [librairie-online] [main] c.e.l.service.ClientService              : Client trouvé: com.example.librairie_online.entity.Client@9b84747
2025-01-30T13:21:51.945+01:00 DEBUG 20234 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-30T13:21:51.947+01:00  INFO 20234 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat créé avec succès: com.example.librairie_online.entity.Achete@1272f6d9
2025-01-30T13:21:51.987+01:00  WARN 20234 --- [librairie-online] [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Cannot invoke "com.example.librairie_online.entity.Role.getRole()" because "this.role" is null]
2025-01-30T13:21:52.026+01:00  INFO 20234 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T13:21:52.026+01:00 DEBUG 20234 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T13:21:52.028+01:00 DEBUG 20234 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T13:21:52.030+01:00 DEBUG 20234 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T13:21:52.031+01:00 DEBUG 20234 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T13:21:52.032+01:00 DEBUG 20234 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T13:21:52.033+01:00 DEBUG 20234 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T13:21:52.034+01:00 DEBUG 20234 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T13:21:52.035+01:00 DEBUG 20234 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T13:21:52.036+01:00 DEBUG 20234 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T13:21:52.036+01:00 DEBUG 20234 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T13:21:52.036+01:00 DEBUG 20234 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T13:21:52.037+01:00 DEBUG 20234 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T13:21:52.037+01:00 DEBUG 20234 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T13:21:52.038+01:00 DEBUG 20234 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T13:21:52.041+01:00  INFO 20234 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-30T13:21:52.044+01:00  INFO 20234 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-30T13:23:38.168+01:00  INFO 20295 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 20295 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-30T13:23:38.170+01:00  INFO 20295 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-30T13:23:39.022+01:00  INFO 20295 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-30T13:23:39.129+01:00  INFO 20295 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 96 ms. Found 14 JPA repository interfaces.
2025-01-30T13:23:39.892+01:00  INFO 20295 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-30T13:23:39.977+01:00  INFO 20295 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-30T13:23:40.024+01:00  INFO 20295 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-30T13:23:40.464+01:00  INFO 20295 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-30T13:23:40.491+01:00  INFO 20295 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-30T13:23:40.692+01:00  INFO 20295 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-30T13:23:40.693+01:00  INFO 20295 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-30T13:23:40.720+01:00  WARN 20295 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-30T13:23:41.914+01:00  INFO 20295 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-30T13:23:41.929+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T13:23:41.933+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T13:23:41.934+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T13:23:41.934+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T13:23:41.934+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T13:23:41.934+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T13:23:41.935+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T13:23:41.935+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T13:23:41.935+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T13:23:41.935+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T13:23:41.935+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T13:23:41.936+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T13:23:41.936+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T13:23:41.936+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T13:23:41.940+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-30T13:23:41.948+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-30T13:23:41.950+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-30T13:23:41.952+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-30T13:23:41.954+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-30T13:23:41.955+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-30T13:23:41.956+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-30T13:23:41.957+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-30T13:23:41.958+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-30T13:23:41.959+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T13:23:41.960+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T13:23:41.963+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-30T13:23:41.966+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-30T13:23:41.968+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-30T13:23:41.971+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-30T13:23:41.985+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-30T13:23:41.987+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-30T13:23:41.988+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-30T13:23:41.990+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-30T13:23:41.991+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-30T13:23:41.992+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-30T13:23:41.994+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-30T13:23:41.995+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-30T13:23:41.996+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-30T13:23:41.998+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-30T13:23:42.000+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-30T13:23:42.001+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-30T13:23:42.003+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-30T13:23:42.006+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-30T13:23:42.007+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-30T13:23:42.011+01:00  INFO 20295 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T13:23:42.645+01:00  WARN 20295 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 96b44c8d-a50c-470e-b8ec-5b7a68d3f316

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-30T13:23:42.676+01:00  INFO 20295 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-30T13:23:43.394+01:00  INFO 20295 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-30T13:23:43.463+01:00  INFO 20295 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-30T13:23:43.463+01:00  INFO 20295 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-30T13:23:43.466+01:00  INFO 20295 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 3 ms
2025-01-30T13:23:43.498+01:00  INFO 20295 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.804 seconds (process running for 8.037)
2025-01-30T13:23:44.223+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T13:23:44.248+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T13:23:44.255+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T13:23:44.259+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T13:23:44.283+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T13:23:48.236+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T13:23:51.111+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T13:23:51.300+01:00  INFO 20295 --- [librairie-online] [main] c.e.l.service.AcheteService              : Création d'un achat: com.example.librairie_online.dto.AcheteDTO@275860e9
2025-01-30T13:23:51.300+01:00  INFO 20295 --- [librairie-online] [main] c.e.l.service.MangaService               : Recherche d'un manga avec l'ID: 1
2025-01-30T13:23:51.315+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T13:23:51.324+01:00  INFO 20295 --- [librairie-online] [main] c.e.l.service.MangaService               : Manga trouvé: com.example.librairie_online.entity.Manga@26652743
2025-01-30T13:23:51.324+01:00  INFO 20295 --- [librairie-online] [main] c.e.l.service.ClientService              : Recherche d'un client avec l'ID: 1
2025-01-30T13:23:51.325+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T13:23:51.327+01:00  INFO 20295 --- [librairie-online] [main] c.e.l.service.ClientService              : Client trouvé: com.example.librairie_online.entity.Client@1c027237
2025-01-30T13:24:15.777+01:00 DEBUG 20295 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-30T13:24:15.786+01:00  INFO 20295 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat créé avec succès: com.example.librairie_online.entity.Achete@14ceb460
2025-01-30T13:24:55.214+01:00  WARN 20295 --- [librairie-online] [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Cannot invoke "com.example.librairie_online.entity.Role.getRole()" because "this.role" is null]
2025-01-30T13:24:55.264+01:00  INFO 20295 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T13:24:55.265+01:00 DEBUG 20295 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T13:24:55.267+01:00 DEBUG 20295 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T13:24:55.268+01:00 DEBUG 20295 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T13:24:55.269+01:00 DEBUG 20295 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T13:24:55.271+01:00 DEBUG 20295 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T13:24:55.272+01:00 DEBUG 20295 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T13:24:55.272+01:00 DEBUG 20295 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T13:24:55.273+01:00 DEBUG 20295 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T13:24:55.274+01:00 DEBUG 20295 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T13:24:55.275+01:00 DEBUG 20295 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T13:24:55.276+01:00 DEBUG 20295 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T13:24:55.277+01:00 DEBUG 20295 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T13:24:55.278+01:00 DEBUG 20295 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T13:24:55.279+01:00 DEBUG 20295 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T13:24:55.282+01:00  INFO 20295 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-30T13:24:55.286+01:00  INFO 20295 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-30T13:27:25.427+01:00  INFO 20406 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 20406 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-30T13:27:25.428+01:00  INFO 20406 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-30T13:27:26.159+01:00  INFO 20406 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-30T13:27:26.240+01:00  INFO 20406 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 72 ms. Found 14 JPA repository interfaces.
2025-01-30T13:27:26.764+01:00  INFO 20406 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-30T13:27:26.840+01:00  INFO 20406 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-30T13:27:26.877+01:00  INFO 20406 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-30T13:27:27.178+01:00  INFO 20406 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-30T13:27:27.203+01:00  INFO 20406 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-30T13:27:27.391+01:00  INFO 20406 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-30T13:27:27.393+01:00  INFO 20406 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-30T13:27:27.423+01:00  WARN 20406 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-30T13:27:28.634+01:00  INFO 20406 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-30T13:27:28.652+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T13:27:28.656+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T13:27:28.656+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T13:27:28.657+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T13:27:28.657+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T13:27:28.658+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T13:27:28.658+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T13:27:28.658+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T13:27:28.659+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T13:27:28.659+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T13:27:28.660+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T13:27:28.660+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T13:27:28.660+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T13:27:28.661+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T13:27:28.666+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-30T13:27:28.676+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-30T13:27:28.678+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-30T13:27:28.681+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-30T13:27:28.683+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-30T13:27:28.685+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-30T13:27:28.687+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-30T13:27:28.688+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-30T13:27:28.690+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-30T13:27:28.691+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T13:27:28.692+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T13:27:28.697+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-30T13:27:28.699+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-30T13:27:28.703+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-30T13:27:28.705+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-30T13:27:28.723+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-30T13:27:28.724+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-30T13:27:28.726+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-30T13:27:28.728+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-30T13:27:28.730+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-30T13:27:28.732+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-30T13:27:28.733+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-30T13:27:28.736+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-30T13:27:28.738+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-30T13:27:28.740+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-30T13:27:28.742+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-30T13:27:28.744+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-30T13:27:28.746+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-30T13:27:28.748+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-30T13:27:28.750+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-30T13:27:28.756+01:00  INFO 20406 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T13:27:29.444+01:00  WARN 20406 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 64016fff-1afd-445a-85dd-2d8d015792fc

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-30T13:27:29.475+01:00  INFO 20406 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-30T13:27:30.302+01:00  INFO 20406 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-30T13:27:30.376+01:00  INFO 20406 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-30T13:27:30.377+01:00  INFO 20406 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-30T13:27:30.378+01:00  INFO 20406 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-01-30T13:27:30.410+01:00  INFO 20406 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.37 seconds (process running for 6.593)
2025-01-30T13:27:31.085+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T13:27:31.111+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T13:27:31.118+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T13:27:31.120+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T13:27:31.141+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T13:27:31.165+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T13:27:31.169+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T13:27:31.284+01:00  INFO 20406 --- [librairie-online] [main] c.e.l.service.AcheteService              : Création d'un achat: com.example.librairie_online.dto.AcheteDTO@34272839
2025-01-30T13:27:31.284+01:00  INFO 20406 --- [librairie-online] [main] c.e.l.service.MangaService               : Recherche d'un manga avec l'ID: 1
2025-01-30T13:27:31.299+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T13:27:31.308+01:00  INFO 20406 --- [librairie-online] [main] c.e.l.service.MangaService               : Manga trouvé: com.example.librairie_online.entity.Manga@4a6c33a0
2025-01-30T13:27:31.308+01:00  INFO 20406 --- [librairie-online] [main] c.e.l.service.ClientService              : Recherche d'un client avec l'ID: 1
2025-01-30T13:27:31.311+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T13:27:31.313+01:00  INFO 20406 --- [librairie-online] [main] c.e.l.service.ClientService              : Client trouvé: com.example.librairie_online.entity.Client@1ca876b7
2025-01-30T13:27:31.314+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-30T13:27:31.317+01:00  INFO 20406 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat créé avec succès: com.example.librairie_online.entity.Achete@36ba9aa3
2025-01-30T13:27:31.689+01:00 DEBUG 20406 --- [librairie-online] [main] org.hibernate.SQL                        : select count(*) from Achete a1_0
2025-01-30T13:27:31.816+01:00  INFO 20406 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T13:27:31.817+01:00 DEBUG 20406 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T13:27:31.819+01:00 DEBUG 20406 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T13:27:31.820+01:00 DEBUG 20406 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T13:27:31.821+01:00 DEBUG 20406 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T13:27:31.823+01:00 DEBUG 20406 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T13:27:31.824+01:00 DEBUG 20406 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T13:27:31.824+01:00 DEBUG 20406 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T13:27:31.825+01:00 DEBUG 20406 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T13:27:31.826+01:00 DEBUG 20406 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T13:27:31.827+01:00 DEBUG 20406 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T13:27:31.828+01:00 DEBUG 20406 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T13:27:31.829+01:00 DEBUG 20406 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T13:27:31.829+01:00 DEBUG 20406 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T13:27:31.830+01:00 DEBUG 20406 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T13:27:31.832+01:00  INFO 20406 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-30T13:27:31.834+01:00  INFO 20406 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-30T13:28:03.166+01:00  INFO 20441 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 20441 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-30T13:28:03.168+01:00  INFO 20441 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-30T13:28:03.944+01:00  INFO 20441 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-30T13:28:04.036+01:00  INFO 20441 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 84 ms. Found 14 JPA repository interfaces.
2025-01-30T13:28:04.709+01:00  INFO 20441 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-30T13:28:04.780+01:00  INFO 20441 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-30T13:28:04.820+01:00  INFO 20441 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-30T13:28:05.159+01:00  INFO 20441 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-30T13:28:05.188+01:00  INFO 20441 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-30T13:28:05.412+01:00  INFO 20441 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-30T13:28:05.414+01:00  INFO 20441 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-30T13:28:05.444+01:00  WARN 20441 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-30T13:28:06.581+01:00  INFO 20441 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-30T13:28:06.596+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T13:28:06.601+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T13:28:06.601+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T13:28:06.601+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T13:28:06.601+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T13:28:06.602+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T13:28:06.602+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T13:28:06.602+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T13:28:06.602+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T13:28:06.603+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T13:28:06.603+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T13:28:06.603+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T13:28:06.603+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T13:28:06.604+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T13:28:06.608+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-30T13:28:06.619+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-30T13:28:06.620+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-30T13:28:06.622+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-30T13:28:06.623+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-30T13:28:06.624+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-30T13:28:06.625+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-30T13:28:06.627+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-30T13:28:06.628+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-30T13:28:06.629+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T13:28:06.630+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T13:28:06.632+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-30T13:28:06.633+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-30T13:28:06.635+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-30T13:28:06.637+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-30T13:28:06.648+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-30T13:28:06.650+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-30T13:28:06.651+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-30T13:28:06.652+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-30T13:28:06.653+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-30T13:28:06.655+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-30T13:28:06.656+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-30T13:28:06.658+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-30T13:28:06.659+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-30T13:28:06.660+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-30T13:28:06.662+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-30T13:28:06.663+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-30T13:28:06.664+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-30T13:28:06.666+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-30T13:28:06.667+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-30T13:28:06.671+01:00  INFO 20441 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T13:28:07.323+01:00  WARN 20441 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: e58f738f-4906-46ed-a4d5-7c3deeb4f634

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-30T13:28:07.358+01:00  INFO 20441 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-30T13:28:08.132+01:00  INFO 20441 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-30T13:28:08.202+01:00  INFO 20441 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-30T13:28:08.203+01:00  INFO 20441 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-30T13:28:08.204+01:00  INFO 20441 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-01-30T13:28:08.235+01:00  INFO 20441 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.516 seconds (process running for 6.831)
2025-01-30T13:28:08.991+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T13:28:09.014+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T13:28:09.020+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T13:28:09.022+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T13:28:09.046+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T13:28:09.075+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T13:28:09.079+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T13:28:09.207+01:00  INFO 20441 --- [librairie-online] [main] c.e.l.service.AcheteService              : Création d'un achat: com.example.librairie_online.dto.AcheteDTO@1d691d4f
2025-01-30T13:28:09.207+01:00  INFO 20441 --- [librairie-online] [main] c.e.l.service.MangaService               : Recherche d'un manga avec l'ID: 1
2025-01-30T13:28:09.223+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T13:28:09.230+01:00  INFO 20441 --- [librairie-online] [main] c.e.l.service.MangaService               : Manga trouvé: com.example.librairie_online.entity.Manga@37b0a724
2025-01-30T13:28:09.230+01:00  INFO 20441 --- [librairie-online] [main] c.e.l.service.ClientService              : Recherche d'un client avec l'ID: 0
2025-01-30T13:28:09.231+01:00 DEBUG 20441 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T13:28:09.234+01:00  WARN 20441 --- [librairie-online] [main] c.e.l.service.ClientService              : Aucun client trouvé avec l'ID: 0
2025-01-30T13:28:09.234+01:00  WARN 20441 --- [librairie-online] [main] c.e.l.service.AcheteService              : Échec de la création de l'achat: Client ou Manga introuvable.
2025-01-30T13:28:09.296+01:00  INFO 20441 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T13:28:09.297+01:00 DEBUG 20441 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T13:28:09.299+01:00 DEBUG 20441 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T13:28:09.300+01:00 DEBUG 20441 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T13:28:09.301+01:00 DEBUG 20441 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T13:28:09.303+01:00 DEBUG 20441 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T13:28:09.304+01:00 DEBUG 20441 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T13:28:09.305+01:00 DEBUG 20441 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T13:28:09.305+01:00 DEBUG 20441 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T13:28:09.306+01:00 DEBUG 20441 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T13:28:09.307+01:00 DEBUG 20441 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T13:28:09.308+01:00 DEBUG 20441 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T13:28:09.309+01:00 DEBUG 20441 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T13:28:09.310+01:00 DEBUG 20441 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T13:28:09.310+01:00 DEBUG 20441 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T13:28:09.314+01:00  INFO 20441 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-30T13:28:09.317+01:00  INFO 20441 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-30T13:29:49.119+01:00  INFO 20509 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 20509 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-30T13:29:49.120+01:00  INFO 20509 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-30T13:29:49.845+01:00  INFO 20509 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-30T13:29:49.933+01:00  INFO 20509 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 79 ms. Found 14 JPA repository interfaces.
2025-01-30T13:29:50.622+01:00  INFO 20509 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-30T13:29:50.702+01:00  INFO 20509 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-30T13:29:50.744+01:00  INFO 20509 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-30T13:29:51.069+01:00  INFO 20509 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-30T13:29:51.095+01:00  INFO 20509 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-30T13:29:51.274+01:00  INFO 20509 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-30T13:29:51.275+01:00  INFO 20509 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-30T13:29:51.307+01:00  WARN 20509 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-30T13:29:52.430+01:00  INFO 20509 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-30T13:29:52.442+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T13:29:52.446+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T13:29:52.446+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T13:29:52.446+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T13:29:52.446+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T13:29:52.447+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T13:29:52.447+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T13:29:52.447+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T13:29:52.447+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T13:29:52.447+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T13:29:52.448+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T13:29:52.448+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T13:29:52.448+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T13:29:52.448+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T13:29:52.452+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-30T13:29:52.460+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-30T13:29:52.461+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-30T13:29:52.462+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-30T13:29:52.463+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-30T13:29:52.464+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-30T13:29:52.465+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-30T13:29:52.466+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-30T13:29:52.467+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-30T13:29:52.468+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T13:29:52.469+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T13:29:52.471+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-30T13:29:52.474+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-30T13:29:52.477+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-30T13:29:52.479+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-30T13:29:52.489+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-30T13:29:52.491+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-30T13:29:52.492+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-30T13:29:52.494+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-30T13:29:52.495+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-30T13:29:52.496+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-30T13:29:52.497+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-30T13:29:52.498+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-30T13:29:52.499+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-30T13:29:52.500+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-30T13:29:52.502+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-30T13:29:52.503+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-30T13:29:52.504+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-30T13:29:52.505+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-30T13:29:52.507+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-30T13:29:52.511+01:00  INFO 20509 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T13:29:53.129+01:00  WARN 20509 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 3398db66-3c3e-4e22-ab44-cba64f135d49

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-30T13:29:53.160+01:00  INFO 20509 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-30T13:29:53.766+01:00  INFO 20509 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-30T13:29:53.822+01:00  INFO 20509 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-30T13:29:53.822+01:00  INFO 20509 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-30T13:29:53.824+01:00  INFO 20509 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-01-30T13:29:53.852+01:00  INFO 20509 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.198 seconds (process running for 6.629)
2025-01-30T13:29:54.462+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T13:29:54.493+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T13:29:54.499+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T13:29:54.503+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T13:29:54.530+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T13:29:54.554+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T13:29:54.558+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T13:29:54.707+01:00  INFO 20509 --- [librairie-online] [main] c.e.l.service.AcheteService              : Création d'un achat: com.example.librairie_online.dto.AcheteDTO@64b7066e
2025-01-30T13:29:54.707+01:00  INFO 20509 --- [librairie-online] [main] c.e.l.service.MangaService               : Recherche d'un manga avec l'ID: 1
2025-01-30T13:29:54.723+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T13:29:54.733+01:00  INFO 20509 --- [librairie-online] [main] c.e.l.service.MangaService               : Manga trouvé: com.example.librairie_online.entity.Manga@1fce17b8
2025-01-30T13:29:54.734+01:00  INFO 20509 --- [librairie-online] [main] c.e.l.service.ClientService              : Recherche d'un client avec l'ID: 0
2025-01-30T13:29:54.735+01:00 DEBUG 20509 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T13:29:54.736+01:00  WARN 20509 --- [librairie-online] [main] c.e.l.service.ClientService              : Aucun client trouvé avec l'ID: 0
2025-01-30T13:29:54.736+01:00  WARN 20509 --- [librairie-online] [main] c.e.l.service.AcheteService              : Échec de la création de l'achat: Client ou Manga introuvable.
2025-01-30T13:29:54.814+01:00  INFO 20509 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T13:29:54.814+01:00 DEBUG 20509 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T13:29:54.817+01:00 DEBUG 20509 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T13:29:54.819+01:00 DEBUG 20509 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T13:29:54.820+01:00 DEBUG 20509 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T13:29:54.822+01:00 DEBUG 20509 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T13:29:54.823+01:00 DEBUG 20509 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T13:29:54.823+01:00 DEBUG 20509 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T13:29:54.824+01:00 DEBUG 20509 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T13:29:54.825+01:00 DEBUG 20509 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T13:29:54.826+01:00 DEBUG 20509 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T13:29:54.826+01:00 DEBUG 20509 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T13:29:54.827+01:00 DEBUG 20509 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T13:29:54.828+01:00 DEBUG 20509 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T13:29:54.828+01:00 DEBUG 20509 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T13:29:54.831+01:00  INFO 20509 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-30T13:29:54.833+01:00  INFO 20509 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-30T13:38:20.865+01:00  INFO 20830 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 20830 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-30T13:38:20.867+01:00  INFO 20830 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-30T13:38:21.540+01:00  INFO 20830 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-30T13:38:21.620+01:00  INFO 20830 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 72 ms. Found 14 JPA repository interfaces.
2025-01-30T13:38:22.149+01:00  INFO 20830 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-30T13:38:22.217+01:00  INFO 20830 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-30T13:38:22.247+01:00  INFO 20830 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-30T13:38:22.532+01:00  INFO 20830 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-30T13:38:22.555+01:00  INFO 20830 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-30T13:38:22.735+01:00  INFO 20830 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-30T13:38:22.737+01:00  INFO 20830 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-30T13:38:22.767+01:00  WARN 20830 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-30T13:38:23.883+01:00  INFO 20830 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-30T13:38:23.897+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T13:38:23.901+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T13:38:23.901+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T13:38:23.901+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T13:38:23.902+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T13:38:23.902+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T13:38:23.902+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T13:38:23.902+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T13:38:23.903+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T13:38:23.903+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T13:38:23.903+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T13:38:23.903+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T13:38:23.903+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T13:38:23.904+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T13:38:23.908+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-30T13:38:23.916+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-30T13:38:23.917+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-30T13:38:23.919+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-30T13:38:23.921+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-30T13:38:23.922+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-30T13:38:23.923+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-30T13:38:23.924+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-30T13:38:23.925+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-30T13:38:23.927+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T13:38:23.928+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T13:38:23.930+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-30T13:38:23.931+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-30T13:38:23.933+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-30T13:38:23.935+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-30T13:38:23.949+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-30T13:38:23.951+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-30T13:38:23.952+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-30T13:38:23.954+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-30T13:38:23.955+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-30T13:38:23.956+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-30T13:38:23.958+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-30T13:38:23.959+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-30T13:38:23.961+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-30T13:38:23.963+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-30T13:38:23.966+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-30T13:38:23.968+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-30T13:38:23.969+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-30T13:38:23.971+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-30T13:38:23.972+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-30T13:38:23.977+01:00  INFO 20830 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T13:38:24.607+01:00  WARN 20830 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 62a5e889-6e8d-45c4-874f-d184f7ba2012

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-30T13:38:24.636+01:00  INFO 20830 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-30T13:38:25.327+01:00  INFO 20830 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-30T13:38:25.396+01:00  INFO 20830 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-30T13:38:25.397+01:00  INFO 20830 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-30T13:38:25.399+01:00  INFO 20830 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-01-30T13:38:25.429+01:00  INFO 20830 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.003 seconds (process running for 6.276)
2025-01-30T13:38:26.113+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T13:38:26.139+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T13:38:26.145+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T13:38:26.148+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T13:38:26.168+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T13:38:26.189+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T13:38:26.193+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T13:38:26.324+01:00  INFO 20830 --- [librairie-online] [main] c.e.l.service.AcheteService              : Création d'un achat: com.example.librairie_online.dto.AcheteDTO@64b7066e
2025-01-30T13:38:26.325+01:00  INFO 20830 --- [librairie-online] [main] c.e.l.service.MangaService               : Recherche d'un manga avec l'ID: 1
2025-01-30T13:38:26.338+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T13:38:26.348+01:00  INFO 20830 --- [librairie-online] [main] c.e.l.service.MangaService               : Manga trouvé: com.example.librairie_online.entity.Manga@1fce17b8
2025-01-30T13:38:26.349+01:00  INFO 20830 --- [librairie-online] [main] c.e.l.service.ClientService              : Recherche d'un client avec l'ID: 0
2025-01-30T13:38:26.350+01:00 DEBUG 20830 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T13:38:26.352+01:00  WARN 20830 --- [librairie-online] [main] c.e.l.service.ClientService              : Aucun client trouvé avec l'ID: 0
2025-01-30T13:38:26.352+01:00  WARN 20830 --- [librairie-online] [main] c.e.l.service.AcheteService              : Échec de la création de l'achat: Client ou Manga introuvable.
2025-01-30T13:38:26.429+01:00  INFO 20830 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T13:38:26.431+01:00 DEBUG 20830 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T13:38:26.433+01:00 DEBUG 20830 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T13:38:26.434+01:00 DEBUG 20830 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T13:38:26.435+01:00 DEBUG 20830 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T13:38:26.436+01:00 DEBUG 20830 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T13:38:26.437+01:00 DEBUG 20830 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T13:38:26.437+01:00 DEBUG 20830 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T13:38:26.438+01:00 DEBUG 20830 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T13:38:26.440+01:00 DEBUG 20830 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T13:38:26.441+01:00 DEBUG 20830 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T13:38:26.442+01:00 DEBUG 20830 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T13:38:26.442+01:00 DEBUG 20830 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T13:38:26.443+01:00 DEBUG 20830 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T13:38:26.444+01:00 DEBUG 20830 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T13:38:26.447+01:00  INFO 20830 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-30T13:38:26.451+01:00  INFO 20830 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-30T13:40:53.292+01:00  INFO 20917 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 20917 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-30T13:40:53.294+01:00  INFO 20917 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-30T13:40:54.167+01:00  INFO 20917 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-30T13:40:54.273+01:00  INFO 20917 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 94 ms. Found 14 JPA repository interfaces.
2025-01-30T13:40:55.033+01:00  INFO 20917 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-30T13:40:55.110+01:00  INFO 20917 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-30T13:40:55.154+01:00  INFO 20917 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-30T13:40:55.581+01:00  INFO 20917 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-30T13:40:55.615+01:00  INFO 20917 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-30T13:40:55.853+01:00  INFO 20917 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-30T13:40:55.855+01:00  INFO 20917 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-30T13:40:55.889+01:00  WARN 20917 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-30T13:40:57.393+01:00  INFO 20917 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-30T13:40:57.412+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T13:40:57.418+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T13:40:57.419+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T13:40:57.419+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T13:40:57.419+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T13:40:57.420+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T13:40:57.420+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T13:40:57.420+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T13:40:57.420+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T13:40:57.421+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T13:40:57.421+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T13:40:57.421+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T13:40:57.421+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T13:40:57.422+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T13:40:57.427+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-30T13:40:57.436+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-30T13:40:57.438+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-30T13:40:57.440+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-30T13:40:57.442+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-30T13:40:57.443+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-30T13:40:57.445+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-30T13:40:57.446+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-30T13:40:57.447+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-30T13:40:57.448+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T13:40:57.450+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T13:40:57.454+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-30T13:40:57.456+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-30T13:40:57.459+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-30T13:40:57.461+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-30T13:40:57.475+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-30T13:40:57.477+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-30T13:40:57.478+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-30T13:40:57.480+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-30T13:40:57.481+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-30T13:40:57.482+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-30T13:40:57.484+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-30T13:40:57.485+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-30T13:40:57.487+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-30T13:40:57.488+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-30T13:40:57.490+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-30T13:40:57.491+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-30T13:40:57.492+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-30T13:40:57.493+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-30T13:40:57.495+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-30T13:40:57.499+01:00  INFO 20917 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T13:40:58.266+01:00  WARN 20917 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 89eeba95-29e7-498b-864b-ddd121b75451

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-30T13:40:58.303+01:00  INFO 20917 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-30T13:40:59.168+01:00  INFO 20917 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-30T13:40:59.251+01:00  INFO 20917 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-30T13:40:59.252+01:00  INFO 20917 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-30T13:40:59.254+01:00  INFO 20917 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-01-30T13:40:59.302+01:00  INFO 20917 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 6.603 seconds (process running for 8.507)
2025-01-30T13:41:00.079+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T13:41:00.107+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T13:41:00.114+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T13:41:00.117+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T13:41:00.158+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T13:41:11.605+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T13:41:13.827+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T13:41:13.980+01:00  INFO 20917 --- [librairie-online] [main] c.e.l.service.AcheteService              : Création d'un achat: com.example.librairie_online.dto.AcheteDTO@56c95789
2025-01-30T13:41:13.980+01:00  INFO 20917 --- [librairie-online] [main] c.e.l.service.MangaService               : Recherche d'un manga avec l'ID: 1
2025-01-30T13:41:13.991+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T13:41:13.997+01:00  INFO 20917 --- [librairie-online] [main] c.e.l.service.MangaService               : Manga trouvé: com.example.librairie_online.entity.Manga@8d56ddd
2025-01-30T13:41:13.997+01:00  INFO 20917 --- [librairie-online] [main] c.e.l.service.ClientService              : Recherche d'un client avec l'ID: 0
2025-01-30T13:41:13.998+01:00 DEBUG 20917 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T13:41:13.999+01:00  WARN 20917 --- [librairie-online] [main] c.e.l.service.ClientService              : Aucun client trouvé avec l'ID: 0
2025-01-30T13:41:13.999+01:00  WARN 20917 --- [librairie-online] [main] c.e.l.service.AcheteService              : Échec de la création de l'achat: Client ou Manga introuvable.
2025-01-30T13:41:21.705+01:00  INFO 20917 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T13:41:21.707+01:00 DEBUG 20917 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T13:41:21.709+01:00 DEBUG 20917 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T13:41:21.710+01:00 DEBUG 20917 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T13:41:21.711+01:00 DEBUG 20917 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T13:41:21.713+01:00 DEBUG 20917 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T13:41:21.714+01:00 DEBUG 20917 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T13:41:21.715+01:00 DEBUG 20917 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T13:41:21.716+01:00 DEBUG 20917 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T13:41:21.717+01:00 DEBUG 20917 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T13:41:21.718+01:00 DEBUG 20917 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T13:41:21.719+01:00 DEBUG 20917 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T13:41:21.719+01:00 DEBUG 20917 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T13:41:21.720+01:00 DEBUG 20917 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T13:41:21.721+01:00 DEBUG 20917 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T13:41:21.724+01:00  INFO 20917 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-30T13:41:21.727+01:00  INFO 20917 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-30T13:42:04.534+01:00  INFO 20962 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 20962 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-30T13:42:04.536+01:00  INFO 20962 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-30T13:42:05.323+01:00  INFO 20962 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-30T13:42:05.420+01:00  INFO 20962 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 89 ms. Found 14 JPA repository interfaces.
2025-01-30T13:42:06.087+01:00  INFO 20962 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-30T13:42:06.161+01:00  INFO 20962 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-30T13:42:06.199+01:00  INFO 20962 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-30T13:42:06.543+01:00  INFO 20962 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-30T13:42:06.571+01:00  INFO 20962 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-30T13:42:06.766+01:00  INFO 20962 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-30T13:42:06.769+01:00  INFO 20962 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-30T13:42:06.802+01:00  WARN 20962 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-30T13:42:08.237+01:00  INFO 20962 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-30T13:42:08.253+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T13:42:08.257+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T13:42:08.257+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T13:42:08.257+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T13:42:08.258+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T13:42:08.258+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T13:42:08.258+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T13:42:08.258+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T13:42:08.259+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T13:42:08.259+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T13:42:08.259+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T13:42:08.259+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T13:42:08.260+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T13:42:08.260+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T13:42:08.264+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-30T13:42:08.273+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-30T13:42:08.274+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-30T13:42:08.276+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-30T13:42:08.277+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-30T13:42:08.279+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-30T13:42:08.280+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-30T13:42:08.281+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-30T13:42:08.282+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-30T13:42:08.283+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T13:42:08.284+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T13:42:08.288+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-30T13:42:08.290+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-30T13:42:08.292+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-30T13:42:08.294+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-30T13:42:08.308+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-30T13:42:08.310+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-30T13:42:08.311+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-30T13:42:08.313+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-30T13:42:08.314+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-30T13:42:08.316+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-30T13:42:08.318+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-30T13:42:08.319+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-30T13:42:08.320+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-30T13:42:08.322+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-30T13:42:08.324+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-30T13:42:08.325+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-30T13:42:08.327+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-30T13:42:08.328+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-30T13:42:08.330+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-30T13:42:08.334+01:00  INFO 20962 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T13:42:09.050+01:00  WARN 20962 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: c81a0c81-bc15-4dcc-b39d-8ac1ac3aed0b

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-30T13:42:09.089+01:00  INFO 20962 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-30T13:42:10.007+01:00  INFO 20962 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-30T13:42:10.107+01:00  INFO 20962 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-30T13:42:10.108+01:00  INFO 20962 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-30T13:42:10.111+01:00  INFO 20962 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 3 ms
2025-01-30T13:42:10.149+01:00  INFO 20962 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 6.066 seconds (process running for 7.497)
2025-01-30T13:42:10.915+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T13:42:10.943+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T13:42:10.949+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T13:42:10.952+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T13:42:10.976+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T13:42:14.697+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T13:42:16.918+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T13:50:46.158+01:00  WARN 20962 --- [librairie-online] [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=8m39s286ms).
2025-01-30T13:50:46.161+01:00  INFO 20962 --- [librairie-online] [main] c.e.l.service.AcheteService              : Création d'un achat: com.example.librairie_online.dto.AcheteDTO@73417353
2025-01-30T13:50:46.163+01:00  INFO 20962 --- [librairie-online] [main] c.e.l.service.MangaService               : Recherche d'un manga avec l'ID: 1
2025-01-30T13:50:46.182+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T13:50:46.194+01:00  INFO 20962 --- [librairie-online] [main] c.e.l.service.MangaService               : Manga trouvé: com.example.librairie_online.entity.Manga@4136638d
2025-01-30T13:50:46.195+01:00  INFO 20962 --- [librairie-online] [main] c.e.l.service.ClientService              : Recherche d'un client avec l'ID: 0
2025-01-30T13:50:46.196+01:00 DEBUG 20962 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T13:50:46.198+01:00  WARN 20962 --- [librairie-online] [main] c.e.l.service.ClientService              : Aucun client trouvé avec l'ID: 0
2025-01-30T13:50:46.199+01:00  WARN 20962 --- [librairie-online] [main] c.e.l.service.AcheteService              : Échec de la création de l'achat: Client ou Manga introuvable.
2025-01-30T13:50:46.282+01:00  INFO 20962 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T13:50:46.284+01:00 DEBUG 20962 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T13:50:46.289+01:00 DEBUG 20962 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T13:50:46.291+01:00 DEBUG 20962 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T13:50:46.293+01:00 DEBUG 20962 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T13:50:46.295+01:00 DEBUG 20962 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T13:50:46.296+01:00 DEBUG 20962 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T13:50:46.297+01:00 DEBUG 20962 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T13:50:46.298+01:00 DEBUG 20962 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T13:50:46.300+01:00 DEBUG 20962 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T13:50:46.300+01:00 DEBUG 20962 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T13:50:46.301+01:00 DEBUG 20962 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T13:50:46.302+01:00 DEBUG 20962 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T13:50:46.303+01:00 DEBUG 20962 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T13:50:46.304+01:00 DEBUG 20962 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T13:50:46.308+01:00  INFO 20962 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-30T13:50:46.312+01:00  INFO 20962 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-30T13:50:51.725+01:00  INFO 21268 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 21268 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-30T13:50:51.727+01:00  INFO 21268 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-30T13:50:52.431+01:00  INFO 21268 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-30T13:50:52.519+01:00  INFO 21268 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 81 ms. Found 14 JPA repository interfaces.
2025-01-30T13:50:53.063+01:00  INFO 21268 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-30T13:50:53.128+01:00  INFO 21268 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-30T13:50:53.161+01:00  INFO 21268 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-30T13:50:53.464+01:00  INFO 21268 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-30T13:50:53.490+01:00  INFO 21268 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-30T13:50:53.691+01:00  INFO 21268 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-30T13:50:53.693+01:00  INFO 21268 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-30T13:50:53.722+01:00  WARN 21268 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-30T13:50:54.860+01:00  INFO 21268 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-30T13:50:54.875+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T13:50:54.878+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T13:50:54.879+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T13:50:54.879+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T13:50:54.879+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T13:50:54.879+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T13:50:54.879+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T13:50:54.880+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T13:50:54.880+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T13:50:54.880+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T13:50:54.880+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T13:50:54.880+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T13:50:54.881+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T13:50:54.881+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T13:50:54.885+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-30T13:50:54.893+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-30T13:50:54.894+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-30T13:50:54.896+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-30T13:50:54.897+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-30T13:50:54.898+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-30T13:50:54.899+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-30T13:50:54.901+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-30T13:50:54.902+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-30T13:50:54.903+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T13:50:54.904+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T13:50:54.907+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-30T13:50:54.909+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-30T13:50:54.911+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-30T13:50:54.913+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-30T13:50:54.925+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-30T13:50:54.927+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-30T13:50:54.928+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-30T13:50:54.930+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-30T13:50:54.932+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-30T13:50:54.934+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-30T13:50:54.936+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-30T13:50:54.937+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-30T13:50:54.939+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-30T13:50:54.940+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-30T13:50:54.942+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-30T13:50:54.943+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-30T13:50:54.945+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-30T13:50:54.947+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-30T13:50:54.949+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-30T13:50:54.956+01:00  INFO 21268 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T13:50:55.637+01:00  WARN 21268 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: da7cbc6f-c3b4-438a-abe6-39afe78dea36

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-30T13:50:55.671+01:00  INFO 21268 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-30T13:50:56.366+01:00  INFO 21268 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-30T13:50:56.432+01:00  INFO 21268 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-30T13:50:56.432+01:00  INFO 21268 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-30T13:50:56.434+01:00  INFO 21268 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-01-30T13:50:56.468+01:00  INFO 21268 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.118 seconds (process running for 6.578)
2025-01-30T13:50:57.170+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T13:50:57.194+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T13:50:57.200+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T13:50:57.202+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T13:50:57.225+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T13:50:57.249+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T13:50:57.253+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T13:50:57.384+01:00  INFO 21268 --- [librairie-online] [main] c.e.l.service.AcheteService              : Création d'un achat: com.example.librairie_online.dto.AcheteDTO@64b7066e
2025-01-30T13:50:57.384+01:00  INFO 21268 --- [librairie-online] [main] c.e.l.service.MangaService               : Recherche d'un manga avec l'ID: 1
2025-01-30T13:50:57.398+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T13:50:57.407+01:00  INFO 21268 --- [librairie-online] [main] c.e.l.service.MangaService               : Manga trouvé: com.example.librairie_online.entity.Manga@62c019bb
2025-01-30T13:50:57.407+01:00  INFO 21268 --- [librairie-online] [main] c.e.l.service.ClientService              : Recherche d'un client avec l'ID: 0
2025-01-30T13:50:57.409+01:00 DEBUG 21268 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T13:50:57.410+01:00  WARN 21268 --- [librairie-online] [main] c.e.l.service.ClientService              : Aucun client trouvé avec l'ID: 0
2025-01-30T13:50:57.410+01:00  WARN 21268 --- [librairie-online] [main] c.e.l.service.AcheteService              : Échec de la création de l'achat: Client ou Manga introuvable.
2025-01-30T13:50:57.481+01:00  INFO 21268 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T13:50:57.481+01:00 DEBUG 21268 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T13:50:57.483+01:00 DEBUG 21268 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T13:50:57.485+01:00 DEBUG 21268 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T13:50:57.486+01:00 DEBUG 21268 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T13:50:57.488+01:00 DEBUG 21268 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T13:50:57.489+01:00 DEBUG 21268 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T13:50:57.490+01:00 DEBUG 21268 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T13:50:57.491+01:00 DEBUG 21268 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T13:50:57.492+01:00 DEBUG 21268 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T13:50:57.493+01:00 DEBUG 21268 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T13:50:57.494+01:00 DEBUG 21268 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T13:50:57.496+01:00 DEBUG 21268 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T13:50:57.496+01:00 DEBUG 21268 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T13:50:57.497+01:00 DEBUG 21268 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T13:50:57.499+01:00  INFO 21268 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-30T13:50:57.502+01:00  INFO 21268 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-30T13:56:18.849+01:00  INFO 21442 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 21442 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-30T13:56:18.851+01:00  INFO 21442 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-30T13:56:19.589+01:00  INFO 21442 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-30T13:56:19.682+01:00  INFO 21442 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 86 ms. Found 14 JPA repository interfaces.
2025-01-30T13:56:20.289+01:00  INFO 21442 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-30T13:56:20.365+01:00  INFO 21442 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-30T13:56:20.400+01:00  INFO 21442 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-30T13:56:20.716+01:00  INFO 21442 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-30T13:56:20.740+01:00  INFO 21442 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-30T13:56:21.028+01:00  INFO 21442 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-30T13:56:21.030+01:00  INFO 21442 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-30T13:56:21.065+01:00  WARN 21442 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-30T13:56:22.236+01:00  INFO 21442 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-30T13:56:22.252+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T13:56:22.257+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T13:56:22.257+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T13:56:22.258+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T13:56:22.258+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T13:56:22.258+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T13:56:22.259+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T13:56:22.259+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T13:56:22.259+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T13:56:22.259+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T13:56:22.260+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T13:56:22.260+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T13:56:22.260+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T13:56:22.260+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T13:56:22.265+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-30T13:56:22.275+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-30T13:56:22.277+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-30T13:56:22.279+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-30T13:56:22.282+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-30T13:56:22.285+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-30T13:56:22.286+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-30T13:56:22.288+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-30T13:56:22.289+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-30T13:56:22.290+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T13:56:22.292+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T13:56:22.295+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-30T13:56:22.297+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-30T13:56:22.299+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-30T13:56:22.303+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-30T13:56:22.319+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-30T13:56:22.321+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-30T13:56:22.323+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-30T13:56:22.325+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-30T13:56:22.327+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-30T13:56:22.329+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-30T13:56:22.331+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-30T13:56:22.332+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-30T13:56:22.334+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-30T13:56:22.337+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-30T13:56:22.340+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-30T13:56:22.341+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-30T13:56:22.343+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-30T13:56:22.344+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-30T13:56:22.346+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-30T13:56:22.353+01:00  INFO 21442 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T13:56:23.011+01:00  WARN 21442 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 7c573cda-1def-4bea-924e-0ef0ef3de981

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-30T13:56:23.047+01:00  INFO 21442 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-30T13:56:23.872+01:00  INFO 21442 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-30T13:56:23.945+01:00  INFO 21442 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-30T13:56:23.945+01:00  INFO 21442 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-30T13:56:23.947+01:00  INFO 21442 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-01-30T13:56:23.978+01:00  INFO 21442 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.585 seconds (process running for 7.302)
2025-01-30T13:56:24.726+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T13:56:24.752+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T13:56:24.759+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T13:56:24.761+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T13:56:24.783+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T13:56:24.806+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T13:56:24.819+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T13:56:25.015+01:00  INFO 21442 --- [librairie-online] [main] c.e.l.service.AcheteService              : Création d'un achat: com.example.librairie_online.dto.AcheteDTO@74876292
2025-01-30T13:56:25.015+01:00  INFO 21442 --- [librairie-online] [main] c.e.l.service.MangaService               : Recherche d'un manga avec l'ID: 1
2025-01-30T13:56:25.031+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T13:56:25.039+01:00  INFO 21442 --- [librairie-online] [main] c.e.l.service.MangaService               : Manga trouvé: com.example.librairie_online.entity.Manga@1d1a706
2025-01-30T13:56:25.039+01:00  INFO 21442 --- [librairie-online] [main] c.e.l.service.ClientService              : Recherche d'un client avec l'ID: 0
2025-01-30T13:56:25.040+01:00 DEBUG 21442 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T13:56:25.041+01:00  WARN 21442 --- [librairie-online] [main] c.e.l.service.ClientService              : Aucun client trouvé avec l'ID: 0
2025-01-30T13:56:25.041+01:00  WARN 21442 --- [librairie-online] [main] c.e.l.service.AcheteService              : Échec de la création de l'achat: Client ou Manga introuvable.
2025-01-30T13:56:25.103+01:00  INFO 21442 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T13:56:25.104+01:00 DEBUG 21442 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T13:56:25.107+01:00 DEBUG 21442 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T13:56:25.108+01:00 DEBUG 21442 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T13:56:25.109+01:00 DEBUG 21442 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T13:56:25.112+01:00 DEBUG 21442 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T13:56:25.113+01:00 DEBUG 21442 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T13:56:25.114+01:00 DEBUG 21442 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T13:56:25.115+01:00 DEBUG 21442 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T13:56:25.116+01:00 DEBUG 21442 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T13:56:25.117+01:00 DEBUG 21442 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T13:56:25.118+01:00 DEBUG 21442 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T13:56:25.119+01:00 DEBUG 21442 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T13:56:25.120+01:00 DEBUG 21442 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T13:56:25.122+01:00 DEBUG 21442 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T13:56:25.125+01:00  INFO 21442 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-30T13:56:25.128+01:00  INFO 21442 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-30T14:00:07.095+01:00  INFO 21570 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 21570 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-30T14:00:07.097+01:00  INFO 21570 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-30T14:00:07.806+01:00  INFO 21570 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-30T14:00:07.886+01:00  INFO 21570 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 73 ms. Found 14 JPA repository interfaces.
2025-01-30T14:00:08.472+01:00  INFO 21570 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-30T14:00:08.544+01:00  INFO 21570 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-30T14:00:08.586+01:00  INFO 21570 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-30T14:00:08.895+01:00  INFO 21570 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-30T14:00:08.918+01:00  INFO 21570 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-30T14:00:09.105+01:00  INFO 21570 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-30T14:00:09.107+01:00  INFO 21570 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-30T14:00:09.138+01:00  WARN 21570 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-30T14:00:10.330+01:00  INFO 21570 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-30T14:00:10.349+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:00:10.355+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:00:10.355+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:00:10.355+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:00:10.355+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:00:10.356+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:00:10.356+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:00:10.356+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:00:10.357+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:00:10.357+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:00:10.358+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:00:10.358+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:00:10.358+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:00:10.358+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:00:10.363+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-30T14:00:10.373+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-30T14:00:10.375+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-30T14:00:10.377+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-30T14:00:10.379+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-30T14:00:10.380+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-30T14:00:10.382+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-30T14:00:10.383+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-30T14:00:10.385+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-30T14:00:10.386+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:00:10.388+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:00:10.393+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-30T14:00:10.395+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-30T14:00:10.397+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-30T14:00:10.400+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-30T14:00:10.415+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-30T14:00:10.416+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-30T14:00:10.419+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-30T14:00:10.421+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-30T14:00:10.423+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-30T14:00:10.424+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-30T14:00:10.426+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-30T14:00:10.427+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-30T14:00:10.429+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-30T14:00:10.431+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-30T14:00:10.433+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-30T14:00:10.436+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-30T14:00:10.438+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-30T14:00:10.440+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-30T14:00:10.441+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-30T14:00:10.446+01:00  INFO 21570 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:00:11.207+01:00  WARN 21570 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 55b1149a-3231-43c7-81e9-d2469ff27df6

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-30T14:00:11.237+01:00  INFO 21570 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-30T14:00:12.004+01:00  INFO 21570 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-30T14:00:12.076+01:00  INFO 21570 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-30T14:00:12.076+01:00  INFO 21570 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-30T14:00:12.079+01:00  INFO 21570 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-01-30T14:00:12.109+01:00  INFO 21570 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.466 seconds (process running for 6.81)
2025-01-30T14:00:12.764+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T14:00:12.791+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T14:00:12.797+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T14:00:12.800+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T14:00:12.823+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T14:00:12.844+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T14:00:12.848+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T14:00:12.975+01:00  INFO 21570 --- [librairie-online] [main] c.e.l.service.AcheteService              : Création d'un achat: com.example.librairie_online.dto.AcheteDTO@656c356c
2025-01-30T14:00:12.976+01:00  INFO 21570 --- [librairie-online] [main] c.e.l.service.MangaService               : Recherche d'un manga avec l'ID: 1
2025-01-30T14:00:12.992+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T14:00:12.999+01:00  INFO 21570 --- [librairie-online] [main] c.e.l.service.MangaService               : Manga trouvé: com.example.librairie_online.entity.Manga@3c2406dd
2025-01-30T14:00:13.000+01:00  INFO 21570 --- [librairie-online] [main] c.e.l.service.ClientService              : Recherche d'un client avec l'ID: 0
2025-01-30T14:00:13.001+01:00 DEBUG 21570 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T14:00:13.003+01:00  WARN 21570 --- [librairie-online] [main] c.e.l.service.ClientService              : Aucun client trouvé avec l'ID: 0
2025-01-30T14:00:13.003+01:00  WARN 21570 --- [librairie-online] [main] c.e.l.service.AcheteService              : Échec de la création de l'achat: Client ou Manga introuvable.
2025-01-30T14:00:13.079+01:00  INFO 21570 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:00:13.081+01:00 DEBUG 21570 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:00:13.083+01:00 DEBUG 21570 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:00:13.086+01:00 DEBUG 21570 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:00:13.087+01:00 DEBUG 21570 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:00:13.088+01:00 DEBUG 21570 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:00:13.089+01:00 DEBUG 21570 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:00:13.090+01:00 DEBUG 21570 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:00:13.090+01:00 DEBUG 21570 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:00:13.092+01:00 DEBUG 21570 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:00:13.093+01:00 DEBUG 21570 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:00:13.094+01:00 DEBUG 21570 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:00:13.095+01:00 DEBUG 21570 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:00:13.097+01:00 DEBUG 21570 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:00:13.098+01:00 DEBUG 21570 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:00:13.101+01:00  INFO 21570 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-30T14:00:13.103+01:00  INFO 21570 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-30T14:01:21.509+01:00  INFO 21620 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 21620 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-30T14:01:21.510+01:00  INFO 21620 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-30T14:01:22.157+01:00  INFO 21620 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-30T14:01:22.228+01:00  INFO 21620 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 64 ms. Found 14 JPA repository interfaces.
2025-01-30T14:01:22.678+01:00  INFO 21620 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-30T14:01:22.745+01:00  INFO 21620 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-30T14:01:22.783+01:00  INFO 21620 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-30T14:01:23.062+01:00  INFO 21620 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-30T14:01:23.083+01:00  INFO 21620 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-30T14:01:23.251+01:00  INFO 21620 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-30T14:01:23.252+01:00  INFO 21620 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-30T14:01:23.274+01:00  WARN 21620 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-30T14:01:24.389+01:00  INFO 21620 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-30T14:01:24.404+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:01:24.409+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:01:24.409+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:01:24.409+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:01:24.410+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:01:24.410+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:01:24.410+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:01:24.410+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:01:24.411+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:01:24.411+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:01:24.411+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:01:24.412+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:01:24.412+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:01:24.412+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:01:24.417+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-30T14:01:24.426+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-30T14:01:24.428+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-30T14:01:24.431+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-30T14:01:24.432+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-30T14:01:24.433+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-30T14:01:24.435+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-30T14:01:24.436+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-30T14:01:24.438+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-30T14:01:24.440+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:01:24.441+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:01:24.443+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-30T14:01:24.446+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-30T14:01:24.448+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-30T14:01:24.451+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-30T14:01:24.464+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-30T14:01:24.466+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-30T14:01:24.468+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-30T14:01:24.469+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-30T14:01:24.471+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-30T14:01:24.472+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-30T14:01:24.474+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-30T14:01:24.475+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-30T14:01:24.477+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-30T14:01:24.478+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-30T14:01:24.480+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-30T14:01:24.481+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-30T14:01:24.483+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-30T14:01:24.484+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-30T14:01:24.486+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-30T14:01:24.490+01:00  INFO 21620 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:01:25.127+01:00  WARN 21620 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 0fab55e9-f644-4070-a0bb-dfb740f98994

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-30T14:01:25.159+01:00  INFO 21620 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-30T14:01:25.834+01:00  INFO 21620 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-30T14:01:25.901+01:00  INFO 21620 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-30T14:01:25.901+01:00  INFO 21620 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-30T14:01:25.902+01:00  INFO 21620 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-01-30T14:01:25.932+01:00  INFO 21620 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 4.775 seconds (process running for 6.005)
2025-01-30T14:01:26.580+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T14:01:26.605+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T14:01:26.611+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T14:01:26.614+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T14:01:26.634+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T14:01:26.654+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T14:01:26.658+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T14:01:26.787+01:00  INFO 21620 --- [librairie-online] [main] c.e.l.service.AcheteService              : Création d'un achat: com.example.librairie_online.dto.AcheteDTO@4e67f0a0
2025-01-30T14:01:26.788+01:00  INFO 21620 --- [librairie-online] [main] c.e.l.service.MangaService               : Recherche d'un manga avec l'ID: 1
2025-01-30T14:01:26.803+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T14:01:26.811+01:00  INFO 21620 --- [librairie-online] [main] c.e.l.service.MangaService               : Manga trouvé: com.example.librairie_online.entity.Manga@23e0ef68
2025-01-30T14:01:26.812+01:00  INFO 21620 --- [librairie-online] [main] c.e.l.service.ClientService              : Recherche d'un client avec l'ID: 1
2025-01-30T14:01:26.813+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T14:01:26.815+01:00  INFO 21620 --- [librairie-online] [main] c.e.l.service.ClientService              : Client trouvé: com.example.librairie_online.entity.Client@6e6bb211
2025-01-30T14:01:26.818+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-30T14:01:26.820+01:00  INFO 21620 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat créé avec succès: com.example.librairie_online.entity.Achete@5926f291
2025-01-30T14:01:27.188+01:00 DEBUG 21620 --- [librairie-online] [main] org.hibernate.SQL                        : select count(*) from Achete a1_0
2025-01-30T14:01:27.275+01:00  INFO 21620 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:01:27.276+01:00 DEBUG 21620 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:01:27.278+01:00 DEBUG 21620 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:01:27.280+01:00 DEBUG 21620 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:01:27.280+01:00 DEBUG 21620 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:01:27.282+01:00 DEBUG 21620 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:01:27.282+01:00 DEBUG 21620 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:01:27.283+01:00 DEBUG 21620 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:01:27.285+01:00 DEBUG 21620 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:01:27.286+01:00 DEBUG 21620 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:01:27.286+01:00 DEBUG 21620 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:01:27.287+01:00 DEBUG 21620 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:01:27.287+01:00 DEBUG 21620 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:01:27.288+01:00 DEBUG 21620 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:01:27.289+01:00 DEBUG 21620 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:01:27.292+01:00  INFO 21620 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-30T14:01:27.294+01:00  INFO 21620 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-30T14:02:37.763+01:00  INFO 21677 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 21677 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-30T14:02:37.764+01:00  INFO 21677 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-30T14:02:38.543+01:00  INFO 21677 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-30T14:02:38.632+01:00  INFO 21677 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 82 ms. Found 14 JPA repository interfaces.
2025-01-30T14:02:39.236+01:00  INFO 21677 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-30T14:02:39.316+01:00  INFO 21677 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-30T14:02:39.352+01:00  INFO 21677 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-30T14:02:39.699+01:00  INFO 21677 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-30T14:02:39.725+01:00  INFO 21677 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-30T14:02:39.937+01:00  INFO 21677 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-30T14:02:39.939+01:00  INFO 21677 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-30T14:02:39.970+01:00  WARN 21677 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-30T14:02:41.305+01:00  INFO 21677 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-30T14:02:41.332+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:02:41.336+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:02:41.337+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:02:41.337+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:02:41.338+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:02:41.338+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:02:41.338+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:02:41.338+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:02:41.339+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:02:41.339+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:02:41.339+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:02:41.339+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:02:41.340+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:02:41.340+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:02:41.345+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-30T14:02:41.353+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-30T14:02:41.355+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-30T14:02:41.356+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-30T14:02:41.358+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-30T14:02:41.360+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-30T14:02:41.361+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-30T14:02:41.362+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-30T14:02:41.364+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-30T14:02:41.365+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:02:41.366+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:02:41.368+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-30T14:02:41.369+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-30T14:02:41.371+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-30T14:02:41.373+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-30T14:02:41.385+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-30T14:02:41.386+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-30T14:02:41.388+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-30T14:02:41.389+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-30T14:02:41.391+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-30T14:02:41.392+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-30T14:02:41.394+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-30T14:02:41.395+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-30T14:02:41.396+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-30T14:02:41.398+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-30T14:02:41.399+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-30T14:02:41.401+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-30T14:02:41.403+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-30T14:02:41.404+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-30T14:02:41.406+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-30T14:02:41.410+01:00  INFO 21677 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:02:42.088+01:00  WARN 21677 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 83e3696a-dd26-41c7-9ee3-335fad65db17

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-30T14:02:42.122+01:00  INFO 21677 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-30T14:02:42.828+01:00  INFO 21677 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-30T14:02:42.894+01:00  INFO 21677 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-30T14:02:42.894+01:00  INFO 21677 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-30T14:02:42.896+01:00  INFO 21677 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-01-30T14:02:42.928+01:00  INFO 21677 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.623 seconds (process running for 6.787)
2025-01-30T14:02:43.625+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T14:02:43.650+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T14:02:43.656+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T14:02:43.659+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T14:02:43.679+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T14:02:43.702+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T14:02:43.706+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T14:02:43.857+01:00  INFO 21677 --- [librairie-online] [main] c.e.l.service.AcheteService              : Création d'un achat: com.example.librairie_online.dto.AcheteDTO@1b09f4fb
2025-01-30T14:02:43.857+01:00  INFO 21677 --- [librairie-online] [main] c.e.l.service.MangaService               : Recherche d'un manga avec l'ID: 1
2025-01-30T14:02:43.877+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T14:02:43.890+01:00  INFO 21677 --- [librairie-online] [main] c.e.l.service.MangaService               : Manga trouvé: com.example.librairie_online.entity.Manga@54d5500e
2025-01-30T14:02:43.890+01:00  INFO 21677 --- [librairie-online] [main] c.e.l.service.ClientService              : Recherche d'un client avec l'ID: 1
2025-01-30T14:02:43.891+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T14:02:43.894+01:00  INFO 21677 --- [librairie-online] [main] c.e.l.service.ClientService              : Client trouvé: com.example.librairie_online.entity.Client@480b785a
2025-01-30T14:02:43.896+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-30T14:02:43.899+01:00  INFO 21677 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat créé avec succès: com.example.librairie_online.entity.Achete@35427786
2025-01-30T14:02:44.249+01:00 DEBUG 21677 --- [librairie-online] [main] org.hibernate.SQL                        : select count(*) from Achete a1_0
2025-01-30T14:02:44.324+01:00  INFO 21677 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:02:44.325+01:00 DEBUG 21677 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:02:44.328+01:00 DEBUG 21677 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:02:44.329+01:00 DEBUG 21677 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:02:44.331+01:00 DEBUG 21677 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:02:44.332+01:00 DEBUG 21677 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:02:44.334+01:00 DEBUG 21677 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:02:44.336+01:00 DEBUG 21677 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:02:44.337+01:00 DEBUG 21677 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:02:44.338+01:00 DEBUG 21677 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:02:44.338+01:00 DEBUG 21677 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:02:44.339+01:00 DEBUG 21677 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:02:44.339+01:00 DEBUG 21677 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:02:44.340+01:00 DEBUG 21677 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:02:44.340+01:00 DEBUG 21677 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:02:44.343+01:00  INFO 21677 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-30T14:02:44.345+01:00  INFO 21677 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-30T14:03:04.660+01:00  INFO 21707 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 21707 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-30T14:03:04.661+01:00  INFO 21707 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-30T14:03:05.400+01:00  INFO 21707 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-30T14:03:05.485+01:00  INFO 21707 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 78 ms. Found 14 JPA repository interfaces.
2025-01-30T14:03:06.068+01:00  INFO 21707 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-30T14:03:06.141+01:00  INFO 21707 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-30T14:03:06.180+01:00  INFO 21707 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-30T14:03:06.518+01:00  INFO 21707 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-30T14:03:06.546+01:00  INFO 21707 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-30T14:03:06.744+01:00  INFO 21707 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-30T14:03:06.748+01:00  INFO 21707 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-30T14:03:06.779+01:00  WARN 21707 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-30T14:03:07.979+01:00  INFO 21707 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-30T14:03:07.993+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:03:07.997+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:03:07.997+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:03:07.997+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:03:07.997+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:03:07.998+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:03:07.998+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:03:07.998+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:03:07.998+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:03:07.998+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:03:07.999+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:03:07.999+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:03:07.999+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:03:07.999+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:03:08.003+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-30T14:03:08.013+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-30T14:03:08.015+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-30T14:03:08.017+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-30T14:03:08.019+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-30T14:03:08.020+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-30T14:03:08.021+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-30T14:03:08.022+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-30T14:03:08.024+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-30T14:03:08.025+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:03:08.026+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:03:08.030+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-30T14:03:08.032+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-30T14:03:08.035+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-30T14:03:08.037+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-30T14:03:08.053+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-30T14:03:08.055+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-30T14:03:08.057+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-30T14:03:08.059+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-30T14:03:08.062+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-30T14:03:08.063+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-30T14:03:08.065+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-30T14:03:08.068+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-30T14:03:08.070+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-30T14:03:08.071+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-30T14:03:08.074+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-30T14:03:08.075+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-30T14:03:08.077+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-30T14:03:08.079+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-30T14:03:08.080+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-30T14:03:08.087+01:00  INFO 21707 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:03:08.795+01:00  WARN 21707 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 9caa1476-0b63-4d63-811d-b46523b72e17

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-30T14:03:08.828+01:00  INFO 21707 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-30T14:03:09.542+01:00  INFO 21707 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-30T14:03:09.608+01:00  INFO 21707 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-30T14:03:09.608+01:00  INFO 21707 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-30T14:03:09.610+01:00  INFO 21707 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-01-30T14:03:09.642+01:00  INFO 21707 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.427 seconds (process running for 6.82)
2025-01-30T14:03:10.326+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T14:03:10.355+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T14:03:10.362+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T14:03:10.364+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T14:03:10.387+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T14:03:10.409+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T14:03:10.412+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T14:03:10.552+01:00  INFO 21707 --- [librairie-online] [main] c.e.l.service.AcheteService              : Création d'un achat: com.example.librairie_online.dto.AcheteDTO@12b2fcaf
2025-01-30T14:03:10.553+01:00  INFO 21707 --- [librairie-online] [main] c.e.l.service.MangaService               : Recherche d'un manga avec l'ID: 1
2025-01-30T14:03:10.570+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T14:03:10.580+01:00  INFO 21707 --- [librairie-online] [main] c.e.l.service.MangaService               : Manga trouvé: com.example.librairie_online.entity.Manga@53628ff6
2025-01-30T14:03:10.580+01:00  INFO 21707 --- [librairie-online] [main] c.e.l.service.ClientService              : Recherche d'un client avec l'ID: 1
2025-01-30T14:03:10.581+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T14:03:10.584+01:00  INFO 21707 --- [librairie-online] [main] c.e.l.service.ClientService              : Client trouvé: com.example.librairie_online.entity.Client@12e5f7cb
2025-01-30T14:03:10.587+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-30T14:03:10.589+01:00  INFO 21707 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat créé avec succès: com.example.librairie_online.entity.Achete@2df05bd1
2025-01-30T14:03:11.011+01:00 DEBUG 21707 --- [librairie-online] [main] org.hibernate.SQL                        : select count(*) from Achete a1_0
2025-01-30T14:03:11.087+01:00  INFO 21707 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:03:11.088+01:00 DEBUG 21707 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:03:11.091+01:00 DEBUG 21707 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:03:11.092+01:00 DEBUG 21707 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:03:11.093+01:00 DEBUG 21707 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:03:11.094+01:00 DEBUG 21707 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:03:11.095+01:00 DEBUG 21707 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:03:11.096+01:00 DEBUG 21707 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:03:11.096+01:00 DEBUG 21707 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:03:11.097+01:00 DEBUG 21707 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:03:11.098+01:00 DEBUG 21707 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:03:11.100+01:00 DEBUG 21707 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:03:11.101+01:00 DEBUG 21707 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:03:11.101+01:00 DEBUG 21707 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:03:11.102+01:00 DEBUG 21707 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:03:11.105+01:00  INFO 21707 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-30T14:03:11.108+01:00  INFO 21707 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-30T14:03:58.497+01:00  INFO 21748 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 21748 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-30T14:03:58.500+01:00  INFO 21748 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-30T14:03:59.371+01:00  INFO 21748 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-30T14:03:59.475+01:00  INFO 21748 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 94 ms. Found 14 JPA repository interfaces.
2025-01-30T14:04:00.368+01:00  INFO 21748 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-30T14:04:00.446+01:00  INFO 21748 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-30T14:04:00.498+01:00  INFO 21748 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-30T14:04:00.998+01:00  INFO 21748 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-30T14:04:01.037+01:00  INFO 21748 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-30T14:04:01.295+01:00  INFO 21748 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-30T14:04:01.298+01:00  INFO 21748 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-30T14:04:01.332+01:00  WARN 21748 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-30T14:04:02.834+01:00  INFO 21748 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-30T14:04:02.851+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:04:02.856+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:04:02.856+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:04:02.857+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:04:02.857+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:04:02.857+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:04:02.857+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:04:02.858+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:04:02.858+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:04:02.858+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:04:02.858+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:04:02.858+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:04:02.859+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:04:02.859+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:04:02.864+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-30T14:04:02.873+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-30T14:04:02.874+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-30T14:04:02.876+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-30T14:04:02.878+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-30T14:04:02.879+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-30T14:04:02.880+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-30T14:04:02.881+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-30T14:04:02.883+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-30T14:04:02.884+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:04:02.885+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:04:02.890+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-30T14:04:02.891+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-30T14:04:02.893+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-30T14:04:02.896+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-30T14:04:02.911+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-30T14:04:02.913+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-30T14:04:02.914+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-30T14:04:02.916+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-30T14:04:02.917+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-30T14:04:02.919+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-30T14:04:02.920+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-30T14:04:02.922+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-30T14:04:02.923+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-30T14:04:02.926+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-30T14:04:02.928+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-30T14:04:02.929+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-30T14:04:02.931+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-30T14:04:02.933+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-30T14:04:02.934+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-30T14:04:02.941+01:00  INFO 21748 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:04:03.677+01:00  WARN 21748 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 6d1db129-0cd8-41c9-b19b-e85c049a4f1d

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-30T14:04:03.717+01:00  INFO 21748 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-30T14:04:04.521+01:00  INFO 21748 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-30T14:04:04.591+01:00  INFO 21748 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-30T14:04:04.591+01:00  INFO 21748 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-30T14:04:04.593+01:00  INFO 21748 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-01-30T14:04:04.627+01:00  INFO 21748 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 6.735 seconds (process running for 8.327)
2025-01-30T14:04:05.334+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T14:04:05.362+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T14:04:05.368+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T14:04:05.370+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T14:04:05.405+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T14:04:08.522+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T14:04:11.920+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T14:09:54.960+01:00  WARN 21748 --- [librairie-online] [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=5m53s560ms).
2025-01-30T14:09:54.963+01:00  INFO 21748 --- [librairie-online] [main] c.e.l.service.AcheteService              : Création d'un achat: com.example.librairie_online.dto.AcheteDTO@73417353
2025-01-30T14:09:54.965+01:00  INFO 21748 --- [librairie-online] [main] c.e.l.service.MangaService               : Recherche d'un manga avec l'ID: 1
2025-01-30T14:09:54.987+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T14:09:54.999+01:00  INFO 21748 --- [librairie-online] [main] c.e.l.service.MangaService               : Manga trouvé: com.example.librairie_online.entity.Manga@2aafd790
2025-01-30T14:09:55.000+01:00  INFO 21748 --- [librairie-online] [main] c.e.l.service.ClientService              : Recherche d'un client avec l'ID: 1
2025-01-30T14:09:55.003+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T14:09:55.008+01:00  INFO 21748 --- [librairie-online] [main] c.e.l.service.ClientService              : Client trouvé: com.example.librairie_online.entity.Client@2fe6bcbb
2025-01-30T14:09:55.010+01:00 DEBUG 21748 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-30T14:09:55.013+01:00  INFO 21748 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat créé avec succès: com.example.librairie_online.entity.Achete@4e92c6c2
2025-01-30T14:09:55.106+01:00  INFO 21748 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:09:55.108+01:00 DEBUG 21748 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:09:55.113+01:00 DEBUG 21748 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:09:55.117+01:00 DEBUG 21748 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:09:55.120+01:00 DEBUG 21748 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:09:55.122+01:00 DEBUG 21748 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:09:55.124+01:00 DEBUG 21748 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:09:55.126+01:00 DEBUG 21748 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:09:55.128+01:00 DEBUG 21748 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:09:55.130+01:00 DEBUG 21748 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:09:55.131+01:00 DEBUG 21748 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:09:55.132+01:00 DEBUG 21748 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:09:55.134+01:00 DEBUG 21748 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:09:55.135+01:00 DEBUG 21748 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:09:55.136+01:00 DEBUG 21748 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:09:55.143+01:00  INFO 21748 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-30T14:09:55.147+01:00  INFO 21748 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-30T14:10:00.618+01:00  INFO 21979 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 21979 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-30T14:10:00.622+01:00  INFO 21979 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-30T14:10:01.671+01:00  INFO 21979 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-30T14:10:01.811+01:00  INFO 21979 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 104 ms. Found 14 JPA repository interfaces.
2025-01-30T14:10:02.642+01:00  INFO 21979 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-30T14:10:02.750+01:00  INFO 21979 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-30T14:10:02.803+01:00  INFO 21979 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-30T14:10:03.282+01:00  INFO 21979 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-30T14:10:03.313+01:00  INFO 21979 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-30T14:10:03.575+01:00  INFO 21979 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-30T14:10:03.578+01:00  INFO 21979 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-30T14:10:03.614+01:00  WARN 21979 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-30T14:10:05.019+01:00  INFO 21979 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-30T14:10:05.036+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:10:05.040+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:10:05.041+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:10:05.041+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:10:05.041+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:10:05.042+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:10:05.042+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:10:05.042+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:10:05.042+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:10:05.043+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:10:05.043+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:10:05.043+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:10:05.043+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:10:05.044+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:10:05.049+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-30T14:10:05.060+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-30T14:10:05.061+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-30T14:10:05.063+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-30T14:10:05.065+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-30T14:10:05.066+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-30T14:10:05.067+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-30T14:10:05.069+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-30T14:10:05.070+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-30T14:10:05.072+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:10:05.073+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:10:05.077+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-30T14:10:05.079+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-30T14:10:05.081+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-30T14:10:05.083+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-30T14:10:05.096+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-30T14:10:05.098+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-30T14:10:05.100+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-30T14:10:05.101+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-30T14:10:05.103+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-30T14:10:05.104+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-30T14:10:05.106+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-30T14:10:05.107+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-30T14:10:05.109+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-30T14:10:05.110+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-30T14:10:05.112+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-30T14:10:05.114+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-30T14:10:05.115+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-30T14:10:05.117+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-30T14:10:05.118+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-30T14:10:05.123+01:00  INFO 21979 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:10:05.894+01:00  WARN 21979 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: da8b20d2-d554-47e9-8362-517dc939ebac

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-30T14:10:05.927+01:00  INFO 21979 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-30T14:10:06.799+01:00  INFO 21979 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-30T14:10:06.873+01:00  INFO 21979 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-30T14:10:06.873+01:00  INFO 21979 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-30T14:10:06.876+01:00  INFO 21979 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-01-30T14:10:06.908+01:00  INFO 21979 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 6.911 seconds (process running for 8.677)
2025-01-30T14:10:07.670+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T14:10:07.699+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T14:10:07.706+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T14:10:07.709+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T14:10:07.734+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T14:10:07.763+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T14:10:07.768+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T14:10:07.973+01:00  INFO 21979 --- [librairie-online] [main] c.e.l.service.AcheteService              : Création d'un achat: com.example.librairie_online.dto.AcheteDTO@6321e29b
2025-01-30T14:10:07.973+01:00  INFO 21979 --- [librairie-online] [main] c.e.l.service.MangaService               : Recherche d'un manga avec l'ID: 1
2025-01-30T14:10:07.987+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T14:10:07.997+01:00  INFO 21979 --- [librairie-online] [main] c.e.l.service.MangaService               : Manga trouvé: com.example.librairie_online.entity.Manga@1ff55410
2025-01-30T14:10:07.997+01:00  INFO 21979 --- [librairie-online] [main] c.e.l.service.ClientService              : Recherche d'un client avec l'ID: 1
2025-01-30T14:10:07.998+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T14:10:08.002+01:00  INFO 21979 --- [librairie-online] [main] c.e.l.service.ClientService              : Client trouvé: com.example.librairie_online.entity.Client@7c3920a7
2025-01-30T14:10:08.005+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-30T14:10:08.007+01:00  INFO 21979 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat créé avec succès: com.example.librairie_online.entity.Achete@12e5f7cb
2025-01-30T14:10:08.450+01:00 DEBUG 21979 --- [librairie-online] [main] org.hibernate.SQL                        : select count(*) from Achete a1_0
2025-01-30T14:10:08.541+01:00  INFO 21979 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:10:08.542+01:00 DEBUG 21979 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:10:08.545+01:00 DEBUG 21979 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:10:08.547+01:00 DEBUG 21979 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:10:08.548+01:00 DEBUG 21979 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:10:08.550+01:00 DEBUG 21979 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:10:08.552+01:00 DEBUG 21979 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:10:08.554+01:00 DEBUG 21979 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:10:08.556+01:00 DEBUG 21979 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:10:08.558+01:00 DEBUG 21979 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:10:08.559+01:00 DEBUG 21979 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:10:08.559+01:00 DEBUG 21979 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:10:08.560+01:00 DEBUG 21979 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:10:08.561+01:00 DEBUG 21979 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:10:08.562+01:00 DEBUG 21979 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:10:08.565+01:00  INFO 21979 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-30T14:10:08.569+01:00  INFO 21979 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-30T14:10:35.215+01:00  INFO 22006 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 22006 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-30T14:10:35.218+01:00  INFO 22006 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-30T14:10:36.200+01:00  INFO 22006 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-30T14:10:36.308+01:00  INFO 22006 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 97 ms. Found 14 JPA repository interfaces.
2025-01-30T14:10:37.121+01:00  INFO 22006 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-30T14:10:37.215+01:00  INFO 22006 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-30T14:10:37.265+01:00  INFO 22006 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-30T14:10:37.716+01:00  INFO 22006 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-30T14:10:37.744+01:00  INFO 22006 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-30T14:10:37.996+01:00  INFO 22006 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-30T14:10:37.998+01:00  INFO 22006 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-30T14:10:38.028+01:00  WARN 22006 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-30T14:10:39.231+01:00  INFO 22006 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-30T14:10:39.244+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:10:39.247+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:10:39.248+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:10:39.248+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:10:39.248+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:10:39.248+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:10:39.249+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:10:39.249+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:10:39.249+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:10:39.249+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:10:39.249+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:10:39.250+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:10:39.250+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:10:39.250+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:10:39.254+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-30T14:10:39.263+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-30T14:10:39.264+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-30T14:10:39.266+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-30T14:10:39.268+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-30T14:10:39.269+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-30T14:10:39.270+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-30T14:10:39.272+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-30T14:10:39.273+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-30T14:10:39.275+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:10:39.276+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:10:39.279+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-30T14:10:39.281+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-30T14:10:39.283+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-30T14:10:39.286+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-30T14:10:39.300+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-30T14:10:39.302+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-30T14:10:39.304+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-30T14:10:39.306+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-30T14:10:39.307+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-30T14:10:39.309+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-30T14:10:39.312+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-30T14:10:39.314+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-30T14:10:39.315+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-30T14:10:39.317+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-30T14:10:39.318+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-30T14:10:39.320+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-30T14:10:39.322+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-30T14:10:39.324+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-30T14:10:39.326+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-30T14:10:39.332+01:00  INFO 22006 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:10:39.968+01:00  WARN 22006 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 5d6b7ee3-9a6f-4a49-b544-9b16099b0e3e

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-30T14:10:40.000+01:00  INFO 22006 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-30T14:10:40.673+01:00  INFO 22006 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-30T14:10:40.731+01:00  INFO 22006 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-30T14:10:40.732+01:00  INFO 22006 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-30T14:10:40.733+01:00  INFO 22006 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-01-30T14:10:40.765+01:00  INFO 22006 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 6.113 seconds (process running for 7.8)
2025-01-30T14:10:41.460+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T14:10:41.488+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T14:10:41.494+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T14:10:41.497+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T14:10:41.519+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T14:10:41.539+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T14:10:41.543+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T14:10:41.666+01:00  INFO 22006 --- [librairie-online] [main] c.e.l.service.AcheteService              : Création d'un achat: com.example.librairie_online.dto.AcheteDTO@222af5ff
2025-01-30T14:10:41.667+01:00  INFO 22006 --- [librairie-online] [main] c.e.l.service.MangaService               : Recherche d'un manga avec l'ID: 1
2025-01-30T14:10:41.682+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T14:10:41.691+01:00  INFO 22006 --- [librairie-online] [main] c.e.l.service.MangaService               : Manga trouvé: com.example.librairie_online.entity.Manga@9223122
2025-01-30T14:10:41.691+01:00  INFO 22006 --- [librairie-online] [main] c.e.l.service.ClientService              : Recherche d'un client avec l'ID: 1
2025-01-30T14:10:41.693+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T14:10:41.696+01:00  INFO 22006 --- [librairie-online] [main] c.e.l.service.ClientService              : Client trouvé: com.example.librairie_online.entity.Client@1ff55410
2025-01-30T14:10:41.698+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-30T14:10:41.700+01:00  INFO 22006 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat créé avec succès: com.example.librairie_online.entity.Achete@53628ff6
2025-01-30T14:10:42.019+01:00 DEBUG 22006 --- [librairie-online] [main] org.hibernate.SQL                        : select count(*) from Achete a1_0
2025-01-30T14:10:42.090+01:00  INFO 22006 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:10:42.091+01:00 DEBUG 22006 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:10:42.093+01:00 DEBUG 22006 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:10:42.094+01:00 DEBUG 22006 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:10:42.095+01:00 DEBUG 22006 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:10:42.096+01:00 DEBUG 22006 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:10:42.097+01:00 DEBUG 22006 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:10:42.098+01:00 DEBUG 22006 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:10:42.099+01:00 DEBUG 22006 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:10:42.100+01:00 DEBUG 22006 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:10:42.101+01:00 DEBUG 22006 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:10:42.101+01:00 DEBUG 22006 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:10:42.102+01:00 DEBUG 22006 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:10:42.102+01:00 DEBUG 22006 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:10:42.103+01:00 DEBUG 22006 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:10:42.105+01:00  INFO 22006 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-30T14:10:42.108+01:00  INFO 22006 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-30T14:13:12.536+01:00  INFO 22097 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 22097 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-30T14:13:12.548+01:00  INFO 22097 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-30T14:13:13.526+01:00  INFO 22097 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-30T14:13:13.638+01:00  INFO 22097 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 103 ms. Found 14 JPA repository interfaces.
2025-01-30T14:13:14.423+01:00  INFO 22097 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-30T14:13:14.498+01:00  INFO 22097 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-30T14:13:14.545+01:00  INFO 22097 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-30T14:13:14.963+01:00  INFO 22097 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-30T14:13:14.997+01:00  INFO 22097 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-30T14:13:15.272+01:00  INFO 22097 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-30T14:13:15.275+01:00  INFO 22097 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-30T14:13:15.305+01:00  WARN 22097 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-30T14:13:16.750+01:00  INFO 22097 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-30T14:13:16.768+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:13:16.773+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:13:16.774+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:13:16.774+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:13:16.774+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:13:16.774+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:13:16.775+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:13:16.775+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:13:16.775+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:13:16.775+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:13:16.776+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:13:16.776+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:13:16.776+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:13:16.776+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:13:16.782+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-30T14:13:16.792+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-30T14:13:16.793+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-30T14:13:16.796+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-30T14:13:16.798+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-30T14:13:16.799+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-30T14:13:16.800+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-30T14:13:16.801+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-30T14:13:16.802+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-30T14:13:16.804+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:13:16.805+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:13:16.807+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-30T14:13:16.809+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-30T14:13:16.811+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-30T14:13:16.813+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-30T14:13:16.826+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-30T14:13:16.828+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-30T14:13:16.830+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-30T14:13:16.831+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-30T14:13:16.833+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-30T14:13:16.834+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-30T14:13:16.836+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-30T14:13:16.837+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-30T14:13:16.838+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-30T14:13:16.840+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-30T14:13:16.842+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-30T14:13:16.843+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-30T14:13:16.845+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-30T14:13:16.846+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-30T14:13:16.848+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-30T14:13:16.852+01:00  INFO 22097 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:13:17.586+01:00  WARN 22097 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 8d38a5d0-a47c-4dcb-a322-f744f6c0ffd6

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-30T14:13:17.621+01:00  INFO 22097 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-30T14:13:18.533+01:00  INFO 22097 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-30T14:13:18.604+01:00  INFO 22097 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-30T14:13:18.604+01:00  INFO 22097 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-30T14:13:18.606+01:00  INFO 22097 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-01-30T14:13:18.641+01:00  INFO 22097 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 6.716 seconds (process running for 8.728)
2025-01-30T14:13:19.432+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T14:13:19.464+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T14:13:19.472+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T14:13:19.475+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T14:13:19.513+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T14:13:19.541+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T14:13:19.545+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T14:13:19.548+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-30T14:13:19.749+01:00  INFO 22097 --- [librairie-online] [main] c.e.l.service.AcheteService              : Recherche d'un achat avec l'ID: 1
2025-01-30T14:13:19.764+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-30T14:13:19.777+01:00  INFO 22097 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat trouvé: com.example.librairie_online.entity.Achete@37acf9b1
2025-01-30T14:13:19.779+01:00  INFO 22097 --- [librairie-online] [main] c.e.l.service.AcheteService              : Mise à jour de l'achat avec ID: 1
2025-01-30T14:13:19.779+01:00  INFO 22097 --- [librairie-online] [main] c.e.l.service.AcheteService              : Recherche d'un achat avec l'ID: 1
2025-01-30T14:13:19.780+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-30T14:13:19.782+01:00  INFO 22097 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat trouvé: com.example.librairie_online.entity.Achete@339d5e8
2025-01-30T14:13:19.789+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-30T14:13:19.805+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : update Achete set nAdherent=?,date=?,nSerie=?,prix=? where id=?
2025-01-30T14:13:19.820+01:00  INFO 22097 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat mis à jour avec succès: com.example.librairie_online.entity.Achete@59dae020
2025-01-30T14:13:19.972+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T14:13:19.974+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T14:13:19.977+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T14:13:19.988+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-30T14:13:19.994+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T14:13:19.996+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-30T14:13:19.998+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-30T14:13:20.002+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T14:13:20.005+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-30T14:13:20.009+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T14:13:20.011+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Role where id=?
2025-01-30T14:13:20.014+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T14:13:20.017+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T14:13:20.021+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T14:13:20.024+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-30T14:13:20.032+01:00  INFO 22097 --- [librairie-online] [main] c.e.l.service.AcheteService              : Recherche d'un achat avec l'ID: 2
2025-01-30T14:13:20.034+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-30T14:13:20.037+01:00  INFO 22097 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat trouvé: com.example.librairie_online.entity.Achete@2a03b87
2025-01-30T14:13:20.038+01:00  INFO 22097 --- [librairie-online] [main] c.e.l.service.AcheteService              : Suppression de l'achat avec ID: 2
2025-01-30T14:13:20.419+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select count(*) from Achete a1_0 where a1_0.id=?
2025-01-30T14:13:20.427+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-30T14:13:20.429+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-30T14:13:20.431+01:00  INFO 22097 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat supprimé avec succès.
2025-01-30T14:13:20.436+01:00  INFO 22097 --- [librairie-online] [main] c.e.l.service.AcheteService              : Recherche d'un achat avec l'ID: 2
2025-01-30T14:13:20.437+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-30T14:13:20.438+01:00  WARN 22097 --- [librairie-online] [main] c.e.l.service.AcheteService              : Aucun achat trouvé avec l'ID: 2
2025-01-30T14:13:20.447+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T14:13:20.449+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T14:13:20.450+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-30T14:13:20.452+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-30T14:13:20.454+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T14:13:20.455+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-30T14:13:20.458+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T14:13:20.460+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Role where id=?
2025-01-30T14:13:20.461+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T14:13:20.462+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T14:13:20.464+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T14:13:20.467+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-30T14:13:20.470+01:00  INFO 22097 --- [librairie-online] [main] c.e.l.service.AcheteService              : Récupération de tous les achats.
2025-01-30T14:13:20.472+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T14:13:20.474+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T14:13:20.477+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T14:13:20.481+01:00  INFO 22097 --- [librairie-online] [main] c.e.l.service.AcheteService              : Nombre total d'achats récupérés: 1
2025-01-30T14:13:20.504+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T14:13:20.505+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T14:13:20.508+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T14:13:20.512+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-30T14:13:20.525+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T14:13:20.527+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-30T14:13:20.529+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-30T14:13:20.533+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T14:13:20.535+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-30T14:13:20.547+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T14:13:20.549+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Role where id=?
2025-01-30T14:13:20.551+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T14:13:25.939+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T14:13:28.357+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T14:14:17.132+01:00  WARN 22097 --- [librairie-online] [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m1s755ms).
2025-01-30T14:14:17.135+01:00  INFO 22097 --- [librairie-online] [main] c.e.l.service.AcheteService              : Création d'un achat: com.example.librairie_online.dto.AcheteDTO@2d7d2574
2025-01-30T14:14:17.137+01:00  INFO 22097 --- [librairie-online] [main] c.e.l.service.MangaService               : Recherche d'un manga avec l'ID: 4
2025-01-30T14:14:17.139+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T14:14:17.141+01:00  INFO 22097 --- [librairie-online] [main] c.e.l.service.MangaService               : Manga trouvé: com.example.librairie_online.entity.Manga@7f0e0db3
2025-01-30T14:14:17.141+01:00  INFO 22097 --- [librairie-online] [main] c.e.l.service.ClientService              : Recherche d'un client avec l'ID: 4
2025-01-30T14:14:17.143+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T14:14:17.145+01:00  INFO 22097 --- [librairie-online] [main] c.e.l.service.ClientService              : Client trouvé: com.example.librairie_online.entity.Client@4bb13671
2025-01-30T14:14:17.146+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-30T14:14:17.148+01:00  INFO 22097 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat créé avec succès: com.example.librairie_online.entity.Achete@28d61fc
2025-01-30T14:14:17.157+01:00 DEBUG 22097 --- [librairie-online] [main] org.hibernate.SQL                        : select count(*) from Achete a1_0
2025-01-30T14:14:17.226+01:00  INFO 22097 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:14:17.227+01:00 DEBUG 22097 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:14:17.230+01:00 DEBUG 22097 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:14:17.231+01:00 DEBUG 22097 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:14:17.232+01:00 DEBUG 22097 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:14:17.234+01:00 DEBUG 22097 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:14:17.235+01:00 DEBUG 22097 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:14:17.235+01:00 DEBUG 22097 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:14:17.236+01:00 DEBUG 22097 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:14:17.238+01:00 DEBUG 22097 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:14:17.239+01:00 DEBUG 22097 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:14:17.239+01:00 DEBUG 22097 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:14:17.240+01:00 DEBUG 22097 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:14:17.240+01:00 DEBUG 22097 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:14:17.241+01:00 DEBUG 22097 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:14:17.243+01:00  INFO 22097 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-30T14:14:17.246+01:00  INFO 22097 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-30T14:14:39.753+01:00  INFO 22151 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 22151 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-30T14:14:39.755+01:00  INFO 22151 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-30T14:14:40.701+01:00  INFO 22151 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-30T14:14:40.811+01:00  INFO 22151 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 99 ms. Found 14 JPA repository interfaces.
2025-01-30T14:14:41.706+01:00  INFO 22151 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-30T14:14:41.786+01:00  INFO 22151 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-30T14:14:41.832+01:00  INFO 22151 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-30T14:14:42.243+01:00  INFO 22151 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-30T14:14:42.278+01:00  INFO 22151 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-30T14:14:42.522+01:00  INFO 22151 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-30T14:14:42.524+01:00  INFO 22151 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-30T14:14:42.556+01:00  WARN 22151 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-30T14:14:43.940+01:00  INFO 22151 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-30T14:14:43.957+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:14:43.961+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:14:43.961+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:14:43.961+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:14:43.962+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:14:43.962+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:14:43.962+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:14:43.962+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:14:43.963+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:14:43.963+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:14:43.963+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:14:43.964+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:14:43.964+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:14:43.964+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:14:43.969+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-30T14:14:43.978+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-30T14:14:43.980+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-30T14:14:43.982+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-30T14:14:43.983+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-30T14:14:43.984+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-30T14:14:43.985+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-30T14:14:43.987+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-30T14:14:43.988+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-30T14:14:43.989+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:14:43.990+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:14:43.992+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-30T14:14:43.994+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-30T14:14:43.996+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-30T14:14:43.998+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-30T14:14:44.011+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-30T14:14:44.012+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-30T14:14:44.014+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-30T14:14:44.015+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-30T14:14:44.016+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-30T14:14:44.018+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-30T14:14:44.019+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-30T14:14:44.022+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-30T14:14:44.024+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-30T14:14:44.025+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-30T14:14:44.027+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-30T14:14:44.029+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-30T14:14:44.030+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-30T14:14:44.031+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-30T14:14:44.033+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-30T14:14:44.039+01:00  INFO 22151 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:14:44.810+01:00  WARN 22151 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 6cd81fff-66b3-4605-9e0f-64e482c78346

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-30T14:14:44.851+01:00  INFO 22151 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-30T14:14:45.692+01:00  INFO 22151 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-30T14:14:45.777+01:00  INFO 22151 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-30T14:14:45.778+01:00  INFO 22151 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-30T14:14:45.779+01:00  INFO 22151 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-01-30T14:14:45.821+01:00  INFO 22151 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 6.638 seconds (process running for 8.329)
2025-01-30T14:14:46.552+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T14:14:46.582+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T14:14:46.589+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T14:14:46.592+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T14:14:46.621+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T14:14:46.647+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T14:14:46.654+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T14:14:46.657+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-30T14:14:46.851+01:00  INFO 22151 --- [librairie-online] [main] c.e.l.service.AcheteService              : Recherche d'un achat avec l'ID: 1
2025-01-30T14:14:46.870+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-30T14:14:46.882+01:00  INFO 22151 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat trouvé: com.example.librairie_online.entity.Achete@27002c5a
2025-01-30T14:14:46.883+01:00  INFO 22151 --- [librairie-online] [main] c.e.l.service.AcheteService              : Mise à jour de l'achat avec ID: 1
2025-01-30T14:14:46.884+01:00  INFO 22151 --- [librairie-online] [main] c.e.l.service.AcheteService              : Recherche d'un achat avec l'ID: 1
2025-01-30T14:14:46.885+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-30T14:14:46.887+01:00  INFO 22151 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat trouvé: com.example.librairie_online.entity.Achete@1cc9b564
2025-01-30T14:14:46.893+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-30T14:14:46.921+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : update Achete set nAdherent=?,date=?,nSerie=?,prix=? where id=?
2025-01-30T14:14:46.928+01:00  INFO 22151 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat mis à jour avec succès: com.example.librairie_online.entity.Achete@23644367
2025-01-30T14:14:47.097+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T14:14:47.100+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T14:14:47.103+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T14:14:47.116+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-30T14:14:47.126+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T14:14:47.128+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-30T14:14:47.134+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-30T14:14:47.139+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T14:14:47.142+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-30T14:14:47.148+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T14:14:47.150+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Role where id=?
2025-01-30T14:14:47.153+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T14:14:47.156+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T14:14:47.159+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T14:14:47.164+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-30T14:14:47.173+01:00  INFO 22151 --- [librairie-online] [main] c.e.l.service.AcheteService              : Recherche d'un achat avec l'ID: 2
2025-01-30T14:14:47.174+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-30T14:14:47.179+01:00  INFO 22151 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat trouvé: com.example.librairie_online.entity.Achete@54cb2cee
2025-01-30T14:14:47.180+01:00  INFO 22151 --- [librairie-online] [main] c.e.l.service.AcheteService              : Suppression de l'achat avec ID: 2
2025-01-30T14:14:47.519+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select count(*) from Achete a1_0 where a1_0.id=?
2025-01-30T14:14:47.524+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-30T14:14:47.527+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-30T14:14:47.528+01:00  INFO 22151 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat supprimé avec succès.
2025-01-30T14:14:47.534+01:00  INFO 22151 --- [librairie-online] [main] c.e.l.service.AcheteService              : Recherche d'un achat avec l'ID: 2
2025-01-30T14:14:47.535+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-30T14:14:47.536+01:00  WARN 22151 --- [librairie-online] [main] c.e.l.service.AcheteService              : Aucun achat trouvé avec l'ID: 2
2025-01-30T14:14:47.546+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T14:14:47.550+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T14:14:47.551+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-30T14:14:47.552+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-30T14:14:47.555+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T14:14:47.557+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-30T14:14:47.559+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T14:14:47.561+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Role where id=?
2025-01-30T14:14:47.563+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T14:14:47.565+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T14:14:47.567+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T14:14:47.569+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-30T14:14:47.572+01:00  INFO 22151 --- [librairie-online] [main] c.e.l.service.AcheteService              : Récupération de tous les achats.
2025-01-30T14:14:47.574+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T14:14:47.575+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T14:14:47.576+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T14:14:47.578+01:00  INFO 22151 --- [librairie-online] [main] c.e.l.service.AcheteService              : Nombre total d'achats récupérés: 1
2025-01-30T14:14:47.593+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T14:14:47.595+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T14:14:47.599+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T14:14:47.603+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-30T14:14:47.607+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T14:14:47.608+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-30T14:14:47.611+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-30T14:14:47.617+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T14:14:47.619+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-30T14:14:47.622+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T14:14:47.624+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Role where id=?
2025-01-30T14:14:47.627+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T14:14:49.992+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T14:14:50.882+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T14:19:27.642+01:00  WARN 22151 --- [librairie-online] [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=4m45s15ms).
2025-01-30T14:19:27.645+01:00  INFO 22151 --- [librairie-online] [main] c.e.l.service.AcheteService              : Création d'un achat: com.example.librairie_online.dto.AcheteDTO@3d5a6c07
2025-01-30T14:19:27.648+01:00  INFO 22151 --- [librairie-online] [main] c.e.l.service.MangaService               : Recherche d'un manga avec l'ID: 4
2025-01-30T14:19:27.650+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T14:19:27.653+01:00  INFO 22151 --- [librairie-online] [main] c.e.l.service.MangaService               : Manga trouvé: com.example.librairie_online.entity.Manga@3cc0efa2
2025-01-30T14:19:27.653+01:00  INFO 22151 --- [librairie-online] [main] c.e.l.service.ClientService              : Recherche d'un client avec l'ID: 4
2025-01-30T14:19:27.654+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T14:19:27.656+01:00  INFO 22151 --- [librairie-online] [main] c.e.l.service.ClientService              : Client trouvé: com.example.librairie_online.entity.Client@2ee4c028
2025-01-30T14:19:27.656+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-30T14:19:27.658+01:00  INFO 22151 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat créé avec succès: com.example.librairie_online.entity.Achete@58b53c53
2025-01-30T14:19:27.666+01:00 DEBUG 22151 --- [librairie-online] [main] org.hibernate.SQL                        : select count(*) from Achete a1_0
2025-01-30T14:19:27.760+01:00  INFO 22151 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:19:27.761+01:00 DEBUG 22151 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:19:27.764+01:00 DEBUG 22151 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:19:27.766+01:00 DEBUG 22151 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:19:27.767+01:00 DEBUG 22151 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:19:27.769+01:00 DEBUG 22151 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:19:27.770+01:00 DEBUG 22151 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:19:27.771+01:00 DEBUG 22151 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:19:27.772+01:00 DEBUG 22151 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:19:27.773+01:00 DEBUG 22151 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:19:27.774+01:00 DEBUG 22151 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:19:27.775+01:00 DEBUG 22151 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:19:27.776+01:00 DEBUG 22151 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:19:27.778+01:00 DEBUG 22151 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:19:27.782+01:00 DEBUG 22151 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:19:27.786+01:00  INFO 22151 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-30T14:19:27.789+01:00  INFO 22151 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-30T14:19:31.521+01:00  INFO 22312 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 22312 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-30T14:19:31.523+01:00  INFO 22312 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-30T14:19:32.408+01:00  INFO 22312 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-30T14:19:32.505+01:00  INFO 22312 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 87 ms. Found 14 JPA repository interfaces.
2025-01-30T14:19:33.211+01:00  INFO 22312 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-30T14:19:33.288+01:00  INFO 22312 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-30T14:19:33.329+01:00  INFO 22312 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-30T14:19:33.693+01:00  INFO 22312 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-30T14:19:33.720+01:00  INFO 22312 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-30T14:19:33.932+01:00  INFO 22312 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-30T14:19:33.934+01:00  INFO 22312 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-30T14:19:33.965+01:00  WARN 22312 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-30T14:19:35.179+01:00  INFO 22312 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-30T14:19:35.194+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:19:35.199+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:19:35.199+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:19:35.199+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:19:35.200+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:19:35.200+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:19:35.200+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:19:35.200+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:19:35.200+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:19:35.201+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:19:35.201+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:19:35.201+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:19:35.201+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:19:35.201+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:19:35.207+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-30T14:19:35.216+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-30T14:19:35.217+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-30T14:19:35.220+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-30T14:19:35.223+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-30T14:19:35.224+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-30T14:19:35.225+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-30T14:19:35.226+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-30T14:19:35.227+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-30T14:19:35.228+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:19:35.228+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:19:35.233+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-30T14:19:35.235+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-30T14:19:35.237+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-30T14:19:35.240+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-30T14:19:35.252+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-30T14:19:35.254+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-30T14:19:35.257+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-30T14:19:35.258+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-30T14:19:35.259+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-30T14:19:35.260+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-30T14:19:35.262+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-30T14:19:35.263+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-30T14:19:35.265+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-30T14:19:35.266+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-30T14:19:35.268+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-30T14:19:35.270+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-30T14:19:35.272+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-30T14:19:35.274+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-30T14:19:35.275+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-30T14:19:35.279+01:00  INFO 22312 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:19:35.977+01:00  WARN 22312 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: a19cbc0c-e273-45de-bee4-f4ad0f5035bf

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-30T14:19:36.015+01:00  INFO 22312 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-30T14:19:36.762+01:00  INFO 22312 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-30T14:19:36.835+01:00  INFO 22312 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-30T14:19:36.835+01:00  INFO 22312 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-30T14:19:36.838+01:00  INFO 22312 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-01-30T14:19:36.872+01:00  INFO 22312 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.914 seconds (process running for 7.675)
2025-01-30T14:19:37.575+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T14:19:37.602+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T14:19:37.608+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T14:19:37.610+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T14:19:37.634+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T14:19:37.672+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T14:19:37.676+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T14:19:37.679+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-30T14:19:37.835+01:00  INFO 22312 --- [librairie-online] [main] c.e.l.service.AcheteService              : Recherche d'un achat avec l'ID: 1
2025-01-30T14:19:37.853+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-30T14:19:37.865+01:00  INFO 22312 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat trouvé: com.example.librairie_online.entity.Achete@698b2343
2025-01-30T14:19:37.866+01:00  INFO 22312 --- [librairie-online] [main] c.e.l.service.AcheteService              : Mise à jour de l'achat avec ID: 1
2025-01-30T14:19:37.867+01:00  INFO 22312 --- [librairie-online] [main] c.e.l.service.AcheteService              : Recherche d'un achat avec l'ID: 1
2025-01-30T14:19:37.868+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-30T14:19:37.870+01:00  INFO 22312 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat trouvé: com.example.librairie_online.entity.Achete@59dae020
2025-01-30T14:19:37.877+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-30T14:19:37.891+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : update Achete set nAdherent=?,date=?,nSerie=?,prix=? where id=?
2025-01-30T14:19:37.896+01:00  INFO 22312 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat mis à jour avec succès: com.example.librairie_online.entity.Achete@361eed12
2025-01-30T14:19:38.025+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T14:19:38.027+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T14:19:38.029+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T14:19:38.038+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-30T14:19:38.044+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T14:19:38.045+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-30T14:19:38.048+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-30T14:19:38.052+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T14:19:38.054+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-30T14:19:38.058+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T14:19:38.060+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Role where id=?
2025-01-30T14:19:38.063+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T14:19:38.067+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T14:19:38.071+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T14:19:38.077+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-30T14:19:38.084+01:00  INFO 22312 --- [librairie-online] [main] c.e.l.service.AcheteService              : Recherche d'un achat avec l'ID: 2
2025-01-30T14:19:38.085+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-30T14:19:38.088+01:00  INFO 22312 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat trouvé: com.example.librairie_online.entity.Achete@3c1133ad
2025-01-30T14:19:38.089+01:00  INFO 22312 --- [librairie-online] [main] c.e.l.service.AcheteService              : Suppression de l'achat avec ID: 2
2025-01-30T14:19:38.415+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select count(*) from Achete a1_0 where a1_0.id=?
2025-01-30T14:19:38.422+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-30T14:19:38.426+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-30T14:19:38.428+01:00  INFO 22312 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat supprimé avec succès.
2025-01-30T14:19:38.433+01:00  INFO 22312 --- [librairie-online] [main] c.e.l.service.AcheteService              : Recherche d'un achat avec l'ID: 2
2025-01-30T14:19:38.434+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-30T14:19:38.436+01:00  WARN 22312 --- [librairie-online] [main] c.e.l.service.AcheteService              : Aucun achat trouvé avec l'ID: 2
2025-01-30T14:19:38.446+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T14:19:38.449+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T14:19:38.450+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-30T14:19:38.452+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-30T14:19:38.455+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T14:19:38.457+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-30T14:19:38.462+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T14:19:38.466+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Role where id=?
2025-01-30T14:19:38.469+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T14:19:38.472+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T14:19:38.475+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T14:19:38.479+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-30T14:19:38.482+01:00  INFO 22312 --- [librairie-online] [main] c.e.l.service.AcheteService              : Récupération de tous les achats.
2025-01-30T14:19:38.485+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T14:19:38.487+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T14:19:38.489+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T14:19:38.492+01:00  INFO 22312 --- [librairie-online] [main] c.e.l.service.AcheteService              : Nombre total d'achats récupérés: 1
2025-01-30T14:19:38.512+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T14:19:38.515+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T14:19:38.517+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T14:19:38.520+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-30T14:19:38.524+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T14:19:38.525+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-30T14:19:38.529+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-30T14:19:38.533+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T14:19:38.537+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-30T14:19:38.539+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T14:19:38.542+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Role where id=?
2025-01-30T14:19:38.550+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T14:19:42.312+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T14:19:47.704+01:00 DEBUG 22312 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T14:19:47.717+01:00  WARN 22312 --- [librairie-online] [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Unrecognized field "dat" (class com.example.librairie_online.dto.AcheteDTO), not marked as ignorable]
2025-01-30T14:19:50.788+01:00  INFO 22312 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:19:50.789+01:00 DEBUG 22312 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:19:50.792+01:00 DEBUG 22312 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:19:50.794+01:00 DEBUG 22312 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:19:50.796+01:00 DEBUG 22312 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:19:50.798+01:00 DEBUG 22312 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:19:50.799+01:00 DEBUG 22312 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:19:50.800+01:00 DEBUG 22312 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:19:50.802+01:00 DEBUG 22312 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:19:50.804+01:00 DEBUG 22312 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:19:50.805+01:00 DEBUG 22312 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:19:50.805+01:00 DEBUG 22312 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:19:50.806+01:00 DEBUG 22312 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:19:50.807+01:00 DEBUG 22312 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:19:50.807+01:00 DEBUG 22312 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:19:50.811+01:00  INFO 22312 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-30T14:19:50.815+01:00  INFO 22312 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-30T14:21:02.956+01:00  INFO 22360 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 22360 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-30T14:21:02.958+01:00  INFO 22360 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-30T14:21:03.881+01:00  INFO 22360 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-30T14:21:04.006+01:00  INFO 22360 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 114 ms. Found 14 JPA repository interfaces.
2025-01-30T14:21:04.806+01:00  INFO 22360 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-30T14:21:04.879+01:00  INFO 22360 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-30T14:21:04.926+01:00  INFO 22360 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-30T14:21:05.335+01:00  INFO 22360 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-30T14:21:05.369+01:00  INFO 22360 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-30T14:21:05.615+01:00  INFO 22360 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-30T14:21:05.617+01:00  INFO 22360 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-30T14:21:05.647+01:00  WARN 22360 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-30T14:21:06.926+01:00  INFO 22360 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-30T14:21:06.945+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:21:06.950+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:21:06.951+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:21:06.951+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:21:06.951+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:21:06.952+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:21:06.952+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:21:06.952+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:21:06.952+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:21:06.953+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:21:06.953+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:21:06.953+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:21:06.953+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:21:06.954+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:21:06.960+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-30T14:21:06.971+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-30T14:21:06.972+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-30T14:21:06.977+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-30T14:21:06.978+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-30T14:21:06.980+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-30T14:21:06.981+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-30T14:21:06.983+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-30T14:21:06.984+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-30T14:21:06.986+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:21:06.987+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:21:06.990+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-30T14:21:06.992+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-30T14:21:06.995+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-30T14:21:06.998+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-30T14:21:07.012+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-30T14:21:07.014+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-30T14:21:07.016+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-30T14:21:07.018+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-30T14:21:07.019+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-30T14:21:07.021+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-30T14:21:07.022+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-30T14:21:07.023+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-30T14:21:07.025+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-30T14:21:07.026+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-30T14:21:07.028+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-30T14:21:07.029+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-30T14:21:07.031+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-30T14:21:07.032+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-30T14:21:07.033+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-30T14:21:07.038+01:00  INFO 22360 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:21:07.798+01:00  WARN 22360 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 079176a8-40fa-4b2d-b14b-7df9e417e11e

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-30T14:21:07.838+01:00  INFO 22360 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-30T14:21:08.739+01:00  INFO 22360 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-30T14:21:08.817+01:00  INFO 22360 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-30T14:21:08.817+01:00  INFO 22360 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-30T14:21:08.819+01:00  INFO 22360 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-01-30T14:21:08.861+01:00  INFO 22360 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 6.474 seconds (process running for 8.182)
2025-01-30T14:21:09.621+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T14:21:09.653+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T14:21:09.660+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T14:21:09.662+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T14:21:09.690+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T14:21:09.716+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T14:21:12.135+01:00 DEBUG 22360 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T14:21:12.272+01:00  WARN 22360 --- [librairie-online] [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Unrecognized field "dat" (class com.example.librairie_online.dto.AcheteDTO), not marked as ignorable]
2025-01-30T14:21:15.051+01:00  INFO 22360 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:21:15.052+01:00 DEBUG 22360 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:21:15.054+01:00 DEBUG 22360 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:21:15.056+01:00 DEBUG 22360 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:21:15.057+01:00 DEBUG 22360 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:21:15.059+01:00 DEBUG 22360 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:21:15.060+01:00 DEBUG 22360 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:21:15.061+01:00 DEBUG 22360 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:21:15.061+01:00 DEBUG 22360 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:21:15.062+01:00 DEBUG 22360 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:21:15.064+01:00 DEBUG 22360 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:21:15.064+01:00 DEBUG 22360 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:21:15.066+01:00 DEBUG 22360 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:21:15.067+01:00 DEBUG 22360 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:21:15.068+01:00 DEBUG 22360 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:21:15.071+01:00  INFO 22360 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-30T14:21:15.074+01:00  INFO 22360 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-30T14:23:22.812+01:00  INFO 22440 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 22440 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-30T14:23:22.814+01:00  INFO 22440 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-30T14:23:23.517+01:00  INFO 22440 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-30T14:23:23.601+01:00  INFO 22440 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 76 ms. Found 14 JPA repository interfaces.
2025-01-30T14:23:24.185+01:00  INFO 22440 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-30T14:23:24.254+01:00  INFO 22440 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-30T14:23:24.289+01:00  INFO 22440 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-30T14:23:24.581+01:00  INFO 22440 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-30T14:23:24.605+01:00  INFO 22440 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-30T14:23:24.793+01:00  INFO 22440 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-30T14:23:24.795+01:00  INFO 22440 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-30T14:23:24.839+01:00  WARN 22440 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-30T14:23:25.862+01:00  INFO 22440 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-30T14:23:25.875+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:23:25.878+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:23:25.879+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:23:25.879+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:23:25.879+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:23:25.879+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:23:25.880+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:23:25.880+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:23:25.880+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:23:25.880+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:23:25.881+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:23:25.881+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:23:25.881+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:23:25.881+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:23:25.886+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-30T14:23:25.894+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-30T14:23:25.896+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-30T14:23:25.898+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-30T14:23:25.900+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-30T14:23:25.901+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-30T14:23:25.903+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-30T14:23:25.904+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-30T14:23:25.905+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-30T14:23:25.906+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:23:25.907+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:23:25.909+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-30T14:23:25.911+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-30T14:23:25.912+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-30T14:23:25.915+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-30T14:23:25.925+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-30T14:23:25.927+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-30T14:23:25.928+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-30T14:23:25.929+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-30T14:23:25.931+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-30T14:23:25.932+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-30T14:23:25.933+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-30T14:23:25.934+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-30T14:23:25.935+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-30T14:23:25.937+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-30T14:23:25.938+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-30T14:23:25.939+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-30T14:23:25.941+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-30T14:23:25.942+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-30T14:23:25.943+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-30T14:23:25.947+01:00  INFO 22440 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:23:26.648+01:00  WARN 22440 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 6e90fa62-7980-4bff-b952-79c0ff301b71

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-30T14:23:26.684+01:00  INFO 22440 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-30T14:23:27.442+01:00  INFO 22440 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-30T14:23:27.512+01:00  INFO 22440 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-30T14:23:27.512+01:00  INFO 22440 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-30T14:23:27.515+01:00  INFO 22440 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-01-30T14:23:27.550+01:00  INFO 22440 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.146 seconds (process running for 6.347)
2025-01-30T14:23:28.243+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T14:23:28.275+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T14:23:28.280+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T14:23:28.283+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T14:23:28.301+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T14:23:28.322+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T14:23:28.325+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T14:23:28.434+01:00  INFO 22440 --- [librairie-online] [main] c.e.l.service.AcheteService              : Création d'un achat: com.example.librairie_online.dto.AcheteDTO@20fdf45a
2025-01-30T14:23:28.434+01:00  INFO 22440 --- [librairie-online] [main] c.e.l.service.MangaService               : Recherche d'un manga avec l'ID: 1
2025-01-30T14:23:28.443+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T14:23:28.449+01:00  INFO 22440 --- [librairie-online] [main] c.e.l.service.MangaService               : Manga trouvé: com.example.librairie_online.entity.Manga@3c9e82a6
2025-01-30T14:23:28.449+01:00  INFO 22440 --- [librairie-online] [main] c.e.l.service.ClientService              : Recherche d'un client avec l'ID: 1
2025-01-30T14:23:28.450+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T14:23:28.452+01:00  INFO 22440 --- [librairie-online] [main] c.e.l.service.ClientService              : Client trouvé: com.example.librairie_online.entity.Client@1bef1304
2025-01-30T14:23:28.454+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-30T14:23:28.457+01:00  INFO 22440 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat créé avec succès: com.example.librairie_online.entity.Achete@835718b
2025-01-30T14:23:28.807+01:00 DEBUG 22440 --- [librairie-online] [main] org.hibernate.SQL                        : select count(*) from Achete a1_0
2025-01-30T14:23:28.887+01:00  INFO 22440 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:23:28.887+01:00 DEBUG 22440 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:23:28.890+01:00 DEBUG 22440 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:23:28.892+01:00 DEBUG 22440 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:23:28.894+01:00 DEBUG 22440 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:23:28.896+01:00 DEBUG 22440 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:23:28.897+01:00 DEBUG 22440 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:23:28.899+01:00 DEBUG 22440 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:23:28.899+01:00 DEBUG 22440 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:23:28.901+01:00 DEBUG 22440 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:23:28.902+01:00 DEBUG 22440 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:23:28.903+01:00 DEBUG 22440 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:23:28.904+01:00 DEBUG 22440 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:23:28.905+01:00 DEBUG 22440 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:23:28.906+01:00 DEBUG 22440 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:23:28.910+01:00  INFO 22440 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-30T14:23:28.922+01:00  INFO 22440 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-30T14:24:21.679+01:00  INFO 22483 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 22483 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-30T14:24:21.681+01:00  INFO 22483 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-30T14:24:22.472+01:00  INFO 22483 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-30T14:24:22.566+01:00  INFO 22483 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 85 ms. Found 14 JPA repository interfaces.
2025-01-30T14:24:23.208+01:00  INFO 22483 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-30T14:24:23.286+01:00  INFO 22483 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-30T14:24:23.326+01:00  INFO 22483 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-30T14:24:23.663+01:00  INFO 22483 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-30T14:24:23.691+01:00  INFO 22483 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-30T14:24:23.900+01:00  INFO 22483 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-30T14:24:23.902+01:00  INFO 22483 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-30T14:24:23.933+01:00  WARN 22483 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-30T14:24:25.062+01:00  INFO 22483 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-30T14:24:25.075+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:24:25.079+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:24:25.079+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:24:25.080+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:24:25.080+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:24:25.080+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:24:25.080+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:24:25.080+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:24:25.081+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:24:25.081+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:24:25.081+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:24:25.081+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:24:25.081+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:24:25.082+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:24:25.086+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-30T14:24:25.096+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-30T14:24:25.097+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-30T14:24:25.099+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-30T14:24:25.101+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-30T14:24:25.102+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-30T14:24:25.103+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-30T14:24:25.105+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-30T14:24:25.107+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-30T14:24:25.108+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:24:25.110+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:24:25.112+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-30T14:24:25.113+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-30T14:24:25.115+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-30T14:24:25.117+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-30T14:24:25.128+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-30T14:24:25.129+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-30T14:24:25.131+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-30T14:24:25.132+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-30T14:24:25.134+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-30T14:24:25.136+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-30T14:24:25.137+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-30T14:24:25.138+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-30T14:24:25.139+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-30T14:24:25.141+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-30T14:24:25.144+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-30T14:24:25.145+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-30T14:24:25.147+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-30T14:24:25.149+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-30T14:24:25.150+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-30T14:24:25.155+01:00  INFO 22483 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:24:25.886+01:00  WARN 22483 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: a708448a-3127-4430-8a68-9134f77683f3

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-30T14:24:25.926+01:00  INFO 22483 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-30T14:24:26.722+01:00  INFO 22483 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-30T14:24:26.788+01:00  INFO 22483 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-30T14:24:26.789+01:00  INFO 22483 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-30T14:24:26.791+01:00  INFO 22483 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-01-30T14:24:26.826+01:00  INFO 22483 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.698 seconds (process running for 7.194)
2025-01-30T14:24:27.491+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T14:24:27.512+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T14:24:27.518+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T14:24:27.521+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T14:24:27.539+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T14:24:27.558+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T14:24:27.562+01:00 DEBUG 22483 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T14:24:27.670+01:00  WARN 22483 --- [librairie-online] [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Unrecognized field "ndherent" (class com.example.librairie_online.entity.Client), not marked as ignorable]
2025-01-30T14:24:27.708+01:00  INFO 22483 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:24:27.709+01:00 DEBUG 22483 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:24:27.713+01:00 DEBUG 22483 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:24:27.715+01:00 DEBUG 22483 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:24:27.717+01:00 DEBUG 22483 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:24:27.719+01:00 DEBUG 22483 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:24:27.721+01:00 DEBUG 22483 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:24:27.722+01:00 DEBUG 22483 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:24:27.723+01:00 DEBUG 22483 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:24:27.727+01:00 DEBUG 22483 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:24:27.728+01:00 DEBUG 22483 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:24:27.729+01:00 DEBUG 22483 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:24:27.731+01:00 DEBUG 22483 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:24:27.732+01:00 DEBUG 22483 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:24:27.734+01:00 DEBUG 22483 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:24:27.737+01:00  INFO 22483 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-30T14:24:27.741+01:00  INFO 22483 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-30T14:25:39.200+01:00  INFO 22539 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 22539 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-30T14:25:39.202+01:00  INFO 22539 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-30T14:25:40.008+01:00  INFO 22539 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-30T14:25:40.119+01:00  INFO 22539 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 100 ms. Found 14 JPA repository interfaces.
2025-01-30T14:25:40.786+01:00  INFO 22539 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-30T14:25:40.865+01:00  INFO 22539 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-30T14:25:40.904+01:00  INFO 22539 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-30T14:25:41.260+01:00  INFO 22539 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-30T14:25:41.334+01:00  INFO 22539 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-30T14:25:41.603+01:00  INFO 22539 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-30T14:25:41.605+01:00  INFO 22539 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-30T14:25:41.631+01:00  WARN 22539 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-30T14:25:42.726+01:00  INFO 22539 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-30T14:25:42.739+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:25:42.743+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:25:42.743+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:25:42.743+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:25:42.744+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:25:42.744+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:25:42.744+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:25:42.744+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:25:42.745+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:25:42.745+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:25:42.745+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:25:42.745+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:25:42.746+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:25:42.746+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:25:42.750+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-30T14:25:42.758+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-30T14:25:42.759+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-30T14:25:42.761+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-30T14:25:42.763+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-30T14:25:42.764+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-30T14:25:42.765+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-30T14:25:42.766+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-30T14:25:42.767+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-30T14:25:42.768+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:25:42.769+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-30T14:25:42.771+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-30T14:25:42.772+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-30T14:25:42.774+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-30T14:25:42.776+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-30T14:25:42.786+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-30T14:25:42.788+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-30T14:25:42.789+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-30T14:25:42.790+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-30T14:25:42.791+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-30T14:25:42.792+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-30T14:25:42.794+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-30T14:25:42.795+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-30T14:25:42.796+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-30T14:25:42.797+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-30T14:25:42.799+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-30T14:25:42.800+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-30T14:25:42.802+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-30T14:25:42.803+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-30T14:25:42.805+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-30T14:25:42.808+01:00  INFO 22539 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:25:43.532+01:00  WARN 22539 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: bcc37a21-dd7a-4621-90f9-6e2b2d2c64cf

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-30T14:25:43.568+01:00  INFO 22539 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-30T14:25:44.344+01:00  INFO 22539 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-30T14:25:44.416+01:00  INFO 22539 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-30T14:25:44.416+01:00  INFO 22539 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-30T14:25:44.418+01:00  INFO 22539 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-01-30T14:25:44.452+01:00  INFO 22539 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.738 seconds (process running for 7.325)
2025-01-30T14:25:45.130+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-30T14:25:45.154+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-30T14:25:45.159+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-30T14:25:45.162+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-30T14:25:45.181+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-30T14:25:45.203+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-30T14:25:45.208+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-30T14:25:45.379+01:00  INFO 22539 --- [librairie-online] [main] c.e.l.service.AcheteService              : Création d'un achat: com.example.librairie_online.dto.AcheteDTO@20fdf45a
2025-01-30T14:25:45.381+01:00  INFO 22539 --- [librairie-online] [main] c.e.l.service.MangaService               : Recherche d'un manga avec l'ID: 1
2025-01-30T14:25:45.401+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-30T14:25:45.411+01:00  INFO 22539 --- [librairie-online] [main] c.e.l.service.MangaService               : Manga trouvé: com.example.librairie_online.entity.Manga@3c9e82a6
2025-01-30T14:25:45.411+01:00  INFO 22539 --- [librairie-online] [main] c.e.l.service.ClientService              : Recherche d'un client avec l'ID: 1
2025-01-30T14:25:45.412+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-30T14:25:45.415+01:00  INFO 22539 --- [librairie-online] [main] c.e.l.service.ClientService              : Client trouvé: com.example.librairie_online.entity.Client@1bef1304
2025-01-30T14:25:45.417+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-30T14:25:45.420+01:00  INFO 22539 --- [librairie-online] [main] c.e.l.service.AcheteService              : Achat créé avec succès: com.example.librairie_online.entity.Achete@835718b
2025-01-30T14:25:45.757+01:00 DEBUG 22539 --- [librairie-online] [main] org.hibernate.SQL                        : select count(*) from Achete a1_0
2025-01-30T14:25:45.837+01:00  INFO 22539 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-30T14:25:45.838+01:00 DEBUG 22539 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-30T14:25:45.841+01:00 DEBUG 22539 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-30T14:25:45.843+01:00 DEBUG 22539 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-30T14:25:45.844+01:00 DEBUG 22539 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-30T14:25:45.847+01:00 DEBUG 22539 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-30T14:25:45.848+01:00 DEBUG 22539 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-30T14:25:45.849+01:00 DEBUG 22539 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-30T14:25:45.850+01:00 DEBUG 22539 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-30T14:25:45.852+01:00 DEBUG 22539 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-30T14:25:45.853+01:00 DEBUG 22539 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-30T14:25:45.854+01:00 DEBUG 22539 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-30T14:25:45.855+01:00 DEBUG 22539 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-30T14:25:45.856+01:00 DEBUG 22539 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-30T14:25:45.857+01:00 DEBUG 22539 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-30T14:25:45.861+01:00  INFO 22539 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-30T14:25:45.864+01:00  INFO 22539 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
