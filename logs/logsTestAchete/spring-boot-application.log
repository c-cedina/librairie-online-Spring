2025-01-29T13:19:01.873+01:00  INFO 74726 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 74726 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-29T13:19:01.894+01:00  INFO 74726 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-29T13:19:02.653+01:00  INFO 74726 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-29T13:19:02.751+01:00  INFO 74726 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 88 ms. Found 14 JPA repository interfaces.
2025-01-29T13:19:03.381+01:00  INFO 74726 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-29T13:19:03.451+01:00  INFO 74726 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-29T13:19:03.489+01:00  INFO 74726 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-29T13:19:03.772+01:00  INFO 74726 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-29T13:19:03.796+01:00  INFO 74726 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-29T13:19:04.003+01:00  INFO 74726 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-29T13:19:04.005+01:00  INFO 74726 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-29T13:19:04.034+01:00  WARN 74726 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-29T13:19:05.136+01:00  INFO 74726 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-29T13:19:05.148+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:19:05.151+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:19:05.151+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:19:05.152+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:19:05.152+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:19:05.152+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:19:05.152+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:19:05.152+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:19:05.153+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:19:05.153+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:19:05.153+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:19:05.154+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:19:05.154+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:19:05.154+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:19:05.158+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-29T13:19:05.165+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-29T13:19:05.166+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-29T13:19:05.169+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-29T13:19:05.170+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-29T13:19:05.171+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-29T13:19:05.172+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-29T13:19:05.173+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-29T13:19:05.174+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-29T13:19:05.174+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:19:05.175+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:19:05.177+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-29T13:19:05.178+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-29T13:19:05.180+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-29T13:19:05.181+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-29T13:19:05.192+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-29T13:19:05.193+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-29T13:19:05.194+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-29T13:19:05.196+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-29T13:19:05.197+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-29T13:19:05.199+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-29T13:19:05.200+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-29T13:19:05.201+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-29T13:19:05.202+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-29T13:19:05.203+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-29T13:19:05.205+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-29T13:19:05.206+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-29T13:19:05.207+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-29T13:19:05.208+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-29T13:19:05.210+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-29T13:19:05.213+01:00  INFO 74726 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:19:05.959+01:00  WARN 74726 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 66239e25-eec6-47b0-aacb-669079c0266a

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-29T13:19:05.992+01:00  INFO 74726 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-29T13:19:06.694+01:00  INFO 74726 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-29T13:19:06.782+01:00  INFO 74726 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-29T13:19:06.782+01:00  INFO 74726 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-29T13:19:06.784+01:00  INFO 74726 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-01-29T13:19:06.817+01:00  INFO 74726 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.402 seconds (process running for 6.635)
2025-01-29T13:19:07.467+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:19:07.489+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:19:07.494+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:19:07.512+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:19:07.529+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:19:07.534+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:19:07.537+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:19:07.617+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:19:07.625+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:19:07.629+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:19:07.639+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-29T13:19:07.643+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:19:07.644+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-29T13:19:07.646+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-29T13:19:07.648+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:19:07.650+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-29T13:19:07.651+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:19:07.653+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:19:07.654+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:19:07.656+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:19:07.672+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:19:07.674+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:19:07.676+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:19:07.679+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-29T13:19:07.682+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:19:07.682+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-29T13:19:07.684+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-29T13:19:07.686+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:19:07.688+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-29T13:19:07.691+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:19:07.694+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:19:07.698+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:19:07.701+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:19:07.714+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:19:07.715+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:19:07.716+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:19:07.721+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-29T13:19:07.724+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:19:07.725+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-29T13:19:07.728+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-29T13:19:07.730+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:19:07.732+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-29T13:19:07.735+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:19:07.737+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:19:07.739+01:00 DEBUG 74726 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:19:07.760+01:00  INFO 74726 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:19:07.761+01:00 DEBUG 74726 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:19:07.765+01:00 DEBUG 74726 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:19:07.768+01:00 DEBUG 74726 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:19:07.770+01:00 DEBUG 74726 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:19:07.773+01:00 DEBUG 74726 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:19:07.774+01:00 DEBUG 74726 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:19:07.775+01:00 DEBUG 74726 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:19:07.776+01:00 DEBUG 74726 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:19:07.778+01:00 DEBUG 74726 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:19:07.779+01:00 DEBUG 74726 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:19:07.780+01:00 DEBUG 74726 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:19:07.781+01:00 DEBUG 74726 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:19:07.782+01:00 DEBUG 74726 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:19:07.783+01:00 DEBUG 74726 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:19:07.787+01:00  INFO 74726 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-29T13:19:07.790+01:00  INFO 74726 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-29T13:20:03.112+01:00  INFO 74959 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 74959 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-29T13:20:03.113+01:00  INFO 74959 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-29T13:20:03.873+01:00  INFO 74959 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-29T13:20:03.966+01:00  INFO 74959 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 85 ms. Found 14 JPA repository interfaces.
2025-01-29T13:20:04.588+01:00  INFO 74959 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-29T13:20:04.658+01:00  INFO 74959 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-29T13:20:04.692+01:00  INFO 74959 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-29T13:20:05.016+01:00  INFO 74959 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-29T13:20:05.047+01:00  INFO 74959 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-29T13:20:05.273+01:00  INFO 74959 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-29T13:20:05.275+01:00  INFO 74959 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-29T13:20:05.300+01:00  WARN 74959 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-29T13:20:06.348+01:00  INFO 74959 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-29T13:20:06.360+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:20:06.364+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:20:06.364+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:20:06.364+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:20:06.365+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:20:06.365+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:20:06.365+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:20:06.365+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:20:06.365+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:20:06.365+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:20:06.366+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:20:06.366+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:20:06.366+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:20:06.366+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:20:06.370+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-29T13:20:06.378+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-29T13:20:06.379+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-29T13:20:06.381+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-29T13:20:06.383+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-29T13:20:06.383+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-29T13:20:06.384+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-29T13:20:06.386+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-29T13:20:06.387+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-29T13:20:06.387+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:20:06.388+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:20:06.390+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-29T13:20:06.391+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-29T13:20:06.393+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-29T13:20:06.394+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-29T13:20:06.406+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-29T13:20:06.407+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-29T13:20:06.409+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-29T13:20:06.410+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-29T13:20:06.412+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-29T13:20:06.413+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-29T13:20:06.415+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-29T13:20:06.417+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-29T13:20:06.418+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-29T13:20:06.419+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-29T13:20:06.421+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-29T13:20:06.422+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-29T13:20:06.423+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-29T13:20:06.425+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-29T13:20:06.426+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-29T13:20:06.429+01:00  INFO 74959 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:20:07.129+01:00  WARN 74959 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 9f2b58d2-f6f3-49a8-a07f-fec0bac044f9

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-29T13:20:07.161+01:00  INFO 74959 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-29T13:20:07.855+01:00  INFO 74959 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-29T13:20:07.951+01:00  INFO 74959 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-29T13:20:07.951+01:00  INFO 74959 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-29T13:20:07.953+01:00  INFO 74959 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-01-29T13:20:07.988+01:00  INFO 74959 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.326 seconds (process running for 6.598)
2025-01-29T13:20:08.724+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:20:08.747+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:20:08.753+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:20:08.770+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:20:08.788+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:20:08.791+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:20:08.794+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:20:08.922+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:20:08.931+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:20:08.937+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:20:08.948+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : update Achete set nAdherent=?,date=?,nSerie=?,prix=? where id=?
2025-01-29T13:20:09.076+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:20:09.078+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:20:09.079+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:20:09.088+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-29T13:20:09.092+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:20:09.093+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-29T13:20:09.094+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-29T13:20:09.097+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:20:09.100+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-29T13:20:09.102+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:20:09.104+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:20:09.107+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:20:09.109+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:20:09.113+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:20:09.118+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:20:09.121+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-29T13:20:09.128+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:20:09.142+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:20:09.146+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:20:09.147+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-29T13:20:09.149+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-29T13:20:09.152+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:20:09.154+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-29T13:20:09.156+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:20:09.158+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:20:09.161+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:20:09.162+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:20:09.168+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:20:09.169+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:20:09.171+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:20:09.192+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:20:09.194+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:20:09.195+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:20:09.198+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-29T13:20:09.200+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:20:09.202+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-29T13:20:09.204+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-29T13:20:09.207+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:20:09.208+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-29T13:20:09.210+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:20:09.212+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:20:09.216+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:20:09.221+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:20:09.224+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:20:09.226+01:00 DEBUG 74959 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:20:09.235+01:00  WARN 74959 --- [librairie-online] [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Cannot invoke "com.example.librairie_online.entity.Role.getRole()" because "this.role" is null]
2025-01-29T13:20:09.266+01:00  INFO 74959 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:20:09.267+01:00 DEBUG 74959 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:20:09.270+01:00 DEBUG 74959 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:20:09.271+01:00 DEBUG 74959 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:20:09.272+01:00 DEBUG 74959 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:20:09.274+01:00 DEBUG 74959 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:20:09.275+01:00 DEBUG 74959 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:20:09.276+01:00 DEBUG 74959 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:20:09.277+01:00 DEBUG 74959 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:20:09.278+01:00 DEBUG 74959 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:20:09.278+01:00 DEBUG 74959 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:20:09.279+01:00 DEBUG 74959 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:20:09.279+01:00 DEBUG 74959 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:20:09.280+01:00 DEBUG 74959 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:20:09.281+01:00 DEBUG 74959 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:20:09.286+01:00  INFO 74959 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-29T13:20:09.288+01:00  INFO 74959 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-29T13:21:31.380+01:00  INFO 75309 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 75309 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-29T13:21:31.381+01:00  INFO 75309 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-29T13:21:32.182+01:00  INFO 75309 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-29T13:21:32.283+01:00  INFO 75309 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 93 ms. Found 14 JPA repository interfaces.
2025-01-29T13:21:32.922+01:00  INFO 75309 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-29T13:21:32.998+01:00  INFO 75309 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-29T13:21:33.032+01:00  INFO 75309 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-29T13:21:33.340+01:00  INFO 75309 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-29T13:21:33.365+01:00  INFO 75309 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-29T13:21:33.549+01:00  INFO 75309 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-29T13:21:33.551+01:00  INFO 75309 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-29T13:21:33.589+01:00  WARN 75309 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-29T13:21:34.620+01:00  INFO 75309 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-29T13:21:34.632+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:21:34.636+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:21:34.636+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:21:34.636+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:21:34.637+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:21:34.637+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:21:34.637+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:21:34.638+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:21:34.638+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:21:34.638+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:21:34.638+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:21:34.639+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:21:34.639+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:21:34.639+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:21:34.643+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-29T13:21:34.652+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-29T13:21:34.653+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-29T13:21:34.655+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-29T13:21:34.656+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-29T13:21:34.657+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-29T13:21:34.658+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-29T13:21:34.660+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-29T13:21:34.661+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-29T13:21:34.662+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:21:34.664+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:21:34.667+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-29T13:21:34.668+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-29T13:21:34.670+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-29T13:21:34.672+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-29T13:21:34.684+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-29T13:21:34.686+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-29T13:21:34.687+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-29T13:21:34.688+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-29T13:21:34.689+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-29T13:21:34.691+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-29T13:21:34.692+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-29T13:21:34.693+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-29T13:21:34.694+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-29T13:21:34.696+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-29T13:21:34.697+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-29T13:21:34.699+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-29T13:21:34.700+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-29T13:21:34.701+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-29T13:21:34.702+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-29T13:21:34.706+01:00  INFO 75309 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:21:35.374+01:00  WARN 75309 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 4eadfa6a-5243-4cd9-b750-111245c1e279

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-29T13:21:35.408+01:00  INFO 75309 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-29T13:21:36.155+01:00  INFO 75309 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-29T13:21:36.224+01:00  INFO 75309 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-29T13:21:36.224+01:00  INFO 75309 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-29T13:21:36.226+01:00  INFO 75309 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-01-29T13:21:36.260+01:00  INFO 75309 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.333 seconds (process running for 6.599)
2025-01-29T13:21:36.972+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:21:36.996+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:21:37.001+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:21:37.003+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T13:21:37.022+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:21:37.041+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:21:37.045+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:21:37.048+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:21:37.172+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:21:37.180+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:21:37.187+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:21:37.197+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : update Achete set nAdherent=?,date=?,nSerie=?,prix=? where id=?
2025-01-29T13:21:37.322+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:21:37.324+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:21:37.326+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:21:37.334+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-29T13:21:37.339+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:21:37.340+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-29T13:21:37.343+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-29T13:21:37.345+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:21:37.346+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-29T13:21:37.350+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T13:21:37.351+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Role where id=?
2025-01-29T13:21:37.353+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:21:37.355+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:21:37.357+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:21:37.359+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:21:37.363+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:21:37.367+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:21:37.370+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-29T13:21:37.379+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:21:37.392+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:21:37.395+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:21:37.396+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-29T13:21:37.399+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-29T13:21:37.402+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:21:37.404+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-29T13:21:37.407+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T13:21:37.409+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Role where id=?
2025-01-29T13:21:37.411+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:21:37.412+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:21:37.414+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:21:37.418+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:21:37.422+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:21:37.423+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:21:37.424+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:21:37.439+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:21:37.440+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:21:37.441+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:21:37.444+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-29T13:21:37.447+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:21:37.448+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-29T13:21:37.451+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-29T13:21:37.454+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:21:37.456+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-29T13:21:37.459+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T13:21:37.461+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Role where id=?
2025-01-29T13:21:37.463+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:21:37.466+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:21:37.469+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:21:37.475+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:21:37.478+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:21:37.480+01:00 DEBUG 75309 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:21:37.489+01:00  WARN 75309 --- [librairie-online] [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Cannot invoke "com.example.librairie_online.entity.Role.getRole()" because "this.role" is null]
2025-01-29T13:21:37.513+01:00  INFO 75309 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:21:37.514+01:00 DEBUG 75309 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:21:37.517+01:00 DEBUG 75309 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:21:37.519+01:00 DEBUG 75309 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:21:37.520+01:00 DEBUG 75309 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:21:37.522+01:00 DEBUG 75309 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:21:37.523+01:00 DEBUG 75309 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:21:37.524+01:00 DEBUG 75309 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:21:37.525+01:00 DEBUG 75309 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:21:37.527+01:00 DEBUG 75309 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:21:37.528+01:00 DEBUG 75309 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:21:37.529+01:00 DEBUG 75309 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:21:37.529+01:00 DEBUG 75309 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:21:37.529+01:00 DEBUG 75309 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:21:37.530+01:00 DEBUG 75309 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:21:37.532+01:00  INFO 75309 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-29T13:21:37.535+01:00  INFO 75309 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-29T13:22:41.880+01:00  INFO 75576 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 75576 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-29T13:22:41.881+01:00  INFO 75576 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-29T13:22:42.589+01:00  INFO 75576 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-29T13:22:42.676+01:00  INFO 75576 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 78 ms. Found 14 JPA repository interfaces.
2025-01-29T13:22:43.279+01:00  INFO 75576 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-29T13:22:43.356+01:00  INFO 75576 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-29T13:22:43.393+01:00  INFO 75576 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-29T13:22:43.709+01:00  INFO 75576 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-29T13:22:43.738+01:00  INFO 75576 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-29T13:22:43.944+01:00  INFO 75576 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-29T13:22:43.946+01:00  INFO 75576 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-29T13:22:43.984+01:00  WARN 75576 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-29T13:22:45.317+01:00  INFO 75576 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-29T13:22:45.339+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:22:45.345+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:22:45.346+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:22:45.347+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:22:45.347+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:22:45.347+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:22:45.348+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:22:45.348+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:22:45.349+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:22:45.349+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:22:45.349+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:22:45.350+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:22:45.351+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:22:45.352+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:22:45.358+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-29T13:22:45.370+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-29T13:22:45.372+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-29T13:22:45.375+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-29T13:22:45.377+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-29T13:22:45.379+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-29T13:22:45.381+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-29T13:22:45.383+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-29T13:22:45.386+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-29T13:22:45.388+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:22:45.390+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:22:45.393+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-29T13:22:45.396+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-29T13:22:45.398+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-29T13:22:45.403+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-29T13:22:45.419+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-29T13:22:45.422+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-29T13:22:45.423+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-29T13:22:45.425+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-29T13:22:45.426+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-29T13:22:45.427+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-29T13:22:45.430+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-29T13:22:45.431+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-29T13:22:45.434+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-29T13:22:45.437+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-29T13:22:45.439+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-29T13:22:45.442+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-29T13:22:45.444+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-29T13:22:45.446+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-29T13:22:45.449+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-29T13:22:45.456+01:00  INFO 75576 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:22:46.225+01:00  WARN 75576 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 413fa648-ea49-45a7-8078-9d14d27b99f7

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-29T13:22:46.275+01:00  INFO 75576 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-29T13:22:47.228+01:00  INFO 75576 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-29T13:22:47.301+01:00  INFO 75576 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-29T13:22:47.302+01:00  INFO 75576 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-29T13:22:47.305+01:00  INFO 75576 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 3 ms
2025-01-29T13:22:47.347+01:00  INFO 75576 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.917 seconds (process running for 7.143)
2025-01-29T13:22:48.086+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:22:48.112+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:22:48.118+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:22:48.121+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T13:22:48.147+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:22:48.173+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:22:48.178+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:22:48.363+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:22:48.375+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:22:48.380+01:00 DEBUG 75576 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:22:48.427+01:00  WARN 75576 --- [librairie-online] [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Cannot invoke "com.example.librairie_online.entity.Role.getRole()" because "this.role" is null]
2025-01-29T13:22:48.468+01:00  INFO 75576 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:22:48.469+01:00 DEBUG 75576 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:22:48.471+01:00 DEBUG 75576 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:22:48.473+01:00 DEBUG 75576 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:22:48.473+01:00 DEBUG 75576 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:22:48.475+01:00 DEBUG 75576 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:22:48.475+01:00 DEBUG 75576 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:22:48.476+01:00 DEBUG 75576 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:22:48.477+01:00 DEBUG 75576 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:22:48.477+01:00 DEBUG 75576 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:22:48.478+01:00 DEBUG 75576 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:22:48.479+01:00 DEBUG 75576 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:22:48.479+01:00 DEBUG 75576 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:22:48.480+01:00 DEBUG 75576 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:22:48.480+01:00 DEBUG 75576 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:22:48.484+01:00  INFO 75576 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-29T13:22:48.486+01:00  INFO 75576 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-29T13:22:53.687+01:00  INFO 75622 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 75622 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-29T13:22:53.689+01:00  INFO 75622 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-29T13:22:54.392+01:00  INFO 75622 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-29T13:22:54.494+01:00  INFO 75622 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 93 ms. Found 14 JPA repository interfaces.
2025-01-29T13:22:55.106+01:00  INFO 75622 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-29T13:22:55.173+01:00  INFO 75622 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-29T13:22:55.209+01:00  INFO 75622 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-29T13:22:55.501+01:00  INFO 75622 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-29T13:22:55.527+01:00  INFO 75622 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-29T13:22:55.838+01:00  INFO 75622 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-29T13:22:55.840+01:00  INFO 75622 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-29T13:22:55.869+01:00  WARN 75622 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-29T13:22:57.104+01:00  INFO 75622 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-29T13:22:57.118+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:22:57.122+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:22:57.122+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:22:57.122+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:22:57.123+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:22:57.123+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:22:57.123+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:22:57.124+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:22:57.124+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:22:57.124+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:22:57.124+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:22:57.125+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:22:57.125+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:22:57.125+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:22:57.129+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-29T13:22:57.138+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-29T13:22:57.139+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-29T13:22:57.141+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-29T13:22:57.143+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-29T13:22:57.144+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-29T13:22:57.145+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-29T13:22:57.147+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-29T13:22:57.148+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-29T13:22:57.149+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:22:57.150+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:22:57.152+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-29T13:22:57.155+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-29T13:22:57.157+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-29T13:22:57.160+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-29T13:22:57.172+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-29T13:22:57.174+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-29T13:22:57.175+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-29T13:22:57.176+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-29T13:22:57.178+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-29T13:22:57.179+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-29T13:22:57.181+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-29T13:22:57.183+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-29T13:22:57.184+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-29T13:22:57.186+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-29T13:22:57.188+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-29T13:22:57.190+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-29T13:22:57.191+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-29T13:22:57.193+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-29T13:22:57.194+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-29T13:22:57.199+01:00  INFO 75622 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:22:58.059+01:00  WARN 75622 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 10440395-7258-4e3a-a981-1572add5383c

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-29T13:22:58.094+01:00  INFO 75622 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-29T13:22:58.875+01:00  INFO 75622 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-29T13:22:58.969+01:00  INFO 75622 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-29T13:22:58.970+01:00  INFO 75622 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-29T13:22:58.973+01:00  INFO 75622 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 3 ms
2025-01-29T13:22:59.022+01:00  INFO 75622 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.788 seconds (process running for 7.062)
2025-01-29T13:22:59.700+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:22:59.726+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:22:59.732+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:22:59.734+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T13:22:59.756+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:22:59.780+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:22:59.784+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:22:59.923+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:22:59.932+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:22:59.936+01:00 DEBUG 75622 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:22:59.980+01:00  WARN 75622 --- [librairie-online] [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Cannot invoke "com.example.librairie_online.entity.Role.getRole()" because "this.role" is null]
2025-01-29T13:23:00.033+01:00  INFO 75622 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:23:00.034+01:00 DEBUG 75622 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:23:00.037+01:00 DEBUG 75622 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:23:00.039+01:00 DEBUG 75622 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:23:00.040+01:00 DEBUG 75622 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:23:00.042+01:00 DEBUG 75622 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:23:00.043+01:00 DEBUG 75622 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:23:00.044+01:00 DEBUG 75622 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:23:00.045+01:00 DEBUG 75622 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:23:00.047+01:00 DEBUG 75622 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:23:00.048+01:00 DEBUG 75622 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:23:00.049+01:00 DEBUG 75622 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:23:00.050+01:00 DEBUG 75622 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:23:00.050+01:00 DEBUG 75622 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:23:00.051+01:00 DEBUG 75622 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:23:00.055+01:00  INFO 75622 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-29T13:23:00.058+01:00  INFO 75622 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-29T13:28:21.387+01:00  INFO 76854 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 76854 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-29T13:28:21.389+01:00  INFO 76854 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-29T13:28:22.194+01:00  INFO 76854 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-29T13:28:22.277+01:00  INFO 76854 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 75 ms. Found 14 JPA repository interfaces.
2025-01-29T13:28:22.901+01:00  INFO 76854 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-29T13:28:22.965+01:00  INFO 76854 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-29T13:28:22.999+01:00  INFO 76854 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-29T13:28:23.340+01:00  INFO 76854 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-29T13:28:23.368+01:00  INFO 76854 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-29T13:28:23.580+01:00  INFO 76854 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-29T13:28:23.584+01:00  INFO 76854 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-29T13:28:23.624+01:00  WARN 76854 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-29T13:28:24.634+01:00  INFO 76854 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-29T13:28:24.647+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:28:24.650+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:28:24.651+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:28:24.651+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:28:24.651+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:28:24.651+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:28:24.652+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:28:24.652+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:28:24.652+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:28:24.652+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:28:24.652+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:28:24.653+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:28:24.653+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:28:24.653+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:28:24.657+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-29T13:28:24.666+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-29T13:28:24.667+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-29T13:28:24.669+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-29T13:28:24.670+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-29T13:28:24.671+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-29T13:28:24.672+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-29T13:28:24.674+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-29T13:28:24.675+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-29T13:28:24.676+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:28:24.677+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:28:24.679+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-29T13:28:24.680+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-29T13:28:24.682+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-29T13:28:24.684+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-29T13:28:24.695+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-29T13:28:24.697+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-29T13:28:24.698+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-29T13:28:24.700+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-29T13:28:24.701+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-29T13:28:24.703+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-29T13:28:24.704+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-29T13:28:24.705+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-29T13:28:24.707+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-29T13:28:24.708+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-29T13:28:24.710+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-29T13:28:24.711+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-29T13:28:24.712+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-29T13:28:24.713+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-29T13:28:24.714+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-29T13:28:24.719+01:00  INFO 76854 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:28:25.406+01:00  WARN 76854 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: a00e6bf7-e446-48f5-92c5-05fc9563c953

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-29T13:28:25.439+01:00  INFO 76854 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-29T13:28:26.201+01:00  INFO 76854 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-29T13:28:26.269+01:00  INFO 76854 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-29T13:28:26.269+01:00  INFO 76854 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-29T13:28:26.271+01:00  INFO 76854 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-01-29T13:28:26.304+01:00  INFO 76854 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.367 seconds (process running for 6.62)
2025-01-29T13:28:27.006+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:28:27.035+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:28:27.042+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:28:27.044+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T13:28:27.067+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:28:27.091+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:28:27.097+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:28:27.100+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:28:27.288+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:28:27.300+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:28:27.308+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:28:27.318+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : update Achete set nAdherent=?,date=?,nSerie=?,prix=? where id=?
2025-01-29T13:28:27.424+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:28:27.426+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:28:27.427+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:28:27.436+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-29T13:28:27.440+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:28:27.441+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-29T13:28:27.443+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-29T13:28:27.445+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:28:27.447+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-29T13:28:27.451+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T13:28:27.452+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Role where id=?
2025-01-29T13:28:27.454+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:28:27.455+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:28:27.458+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:28:27.460+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:28:27.466+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:28:27.470+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:28:27.472+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-29T13:28:27.481+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:28:27.493+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:28:27.496+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:28:27.497+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-29T13:28:27.501+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-29T13:28:27.504+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:28:27.506+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-29T13:28:27.509+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T13:28:27.511+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Role where id=?
2025-01-29T13:28:27.513+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:28:27.515+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:28:27.519+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:28:27.522+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:28:27.527+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:28:27.528+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:28:27.530+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:28:27.547+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:28:27.548+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:28:27.550+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:28:27.553+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-29T13:28:27.556+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:28:27.558+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-29T13:28:27.560+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-29T13:28:27.563+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:28:27.566+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-29T13:28:27.569+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T13:28:27.570+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Role where id=?
2025-01-29T13:28:27.572+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:28:27.574+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:28:27.576+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:28:27.581+01:00 DEBUG 76854 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:28:27.607+01:00  INFO 76854 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:28:27.608+01:00 DEBUG 76854 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:28:27.611+01:00 DEBUG 76854 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:28:27.613+01:00 DEBUG 76854 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:28:27.614+01:00 DEBUG 76854 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:28:27.616+01:00 DEBUG 76854 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:28:27.617+01:00 DEBUG 76854 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:28:27.618+01:00 DEBUG 76854 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:28:27.619+01:00 DEBUG 76854 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:28:27.620+01:00 DEBUG 76854 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:28:27.621+01:00 DEBUG 76854 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:28:27.622+01:00 DEBUG 76854 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:28:27.623+01:00 DEBUG 76854 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:28:27.624+01:00 DEBUG 76854 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:28:27.625+01:00 DEBUG 76854 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:28:27.630+01:00  INFO 76854 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-29T13:28:27.634+01:00  INFO 76854 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-29T13:29:17.077+01:00  INFO 77053 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 77053 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-29T13:29:17.078+01:00  INFO 77053 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-29T13:29:17.849+01:00  INFO 77053 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-29T13:29:17.956+01:00  INFO 77053 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 95 ms. Found 14 JPA repository interfaces.
2025-01-29T13:29:18.663+01:00  INFO 77053 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-29T13:29:18.727+01:00  INFO 77053 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-29T13:29:18.766+01:00  INFO 77053 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-29T13:29:19.074+01:00  INFO 77053 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-29T13:29:19.101+01:00  INFO 77053 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-29T13:29:19.329+01:00  INFO 77053 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-29T13:29:19.330+01:00  INFO 77053 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-29T13:29:19.362+01:00  WARN 77053 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-29T13:29:20.425+01:00  INFO 77053 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-29T13:29:20.437+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:29:20.441+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:29:20.441+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:29:20.442+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:29:20.442+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:29:20.442+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:29:20.442+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:29:20.443+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:29:20.443+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:29:20.443+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:29:20.443+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:29:20.444+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:29:20.444+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:29:20.444+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:29:20.448+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-29T13:29:20.456+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-29T13:29:20.457+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-29T13:29:20.458+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-29T13:29:20.459+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-29T13:29:20.460+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-29T13:29:20.461+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-29T13:29:20.462+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-29T13:29:20.463+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-29T13:29:20.464+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:29:20.465+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:29:20.467+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-29T13:29:20.469+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-29T13:29:20.470+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-29T13:29:20.472+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-29T13:29:20.482+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-29T13:29:20.484+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-29T13:29:20.485+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-29T13:29:20.486+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-29T13:29:20.488+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-29T13:29:20.489+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-29T13:29:20.490+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-29T13:29:20.491+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-29T13:29:20.492+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-29T13:29:20.493+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-29T13:29:20.495+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-29T13:29:20.496+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-29T13:29:20.497+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-29T13:29:20.498+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-29T13:29:20.500+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-29T13:29:20.503+01:00  INFO 77053 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:29:21.202+01:00  WARN 77053 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 975b7294-76a5-4e35-a11d-1faeb2c5170c

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-29T13:29:21.235+01:00  INFO 77053 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-29T13:29:21.930+01:00  INFO 77053 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-29T13:29:22.000+01:00  INFO 77053 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-29T13:29:22.000+01:00  INFO 77053 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-29T13:29:22.004+01:00  INFO 77053 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 4 ms
2025-01-29T13:29:22.042+01:00  INFO 77053 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.419 seconds (process running for 6.77)
2025-01-29T13:29:22.706+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:29:22.727+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:29:22.732+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:29:22.734+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T13:29:22.751+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:29:22.769+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:29:22.773+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:29:22.776+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:29:22.904+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:29:22.913+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:29:22.920+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:29:22.930+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : update Achete set nAdherent=?,date=?,nSerie=?,prix=? where id=?
2025-01-29T13:29:23.057+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:29:23.059+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:29:23.060+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:29:23.069+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-29T13:29:23.073+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:29:23.074+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-29T13:29:23.076+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-29T13:29:23.078+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:29:23.080+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-29T13:29:23.083+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T13:29:23.084+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Role where id=?
2025-01-29T13:29:23.086+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:29:23.088+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:29:23.090+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:29:23.093+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:29:23.097+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:29:23.101+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:29:23.104+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-29T13:29:23.111+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:29:23.124+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:29:23.127+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:29:23.128+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-29T13:29:23.131+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-29T13:29:23.135+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:29:23.137+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-29T13:29:23.140+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T13:29:23.141+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Role where id=?
2025-01-29T13:29:23.143+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:29:23.145+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:29:23.147+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:29:23.150+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:29:23.155+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:29:23.157+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:29:23.159+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:29:23.175+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:29:23.176+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:29:23.178+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:29:23.181+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-29T13:29:23.185+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:29:23.187+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-29T13:29:23.190+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-29T13:29:23.193+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:29:23.195+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-29T13:29:23.200+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T13:29:23.201+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Role where id=?
2025-01-29T13:29:23.203+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:29:23.206+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:29:23.210+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:29:23.214+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:29:23.218+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:29:23.221+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:29:23.224+01:00 DEBUG 77053 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:29:23.235+01:00  WARN 77053 --- [librairie-online] [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Cannot invoke "com.example.librairie_online.entity.Role.getRole()" because "this.role" is null]
2025-01-29T13:29:23.266+01:00  INFO 77053 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:29:23.267+01:00 DEBUG 77053 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:29:23.271+01:00 DEBUG 77053 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:29:23.273+01:00 DEBUG 77053 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:29:23.275+01:00 DEBUG 77053 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:29:23.277+01:00 DEBUG 77053 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:29:23.278+01:00 DEBUG 77053 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:29:23.279+01:00 DEBUG 77053 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:29:23.280+01:00 DEBUG 77053 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:29:23.282+01:00 DEBUG 77053 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:29:23.284+01:00 DEBUG 77053 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:29:23.286+01:00 DEBUG 77053 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:29:23.287+01:00 DEBUG 77053 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:29:23.289+01:00 DEBUG 77053 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:29:23.290+01:00 DEBUG 77053 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:29:23.294+01:00  INFO 77053 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-29T13:29:23.297+01:00  INFO 77053 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-29T13:29:42.480+01:00  INFO 77158 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 77158 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-29T13:29:42.482+01:00  INFO 77158 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-29T13:29:43.389+01:00  INFO 77158 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-29T13:29:43.509+01:00  INFO 77158 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 111 ms. Found 14 JPA repository interfaces.
2025-01-29T13:29:44.374+01:00  INFO 77158 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-29T13:29:44.451+01:00  INFO 77158 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-29T13:29:44.499+01:00  INFO 77158 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-29T13:29:44.866+01:00  INFO 77158 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-29T13:29:44.899+01:00  INFO 77158 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-29T13:29:45.156+01:00  INFO 77158 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-29T13:29:45.158+01:00  INFO 77158 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-29T13:29:45.182+01:00  WARN 77158 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-29T13:29:46.375+01:00  INFO 77158 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-29T13:29:46.391+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:29:46.396+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:29:46.397+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:29:46.397+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:29:46.397+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:29:46.398+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:29:46.398+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:29:46.399+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:29:46.400+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:29:46.400+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:29:46.400+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:29:46.401+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:29:46.401+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:29:46.401+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:29:46.406+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-29T13:29:46.417+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-29T13:29:46.419+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-29T13:29:46.423+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-29T13:29:46.425+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-29T13:29:46.426+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-29T13:29:46.427+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-29T13:29:46.429+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-29T13:29:46.431+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-29T13:29:46.433+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:29:46.434+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:29:46.437+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-29T13:29:46.438+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-29T13:29:46.440+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-29T13:29:46.443+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-29T13:29:46.458+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-29T13:29:46.459+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-29T13:29:46.461+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-29T13:29:46.463+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-29T13:29:46.466+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-29T13:29:46.468+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-29T13:29:46.469+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-29T13:29:46.471+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-29T13:29:46.472+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-29T13:29:46.474+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-29T13:29:46.476+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-29T13:29:46.478+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-29T13:29:46.480+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-29T13:29:46.482+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-29T13:29:46.484+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-29T13:29:46.491+01:00  INFO 77158 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:29:47.310+01:00  WARN 77158 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 256b1bfb-d2a0-43fa-ade2-5be45d746af7

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-29T13:29:47.348+01:00  INFO 77158 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-29T13:29:48.140+01:00  INFO 77158 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-29T13:29:48.214+01:00  INFO 77158 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-29T13:29:48.214+01:00  INFO 77158 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-29T13:29:48.216+01:00  INFO 77158 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-01-29T13:29:48.256+01:00  INFO 77158 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 6.271 seconds (process running for 7.854)
2025-01-29T13:29:49.051+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:29:49.079+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:29:49.086+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:29:49.088+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T13:29:49.114+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:29:53.252+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:29:55.253+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:29:59.660+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:29:59.663+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:29:59.671+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:30:13.378+01:00 DEBUG 77158 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:30:23.721+01:00  WARN 77158 --- [librairie-online] [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Cannot invoke "com.example.librairie_online.entity.Role.getRole()" because "this.role" is null]
2025-01-29T13:30:29.508+01:00  INFO 77158 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:30:29.509+01:00 DEBUG 77158 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:30:29.512+01:00 DEBUG 77158 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:30:29.514+01:00 DEBUG 77158 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:30:29.517+01:00 DEBUG 77158 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:30:29.519+01:00 DEBUG 77158 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:30:29.520+01:00 DEBUG 77158 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:30:29.521+01:00 DEBUG 77158 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:30:29.522+01:00 DEBUG 77158 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:30:29.523+01:00 DEBUG 77158 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:30:29.524+01:00 DEBUG 77158 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:30:29.525+01:00 DEBUG 77158 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:30:29.526+01:00 DEBUG 77158 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:30:29.527+01:00 DEBUG 77158 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:30:29.527+01:00 DEBUG 77158 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:30:29.530+01:00  INFO 77158 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-29T13:30:29.534+01:00  INFO 77158 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-29T13:31:34.070+01:00  INFO 77582 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 77582 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-29T13:31:34.072+01:00  INFO 77582 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-29T13:31:34.989+01:00  INFO 77582 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-29T13:31:35.122+01:00  INFO 77582 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 122 ms. Found 14 JPA repository interfaces.
2025-01-29T13:31:35.951+01:00  INFO 77582 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-29T13:31:36.026+01:00  INFO 77582 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-29T13:31:36.071+01:00  INFO 77582 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-29T13:31:36.437+01:00  INFO 77582 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-29T13:31:36.473+01:00  INFO 77582 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-29T13:31:36.730+01:00  INFO 77582 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-29T13:31:36.732+01:00  INFO 77582 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-29T13:31:36.765+01:00  WARN 77582 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-29T13:31:38.022+01:00  INFO 77582 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-29T13:31:38.043+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:31:38.048+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:31:38.048+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:31:38.048+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:31:38.049+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:31:38.049+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:31:38.049+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:31:38.050+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:31:38.050+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:31:38.050+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:31:38.050+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:31:38.051+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:31:38.051+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:31:38.051+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:31:38.058+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-29T13:31:38.068+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-29T13:31:38.070+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-29T13:31:38.073+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-29T13:31:38.075+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-29T13:31:38.076+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-29T13:31:38.077+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-29T13:31:38.078+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-29T13:31:38.080+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-29T13:31:38.082+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:31:38.083+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:31:38.086+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-29T13:31:38.090+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-29T13:31:38.092+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-29T13:31:38.096+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-29T13:31:38.111+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-29T13:31:38.113+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-29T13:31:38.115+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-29T13:31:38.117+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-29T13:31:38.118+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-29T13:31:38.120+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-29T13:31:38.122+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-29T13:31:38.123+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-29T13:31:38.124+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-29T13:31:38.126+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-29T13:31:38.128+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-29T13:31:38.130+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-29T13:31:38.132+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-29T13:31:38.133+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-29T13:31:38.135+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-29T13:31:38.141+01:00  INFO 77582 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:31:39.031+01:00  WARN 77582 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: b906a0d5-5216-4d9c-82dc-9db2ad165c2d

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-29T13:31:39.072+01:00  INFO 77582 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-29T13:31:39.884+01:00  INFO 77582 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-29T13:31:39.986+01:00  INFO 77582 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-29T13:31:39.986+01:00  INFO 77582 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-29T13:31:39.988+01:00  INFO 77582 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-01-29T13:31:40.032+01:00  INFO 77582 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 6.481 seconds (process running for 8.031)
2025-01-29T13:31:40.779+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:31:40.811+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:31:40.818+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:31:40.820+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T13:31:40.847+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:31:50.700+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:31:55.809+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:32:51.424+01:00  WARN 77582 --- [librairie-online] [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m14s590ms).
2025-01-29T13:32:51.440+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:32:51.443+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:32:51.451+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:40:33.763+01:00  WARN 77582 --- [librairie-online] [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=7m42s339ms).
2025-01-29T13:40:33.769+01:00 DEBUG 77582 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:40:33.832+01:00  WARN 77582 --- [librairie-online] [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Cannot invoke "com.example.librairie_online.entity.Role.getRole()" because "this.role" is null]
2025-01-29T13:40:33.888+01:00  INFO 77582 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:40:33.889+01:00 DEBUG 77582 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:40:33.893+01:00 DEBUG 77582 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:40:33.895+01:00 DEBUG 77582 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:40:33.896+01:00 DEBUG 77582 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:40:33.899+01:00 DEBUG 77582 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:40:33.900+01:00 DEBUG 77582 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:40:33.901+01:00 DEBUG 77582 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:40:33.903+01:00 DEBUG 77582 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:40:33.904+01:00 DEBUG 77582 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:40:33.905+01:00 DEBUG 77582 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:40:33.906+01:00 DEBUG 77582 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:40:33.906+01:00 DEBUG 77582 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:40:33.907+01:00 DEBUG 77582 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:40:33.909+01:00 DEBUG 77582 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:40:33.913+01:00  INFO 77582 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-29T13:40:33.916+01:00  INFO 77582 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-29T13:40:36.945+01:00  INFO 79623 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 79623 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-29T13:40:36.946+01:00  INFO 79623 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-29T13:40:37.819+01:00  INFO 79623 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-29T13:40:37.918+01:00  INFO 79623 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 91 ms. Found 14 JPA repository interfaces.
2025-01-29T13:40:38.703+01:00  INFO 79623 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-29T13:40:38.793+01:00  INFO 79623 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-29T13:40:38.834+01:00  INFO 79623 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-29T13:40:39.121+01:00  INFO 79623 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-29T13:40:39.147+01:00  INFO 79623 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-29T13:40:39.367+01:00  INFO 79623 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-29T13:40:39.369+01:00  INFO 79623 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-29T13:40:39.400+01:00  WARN 79623 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-29T13:40:40.431+01:00  INFO 79623 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-29T13:40:40.443+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:40:40.446+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:40:40.447+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:40:40.447+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:40:40.447+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:40:40.447+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:40:40.448+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:40:40.448+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:40:40.448+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:40:40.448+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:40:40.448+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:40:40.449+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:40:40.449+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:40:40.449+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:40:40.453+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-29T13:40:40.460+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-29T13:40:40.461+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-29T13:40:40.463+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-29T13:40:40.464+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-29T13:40:40.465+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-29T13:40:40.466+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-29T13:40:40.467+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-29T13:40:40.469+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-29T13:40:40.470+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:40:40.470+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:40:40.472+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-29T13:40:40.473+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-29T13:40:40.475+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-29T13:40:40.477+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-29T13:40:40.487+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-29T13:40:40.489+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-29T13:40:40.490+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-29T13:40:40.491+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-29T13:40:40.492+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-29T13:40:40.493+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-29T13:40:40.494+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-29T13:40:40.496+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-29T13:40:40.497+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-29T13:40:40.498+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-29T13:40:40.499+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-29T13:40:40.500+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-29T13:40:40.502+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-29T13:40:40.503+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-29T13:40:40.504+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-29T13:40:40.507+01:00  INFO 79623 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:40:41.124+01:00  WARN 79623 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 10d8a3c8-7ffb-4d0c-9a5b-92dd9fe0cfb0

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-29T13:40:41.157+01:00  INFO 79623 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-29T13:40:41.819+01:00  INFO 79623 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-29T13:40:41.882+01:00  INFO 79623 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-29T13:40:41.883+01:00  INFO 79623 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-29T13:40:41.885+01:00  INFO 79623 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-01-29T13:40:41.916+01:00  INFO 79623 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.452 seconds (process running for 6.882)
2025-01-29T13:40:42.549+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:40:42.571+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:40:42.576+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:40:42.578+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T13:40:42.600+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:40:42.621+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:40:42.625+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:40:42.734+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:40:42.737+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:40:42.742+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:40:42.746+01:00 DEBUG 79623 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:40:42.778+01:00  WARN 79623 --- [librairie-online] [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Cannot invoke "com.example.librairie_online.entity.Role.getRole()" because "this.role" is null]
2025-01-29T13:40:42.816+01:00  INFO 79623 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:40:42.817+01:00 DEBUG 79623 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:40:42.820+01:00 DEBUG 79623 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:40:42.822+01:00 DEBUG 79623 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:40:42.823+01:00 DEBUG 79623 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:40:42.824+01:00 DEBUG 79623 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:40:42.825+01:00 DEBUG 79623 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:40:42.825+01:00 DEBUG 79623 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:40:42.826+01:00 DEBUG 79623 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:40:42.827+01:00 DEBUG 79623 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:40:42.827+01:00 DEBUG 79623 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:40:42.828+01:00 DEBUG 79623 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:40:42.828+01:00 DEBUG 79623 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:40:42.829+01:00 DEBUG 79623 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:40:42.829+01:00 DEBUG 79623 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:40:42.831+01:00  INFO 79623 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-29T13:40:42.834+01:00  INFO 79623 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-29T13:42:48.658+01:00  INFO 80106 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 80106 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-29T13:42:48.662+01:00  INFO 80106 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-29T13:42:49.536+01:00  INFO 80106 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-29T13:42:49.667+01:00  INFO 80106 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 121 ms. Found 14 JPA repository interfaces.
2025-01-29T13:42:50.430+01:00  INFO 80106 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-29T13:42:50.510+01:00  INFO 80106 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-29T13:42:50.556+01:00  INFO 80106 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-29T13:42:50.934+01:00  INFO 80106 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-29T13:42:50.965+01:00  INFO 80106 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-29T13:42:51.201+01:00  INFO 80106 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-29T13:42:51.203+01:00  INFO 80106 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-29T13:42:51.237+01:00  WARN 80106 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-29T13:42:52.513+01:00  INFO 80106 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-29T13:42:52.533+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:42:52.539+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:42:52.539+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:42:52.540+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:42:52.540+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:42:52.540+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:42:52.540+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:42:52.541+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:42:52.541+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:42:52.541+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:42:52.542+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:42:52.542+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:42:52.542+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:42:52.543+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:42:52.548+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-29T13:42:52.559+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-29T13:42:52.561+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-29T13:42:52.564+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-29T13:42:52.565+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-29T13:42:52.566+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-29T13:42:52.568+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-29T13:42:52.570+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-29T13:42:52.572+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-29T13:42:52.573+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:42:52.574+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:42:52.576+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-29T13:42:52.578+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-29T13:42:52.580+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-29T13:42:52.584+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-29T13:42:52.597+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-29T13:42:52.599+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-29T13:42:52.601+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-29T13:42:52.602+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-29T13:42:52.603+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-29T13:42:52.605+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-29T13:42:52.606+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-29T13:42:52.607+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-29T13:42:52.609+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-29T13:42:52.610+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-29T13:42:52.612+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-29T13:42:52.613+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-29T13:42:52.614+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-29T13:42:52.616+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-29T13:42:52.617+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-29T13:42:52.621+01:00  INFO 80106 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:42:53.357+01:00  WARN 80106 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 5f4e7417-b11d-4c76-8479-ecd5db7711af

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-29T13:42:53.394+01:00  INFO 80106 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-29T13:42:54.163+01:00  INFO 80106 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-29T13:42:54.256+01:00  INFO 80106 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-29T13:42:54.256+01:00  INFO 80106 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-29T13:42:54.257+01:00  INFO 80106 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-01-29T13:42:54.297+01:00  INFO 80106 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 6.194 seconds (process running for 7.74)
2025-01-29T13:42:55.024+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:42:55.054+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:42:55.061+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:42:55.064+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T13:42:55.093+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:42:58.131+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:43:00.147+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:43:03.289+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:43:03.292+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:43:03.299+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:47:04.072+01:00  WARN 80106 --- [librairie-online] [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=4m12s764ms).
2025-01-29T13:47:04.078+01:00 DEBUG 80106 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:47:04.114+01:00  WARN 80106 --- [librairie-online] [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Cannot invoke "com.example.librairie_online.entity.Role.getRole()" because "this.role" is null]
2025-01-29T13:47:04.159+01:00  INFO 80106 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:47:04.160+01:00 DEBUG 80106 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:47:04.162+01:00 DEBUG 80106 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:47:04.163+01:00 DEBUG 80106 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:47:04.164+01:00 DEBUG 80106 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:47:04.165+01:00 DEBUG 80106 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:47:04.167+01:00 DEBUG 80106 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:47:04.167+01:00 DEBUG 80106 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:47:04.169+01:00 DEBUG 80106 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:47:04.169+01:00 DEBUG 80106 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:47:04.170+01:00 DEBUG 80106 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:47:04.170+01:00 DEBUG 80106 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:47:04.171+01:00 DEBUG 80106 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:47:04.171+01:00 DEBUG 80106 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:47:04.172+01:00 DEBUG 80106 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:47:04.175+01:00  INFO 80106 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-29T13:47:04.177+01:00  INFO 80106 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-29T13:47:36.314+01:00  INFO 81182 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 81182 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-29T13:47:36.316+01:00  INFO 81182 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-29T13:47:37.211+01:00  INFO 81182 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-29T13:47:37.324+01:00  INFO 81182 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 104 ms. Found 14 JPA repository interfaces.
2025-01-29T13:47:38.103+01:00  INFO 81182 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-29T13:47:38.183+01:00  INFO 81182 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-29T13:47:38.234+01:00  INFO 81182 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-29T13:47:38.676+01:00  INFO 81182 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-29T13:47:38.720+01:00  INFO 81182 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-29T13:47:38.989+01:00  INFO 81182 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-29T13:47:38.991+01:00  INFO 81182 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-29T13:47:39.020+01:00  WARN 81182 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-29T13:47:40.312+01:00  INFO 81182 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-29T13:47:40.330+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:47:40.335+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:47:40.335+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:47:40.335+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:47:40.336+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:47:40.336+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:47:40.336+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:47:40.336+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:47:40.337+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:47:40.337+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:47:40.337+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:47:40.338+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:47:40.338+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:47:40.338+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:47:40.344+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-29T13:47:40.355+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-29T13:47:40.357+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-29T13:47:40.359+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-29T13:47:40.361+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-29T13:47:40.362+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-29T13:47:40.364+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-29T13:47:40.365+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-29T13:47:40.366+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-29T13:47:40.367+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:47:40.368+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:47:40.372+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-29T13:47:40.373+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-29T13:47:40.375+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-29T13:47:40.377+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-29T13:47:40.390+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-29T13:47:40.392+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-29T13:47:40.393+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-29T13:47:40.395+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-29T13:47:40.397+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-29T13:47:40.398+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-29T13:47:40.400+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-29T13:47:40.401+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-29T13:47:40.402+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-29T13:47:40.404+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-29T13:47:40.406+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-29T13:47:40.407+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-29T13:47:40.408+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-29T13:47:40.410+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-29T13:47:40.411+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-29T13:47:40.415+01:00  INFO 81182 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:47:41.152+01:00  WARN 81182 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 539e3e6c-b199-4972-a05b-fd40e7b31960

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-29T13:47:41.190+01:00  INFO 81182 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-29T13:47:41.974+01:00  INFO 81182 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-29T13:47:42.050+01:00  INFO 81182 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-29T13:47:42.050+01:00  INFO 81182 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-29T13:47:42.051+01:00  INFO 81182 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-01-29T13:47:42.090+01:00  INFO 81182 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 6.34 seconds (process running for 7.882)
2025-01-29T13:47:42.856+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:47:42.887+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:47:42.895+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:47:42.897+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T13:47:42.927+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:47:45.343+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:47:45.347+01:00 DEBUG 81182 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:47:45.428+01:00  INFO 81182 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:47:45.429+01:00 DEBUG 81182 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:47:45.432+01:00 DEBUG 81182 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:47:45.434+01:00 DEBUG 81182 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:47:45.435+01:00 DEBUG 81182 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:47:45.437+01:00 DEBUG 81182 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:47:45.439+01:00 DEBUG 81182 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:47:45.440+01:00 DEBUG 81182 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:47:45.442+01:00 DEBUG 81182 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:47:45.444+01:00 DEBUG 81182 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:47:45.444+01:00 DEBUG 81182 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:47:45.445+01:00 DEBUG 81182 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:47:45.446+01:00 DEBUG 81182 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:47:45.447+01:00 DEBUG 81182 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:47:45.448+01:00 DEBUG 81182 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:47:45.451+01:00  INFO 81182 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-29T13:47:45.454+01:00  INFO 81182 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-29T13:48:33.960+01:00  INFO 81414 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 81414 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-29T13:48:33.962+01:00  INFO 81414 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-29T13:48:34.874+01:00  INFO 81414 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-29T13:48:34.990+01:00  INFO 81414 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 106 ms. Found 14 JPA repository interfaces.
2025-01-29T13:48:35.775+01:00  INFO 81414 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-29T13:48:35.848+01:00  INFO 81414 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-29T13:48:35.894+01:00  INFO 81414 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-29T13:48:36.327+01:00  INFO 81414 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-29T13:48:36.355+01:00  INFO 81414 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-29T13:48:36.598+01:00  INFO 81414 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-29T13:48:36.601+01:00  INFO 81414 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-29T13:48:36.635+01:00  WARN 81414 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-29T13:48:37.917+01:00  INFO 81414 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-29T13:48:37.938+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:48:37.943+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:48:37.944+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:48:37.944+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:48:37.944+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:48:37.945+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:48:37.945+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:48:37.945+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:48:37.945+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:48:37.946+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:48:37.946+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:48:37.946+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:48:37.947+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:48:37.947+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:48:37.953+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-29T13:48:37.964+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-29T13:48:37.966+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-29T13:48:37.969+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-29T13:48:37.971+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-29T13:48:37.973+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-29T13:48:37.974+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-29T13:48:37.976+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-29T13:48:37.977+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-29T13:48:37.978+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:48:37.979+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:48:37.982+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-29T13:48:37.984+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-29T13:48:37.986+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-29T13:48:37.989+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-29T13:48:38.005+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-29T13:48:38.007+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-29T13:48:38.009+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-29T13:48:38.010+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-29T13:48:38.012+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-29T13:48:38.013+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-29T13:48:38.015+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-29T13:48:38.016+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-29T13:48:38.018+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-29T13:48:38.020+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-29T13:48:38.022+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-29T13:48:38.024+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-29T13:48:38.025+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-29T13:48:38.026+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-29T13:48:38.028+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-29T13:48:38.032+01:00  INFO 81414 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:48:38.846+01:00  WARN 81414 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 71da0f37-e3eb-480c-b16e-3dee1cdbc50e

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-29T13:48:38.885+01:00  INFO 81414 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-29T13:48:39.693+01:00  INFO 81414 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-29T13:48:39.766+01:00  INFO 81414 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-29T13:48:39.766+01:00  INFO 81414 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-29T13:48:39.769+01:00  INFO 81414 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 3 ms
2025-01-29T13:48:39.810+01:00  INFO 81414 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 6.379 seconds (process running for 7.884)
2025-01-29T13:48:40.555+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:48:40.586+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:48:40.594+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:48:40.598+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T13:48:40.630+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:48:43.041+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:48:45.735+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:48:52.240+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:48:52.244+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:48:52.251+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:51:18.636+01:00  WARN 81414 --- [librairie-online] [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2m41s934ms).
2025-01-29T13:51:18.642+01:00 DEBUG 81414 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:51:18.691+01:00  WARN 81414 --- [librairie-online] [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Cannot invoke "com.example.librairie_online.entity.Role.getRole()" because "this.role" is null]
2025-01-29T13:51:18.742+01:00  INFO 81414 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:51:18.743+01:00 DEBUG 81414 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:51:18.746+01:00 DEBUG 81414 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:51:18.749+01:00 DEBUG 81414 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:51:18.751+01:00 DEBUG 81414 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:51:18.753+01:00 DEBUG 81414 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:51:18.754+01:00 DEBUG 81414 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:51:18.754+01:00 DEBUG 81414 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:51:18.756+01:00 DEBUG 81414 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:51:18.757+01:00 DEBUG 81414 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:51:18.758+01:00 DEBUG 81414 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:51:18.759+01:00 DEBUG 81414 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:51:18.760+01:00 DEBUG 81414 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:51:18.761+01:00 DEBUG 81414 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:51:18.762+01:00 DEBUG 81414 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:51:18.767+01:00  INFO 81414 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-29T13:51:18.769+01:00  INFO 81414 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-29T13:51:57.786+01:00  INFO 82163 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 82163 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-29T13:51:57.789+01:00  INFO 82163 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-29T13:51:58.676+01:00  INFO 82163 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-29T13:51:58.892+01:00  INFO 82163 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 203 ms. Found 14 JPA repository interfaces.
2025-01-29T13:51:59.665+01:00  INFO 82163 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-29T13:51:59.741+01:00  INFO 82163 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-29T13:51:59.787+01:00  INFO 82163 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-29T13:52:00.127+01:00  INFO 82163 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-29T13:52:00.164+01:00  INFO 82163 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-29T13:52:00.442+01:00  INFO 82163 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-29T13:52:00.445+01:00  INFO 82163 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-29T13:52:00.473+01:00  WARN 82163 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-29T13:52:01.630+01:00  INFO 82163 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-29T13:52:01.644+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:52:01.648+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:52:01.648+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:52:01.648+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:52:01.649+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:52:01.649+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:52:01.649+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:52:01.649+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:52:01.650+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:52:01.650+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:52:01.650+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:52:01.650+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:52:01.650+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:52:01.651+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:52:01.655+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-29T13:52:01.663+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-29T13:52:01.664+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-29T13:52:01.667+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-29T13:52:01.668+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-29T13:52:01.669+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-29T13:52:01.670+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-29T13:52:01.671+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-29T13:52:01.672+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-29T13:52:01.673+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:52:01.674+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:52:01.676+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-29T13:52:01.677+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-29T13:52:01.679+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-29T13:52:01.681+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-29T13:52:01.695+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-29T13:52:01.697+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-29T13:52:01.698+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-29T13:52:01.700+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-29T13:52:01.701+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-29T13:52:01.702+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-29T13:52:01.703+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-29T13:52:01.705+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-29T13:52:01.707+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-29T13:52:01.709+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-29T13:52:01.711+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-29T13:52:01.713+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-29T13:52:01.715+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-29T13:52:01.716+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-29T13:52:01.718+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-29T13:52:01.724+01:00  INFO 82163 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:52:02.465+01:00  WARN 82163 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 0d28728c-785d-4a4e-b536-4fbc5715d33e

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-29T13:52:02.502+01:00  INFO 82163 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-29T13:52:03.298+01:00  INFO 82163 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-29T13:52:03.370+01:00  INFO 82163 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-29T13:52:03.370+01:00  INFO 82163 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-29T13:52:03.372+01:00  INFO 82163 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-01-29T13:52:03.408+01:00  INFO 82163 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 6.128 seconds (process running for 7.775)
2025-01-29T13:52:04.131+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:52:04.159+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:52:04.166+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:52:04.169+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T13:52:04.196+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:52:20.692+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:52:24.025+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:53:00.271+01:00  WARN 82163 --- [librairie-online] [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=59s724ms).
2025-01-29T13:53:00.285+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:54:37.609+01:00  WARN 82163 --- [librairie-online] [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m37s338ms).
2025-01-29T13:54:37.614+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:54:37.624+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:54:41.030+01:00 DEBUG 82163 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:54:43.605+01:00  WARN 82163 --- [librairie-online] [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Cannot invoke "com.example.librairie_online.entity.Role.getRole()" because "this.role" is null]
2025-01-29T13:54:45.864+01:00  INFO 82163 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:54:45.865+01:00 DEBUG 82163 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:54:45.867+01:00 DEBUG 82163 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:54:45.869+01:00 DEBUG 82163 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:54:45.871+01:00 DEBUG 82163 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:54:45.872+01:00 DEBUG 82163 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:54:45.874+01:00 DEBUG 82163 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:54:45.875+01:00 DEBUG 82163 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:54:45.876+01:00 DEBUG 82163 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:54:45.877+01:00 DEBUG 82163 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:54:45.879+01:00 DEBUG 82163 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:54:45.880+01:00 DEBUG 82163 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:54:45.880+01:00 DEBUG 82163 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:54:45.881+01:00 DEBUG 82163 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:54:45.881+01:00 DEBUG 82163 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:54:45.884+01:00  INFO 82163 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-29T13:54:45.888+01:00  INFO 82163 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-29T13:59:12.193+01:00  INFO 83787 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 83787 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-29T13:59:12.194+01:00  INFO 83787 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-29T13:59:12.946+01:00  INFO 83787 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-29T13:59:13.041+01:00  INFO 83787 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 85 ms. Found 14 JPA repository interfaces.
2025-01-29T13:59:13.654+01:00  INFO 83787 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-29T13:59:13.729+01:00  INFO 83787 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-29T13:59:13.767+01:00  INFO 83787 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-29T13:59:14.085+01:00  INFO 83787 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-29T13:59:14.113+01:00  INFO 83787 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-29T13:59:14.344+01:00  INFO 83787 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-29T13:59:14.346+01:00  INFO 83787 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-29T13:59:14.376+01:00  WARN 83787 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-29T13:59:15.487+01:00  INFO 83787 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-29T13:59:15.502+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:59:15.506+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:59:15.506+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:59:15.506+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:59:15.507+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:59:15.507+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:59:15.507+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:59:15.507+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:59:15.508+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:59:15.508+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:59:15.508+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:59:15.508+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:59:15.509+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:59:15.509+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:59:15.514+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-29T13:59:15.522+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-29T13:59:15.524+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-29T13:59:15.526+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-29T13:59:15.527+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-29T13:59:15.528+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-29T13:59:15.529+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-29T13:59:15.530+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-29T13:59:15.532+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-29T13:59:15.533+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:59:15.533+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T13:59:15.535+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-29T13:59:15.537+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-29T13:59:15.538+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-29T13:59:15.540+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-29T13:59:15.551+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-29T13:59:15.552+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-29T13:59:15.554+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-29T13:59:15.555+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-29T13:59:15.556+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-29T13:59:15.557+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-29T13:59:15.559+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-29T13:59:15.560+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-29T13:59:15.561+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-29T13:59:15.562+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-29T13:59:15.563+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-29T13:59:15.565+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-29T13:59:15.566+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-29T13:59:15.567+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-29T13:59:15.568+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-29T13:59:15.571+01:00  INFO 83787 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:59:16.307+01:00  WARN 83787 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: b09f088c-8d5a-4868-bb6e-5a7ae2eceb0c

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-29T13:59:16.340+01:00  INFO 83787 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-29T13:59:17.063+01:00  INFO 83787 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-29T13:59:17.124+01:00  INFO 83787 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-29T13:59:17.124+01:00  INFO 83787 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-29T13:59:17.126+01:00  INFO 83787 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-01-29T13:59:17.158+01:00  INFO 83787 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.418 seconds (process running for 6.689)
2025-01-29T13:59:17.854+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T13:59:17.879+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T13:59:17.884+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T13:59:17.886+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T13:59:17.905+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T13:59:17.926+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T13:59:17.930+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T13:59:18.053+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T13:59:18.056+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T13:59:18.064+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T13:59:18.067+01:00 DEBUG 83787 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T13:59:18.112+01:00  WARN 83787 --- [librairie-online] [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Cannot invoke "com.example.librairie_online.entity.Role.getRole()" because "this.role" is null]
2025-01-29T13:59:18.159+01:00  INFO 83787 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T13:59:18.161+01:00 DEBUG 83787 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T13:59:18.164+01:00 DEBUG 83787 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T13:59:18.167+01:00 DEBUG 83787 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T13:59:18.168+01:00 DEBUG 83787 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T13:59:18.169+01:00 DEBUG 83787 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T13:59:18.170+01:00 DEBUG 83787 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T13:59:18.171+01:00 DEBUG 83787 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T13:59:18.171+01:00 DEBUG 83787 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T13:59:18.172+01:00 DEBUG 83787 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T13:59:18.173+01:00 DEBUG 83787 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T13:59:18.175+01:00 DEBUG 83787 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T13:59:18.175+01:00 DEBUG 83787 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T13:59:18.176+01:00 DEBUG 83787 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T13:59:18.177+01:00 DEBUG 83787 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T13:59:18.180+01:00  INFO 83787 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-29T13:59:18.182+01:00  INFO 83787 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-29T14:01:23.445+01:00  INFO 84281 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 84281 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-29T14:01:23.446+01:00  INFO 84281 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-29T14:01:24.141+01:00  INFO 84281 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-29T14:01:24.223+01:00  INFO 84281 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 75 ms. Found 14 JPA repository interfaces.
2025-01-29T14:01:24.809+01:00  INFO 84281 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-29T14:01:24.885+01:00  INFO 84281 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-29T14:01:24.927+01:00  INFO 84281 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-29T14:01:25.283+01:00  INFO 84281 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-29T14:01:25.316+01:00  INFO 84281 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-29T14:01:25.531+01:00  INFO 84281 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-29T14:01:25.533+01:00  INFO 84281 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-29T14:01:25.572+01:00  WARN 84281 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-29T14:01:26.609+01:00  INFO 84281 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-29T14:01:26.622+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T14:01:26.627+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T14:01:26.627+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T14:01:26.627+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T14:01:26.628+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T14:01:26.628+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T14:01:26.628+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T14:01:26.628+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T14:01:26.628+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T14:01:26.629+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T14:01:26.629+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T14:01:26.629+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T14:01:26.629+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T14:01:26.629+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T14:01:26.633+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-29T14:01:26.640+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-29T14:01:26.641+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-29T14:01:26.643+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-29T14:01:26.645+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-29T14:01:26.646+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-29T14:01:26.647+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-29T14:01:26.649+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-29T14:01:26.650+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-29T14:01:26.651+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T14:01:26.652+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T14:01:26.653+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-29T14:01:26.655+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-29T14:01:26.656+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-29T14:01:26.659+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-29T14:01:26.669+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-29T14:01:26.670+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-29T14:01:26.672+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-29T14:01:26.673+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-29T14:01:26.674+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-29T14:01:26.675+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-29T14:01:26.676+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-29T14:01:26.677+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-29T14:01:26.679+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-29T14:01:26.680+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-29T14:01:26.682+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-29T14:01:26.683+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-29T14:01:26.684+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-29T14:01:26.686+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-29T14:01:26.687+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-29T14:01:26.690+01:00  INFO 84281 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T14:01:27.289+01:00  WARN 84281 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: b3555e99-10da-4aaa-86ee-07526672c928

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-29T14:01:27.318+01:00  INFO 84281 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-29T14:01:27.897+01:00  INFO 84281 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-29T14:01:27.959+01:00  INFO 84281 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-29T14:01:27.959+01:00  INFO 84281 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-29T14:01:27.961+01:00  INFO 84281 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-01-29T14:01:27.992+01:00  INFO 84281 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 4.956 seconds (process running for 6.072)
2025-01-29T14:01:28.652+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T14:01:28.686+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T14:01:28.692+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T14:01:28.695+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T14:01:28.721+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T14:01:28.744+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T14:01:28.748+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T14:01:28.908+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T14:01:28.921+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T14:01:28.926+01:00 DEBUG 84281 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T14:01:28.964+01:00  WARN 84281 --- [librairie-online] [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Cannot invoke "com.example.librairie_online.entity.Role.getRole()" because "this.role" is null]
2025-01-29T14:01:29.007+01:00  INFO 84281 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T14:01:29.009+01:00 DEBUG 84281 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T14:01:29.012+01:00 DEBUG 84281 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T14:01:29.014+01:00 DEBUG 84281 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T14:01:29.015+01:00 DEBUG 84281 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T14:01:29.017+01:00 DEBUG 84281 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T14:01:29.018+01:00 DEBUG 84281 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T14:01:29.019+01:00 DEBUG 84281 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T14:01:29.020+01:00 DEBUG 84281 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T14:01:29.020+01:00 DEBUG 84281 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T14:01:29.021+01:00 DEBUG 84281 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T14:01:29.021+01:00 DEBUG 84281 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T14:01:29.022+01:00 DEBUG 84281 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T14:01:29.023+01:00 DEBUG 84281 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T14:01:29.024+01:00 DEBUG 84281 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T14:01:29.027+01:00  INFO 84281 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-29T14:01:29.030+01:00  INFO 84281 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-29T14:02:02.046+01:00  INFO 84411 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 84411 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-29T14:02:02.049+01:00  INFO 84411 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-29T14:02:02.939+01:00  INFO 84411 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-29T14:02:03.064+01:00  INFO 84411 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 116 ms. Found 14 JPA repository interfaces.
2025-01-29T14:02:03.824+01:00  INFO 84411 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-29T14:02:03.901+01:00  INFO 84411 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-29T14:02:03.945+01:00  INFO 84411 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-29T14:02:04.337+01:00  INFO 84411 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-29T14:02:04.370+01:00  INFO 84411 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-29T14:02:04.634+01:00  INFO 84411 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-29T14:02:04.636+01:00  INFO 84411 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-29T14:02:04.670+01:00  WARN 84411 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-29T14:02:05.868+01:00  INFO 84411 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-29T14:02:05.882+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T14:02:05.886+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T14:02:05.886+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T14:02:05.886+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T14:02:05.886+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T14:02:05.886+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T14:02:05.887+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T14:02:05.887+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T14:02:05.887+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T14:02:05.887+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T14:02:05.887+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T14:02:05.888+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T14:02:05.888+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T14:02:05.888+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T14:02:05.894+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-29T14:02:05.904+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-29T14:02:05.906+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-29T14:02:05.909+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-29T14:02:05.911+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-29T14:02:05.912+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-29T14:02:05.914+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-29T14:02:05.915+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-29T14:02:05.917+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-29T14:02:05.918+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T14:02:05.920+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T14:02:05.922+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-29T14:02:05.924+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-29T14:02:05.927+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-29T14:02:05.930+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-29T14:02:05.946+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-29T14:02:05.948+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-29T14:02:05.950+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-29T14:02:05.951+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-29T14:02:05.953+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-29T14:02:05.955+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-29T14:02:05.957+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-29T14:02:05.958+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-29T14:02:05.961+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-29T14:02:05.963+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-29T14:02:05.965+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-29T14:02:05.966+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-29T14:02:05.968+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-29T14:02:05.970+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-29T14:02:05.972+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-29T14:02:05.978+01:00  INFO 84411 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T14:02:06.786+01:00  WARN 84411 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 057bd7b8-dcf7-4850-853c-5bd470eeeb3a

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-29T14:02:06.826+01:00  INFO 84411 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-29T14:02:07.615+01:00  INFO 84411 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-29T14:02:07.712+01:00  INFO 84411 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-29T14:02:07.712+01:00  INFO 84411 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-29T14:02:07.714+01:00  INFO 84411 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-01-29T14:02:07.752+01:00  INFO 84411 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 6.252 seconds (process running for 7.764)
2025-01-29T14:02:08.506+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T14:02:08.535+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T14:02:08.541+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T14:02:08.544+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T14:02:08.571+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T14:02:19.589+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T14:02:21.656+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T14:02:32.225+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T14:02:32.234+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T14:02:52.985+01:00  WARN 84411 --- [librairie-online] [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=48s246ms).
2025-01-29T14:02:52.990+01:00 DEBUG 84411 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T14:04:13.856+01:00  WARN 84411 --- [librairie-online] [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m20s871ms).
2025-01-29T14:04:13.905+01:00  WARN 84411 --- [librairie-online] [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Cannot invoke "com.example.librairie_online.entity.Role.getRole()" because "this.role" is null]
2025-01-29T14:04:34.573+01:00  INFO 84411 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T14:04:34.575+01:00 DEBUG 84411 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T14:04:34.578+01:00 DEBUG 84411 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T14:04:34.580+01:00 DEBUG 84411 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T14:04:34.582+01:00 DEBUG 84411 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T14:04:34.584+01:00 DEBUG 84411 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T14:04:34.585+01:00 DEBUG 84411 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T14:04:34.586+01:00 DEBUG 84411 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T14:04:34.587+01:00 DEBUG 84411 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T14:04:34.588+01:00 DEBUG 84411 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T14:04:34.589+01:00 DEBUG 84411 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T14:04:34.589+01:00 DEBUG 84411 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T14:04:34.590+01:00 DEBUG 84411 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T14:04:34.592+01:00 DEBUG 84411 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T14:04:34.593+01:00 DEBUG 84411 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T14:04:34.596+01:00  INFO 84411 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-29T14:04:34.600+01:00  INFO 84411 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-29T14:06:45.598+01:00  INFO 85455 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 85455 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-29T14:06:45.600+01:00  INFO 85455 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-29T14:06:46.465+01:00  INFO 85455 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-29T14:06:46.562+01:00  INFO 85455 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 87 ms. Found 14 JPA repository interfaces.
2025-01-29T14:06:47.215+01:00  INFO 85455 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-29T14:06:47.300+01:00  INFO 85455 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-29T14:06:47.343+01:00  INFO 85455 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-29T14:06:47.627+01:00  INFO 85455 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-29T14:06:47.654+01:00  INFO 85455 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-29T14:06:47.865+01:00  INFO 85455 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-29T14:06:47.868+01:00  INFO 85455 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-29T14:06:47.896+01:00  WARN 85455 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-29T14:06:48.946+01:00  INFO 85455 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-29T14:06:48.967+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T14:06:48.972+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T14:06:48.973+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T14:06:48.973+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T14:06:48.973+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T14:06:48.973+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T14:06:48.974+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T14:06:48.974+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T14:06:48.974+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T14:06:48.974+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T14:06:48.975+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T14:06:48.975+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T14:06:48.975+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T14:06:48.975+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T14:06:48.980+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-29T14:06:49.010+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-29T14:06:49.013+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-29T14:06:49.017+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-29T14:06:49.019+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-29T14:06:49.020+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-29T14:06:49.021+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-29T14:06:49.022+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-29T14:06:49.023+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-29T14:06:49.024+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T14:06:49.025+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T14:06:49.027+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-29T14:06:49.029+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-29T14:06:49.030+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-29T14:06:49.032+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-29T14:06:49.043+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-29T14:06:49.045+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-29T14:06:49.046+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-29T14:06:49.047+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-29T14:06:49.048+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-29T14:06:49.049+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-29T14:06:49.051+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-29T14:06:49.052+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-29T14:06:49.053+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-29T14:06:49.054+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-29T14:06:49.056+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-29T14:06:49.058+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-29T14:06:49.059+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-29T14:06:49.060+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-29T14:06:49.061+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-29T14:06:49.065+01:00  INFO 85455 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T14:06:49.738+01:00  WARN 85455 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 730be689-d839-4511-bff8-bb36fe9ed5dd

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-29T14:06:49.772+01:00  INFO 85455 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-29T14:06:50.436+01:00  INFO 85455 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-29T14:06:50.501+01:00  INFO 85455 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-29T14:06:50.501+01:00  INFO 85455 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-29T14:06:50.503+01:00  INFO 85455 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-01-29T14:06:50.535+01:00  INFO 85455 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.374 seconds (process running for 6.761)
2025-01-29T14:06:51.241+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T14:06:51.268+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T14:06:51.273+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T14:06:51.292+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T14:06:51.312+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T14:06:51.316+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T14:06:51.430+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T14:06:51.436+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T14:06:51.439+01:00 DEBUG 85455 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T14:06:51.478+01:00  WARN 85455 --- [librairie-online] [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Cannot invoke "com.example.librairie_online.entity.Role.getRole()" because "this.role" is null]
2025-01-29T14:06:51.532+01:00  INFO 85455 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T14:06:51.533+01:00 DEBUG 85455 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T14:06:51.537+01:00 DEBUG 85455 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T14:06:51.540+01:00 DEBUG 85455 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T14:06:51.542+01:00 DEBUG 85455 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T14:06:51.544+01:00 DEBUG 85455 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T14:06:51.546+01:00 DEBUG 85455 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T14:06:51.547+01:00 DEBUG 85455 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T14:06:51.549+01:00 DEBUG 85455 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T14:06:51.551+01:00 DEBUG 85455 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T14:06:51.552+01:00 DEBUG 85455 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T14:06:51.553+01:00 DEBUG 85455 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T14:06:51.554+01:00 DEBUG 85455 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T14:06:51.554+01:00 DEBUG 85455 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T14:06:51.555+01:00 DEBUG 85455 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T14:06:51.558+01:00  INFO 85455 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-29T14:06:51.561+01:00  INFO 85455 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-29T14:11:56.987+01:00  INFO 87178 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 21.0.5 with PID 87178 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-29T14:11:56.990+01:00  INFO 87178 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-29T14:11:57.919+01:00  INFO 87178 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-29T14:11:58.071+01:00  INFO 87178 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 140 ms. Found 14 JPA repository interfaces.
2025-01-29T14:11:58.842+01:00  INFO 87178 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-29T14:11:58.915+01:00  INFO 87178 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-29T14:11:58.954+01:00  INFO 87178 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-29T14:11:59.430+01:00  INFO 87178 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-29T14:11:59.464+01:00  INFO 87178 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-29T14:11:59.719+01:00  INFO 87178 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-29T14:11:59.722+01:00  INFO 87178 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-29T14:11:59.751+01:00  WARN 87178 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-29T14:12:01.510+01:00  INFO 87178 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-29T14:12:01.528+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T14:12:01.533+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T14:12:01.534+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T14:12:01.536+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T14:12:01.536+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T14:12:01.537+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T14:12:01.537+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T14:12:01.538+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T14:12:01.539+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T14:12:01.540+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T14:12:01.541+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T14:12:01.542+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T14:12:01.543+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T14:12:01.543+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T14:12:01.561+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-29T14:12:01.578+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-29T14:12:01.580+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-29T14:12:01.583+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-29T14:12:01.597+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-29T14:12:01.599+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-29T14:12:01.602+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-29T14:12:01.608+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-29T14:12:01.617+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-29T14:12:01.619+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T14:12:01.621+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T14:12:01.628+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-29T14:12:01.633+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-29T14:12:01.638+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-29T14:12:01.664+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-29T14:12:01.693+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-29T14:12:01.696+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-29T14:12:01.700+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-29T14:12:01.706+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-29T14:12:01.710+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-29T14:12:01.713+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-29T14:12:01.719+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-29T14:12:01.723+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-29T14:12:01.728+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-29T14:12:01.730+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-29T14:12:01.736+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-29T14:12:01.741+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-29T14:12:01.745+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-29T14:12:01.748+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-29T14:12:01.753+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-29T14:12:01.763+01:00  INFO 87178 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T14:12:02.518+01:00  WARN 87178 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: c6d04f25-ae82-48f4-9a38-dbca9d329f79

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-29T14:12:02.549+01:00  INFO 87178 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-29T14:12:03.154+01:00  INFO 87178 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-29T14:12:03.237+01:00  INFO 87178 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-29T14:12:03.237+01:00  INFO 87178 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-29T14:12:03.241+01:00  INFO 87178 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 4 ms
2025-01-29T14:12:03.306+01:00  INFO 87178 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 6.792 seconds (process running for 8.549)
2025-01-29T14:12:04.025+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T14:12:04.046+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T14:12:04.050+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T14:12:04.053+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T14:12:04.070+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T14:12:04.088+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T14:12:04.091+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T14:12:04.215+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T14:12:04.223+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T14:12:04.227+01:00 DEBUG 87178 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T14:12:04.260+01:00  WARN 87178 --- [librairie-online] [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Cannot invoke "com.example.librairie_online.entity.Role.getRole()" because "this.role" is null]
2025-01-29T14:12:04.325+01:00  INFO 87178 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T14:12:04.327+01:00 DEBUG 87178 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T14:12:04.331+01:00 DEBUG 87178 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T14:12:04.333+01:00 DEBUG 87178 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T14:12:04.335+01:00 DEBUG 87178 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T14:12:04.338+01:00 DEBUG 87178 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T14:12:04.341+01:00 DEBUG 87178 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T14:12:04.343+01:00 DEBUG 87178 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T14:12:04.345+01:00 DEBUG 87178 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T14:12:04.348+01:00 DEBUG 87178 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T14:12:04.350+01:00 DEBUG 87178 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T14:12:04.351+01:00 DEBUG 87178 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T14:12:04.352+01:00 DEBUG 87178 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T14:12:04.354+01:00 DEBUG 87178 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T14:12:04.355+01:00 DEBUG 87178 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T14:12:04.358+01:00  INFO 87178 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-29T14:12:04.370+01:00  INFO 87178 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-29T14:14:34.606+01:00  INFO 87978 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 21.0.5 with PID 87978 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-29T14:14:34.608+01:00  INFO 87978 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-29T14:14:35.335+01:00  INFO 87978 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-29T14:14:35.464+01:00  INFO 87978 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 121 ms. Found 14 JPA repository interfaces.
2025-01-29T14:14:36.103+01:00  INFO 87978 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-29T14:14:36.159+01:00  INFO 87978 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-29T14:14:36.195+01:00  INFO 87978 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-29T14:14:36.554+01:00  INFO 87978 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-29T14:14:36.582+01:00  INFO 87978 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-29T14:14:36.802+01:00  INFO 87978 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-29T14:14:36.804+01:00  INFO 87978 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-29T14:14:36.831+01:00  WARN 87978 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-29T14:14:37.901+01:00  INFO 87978 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-29T14:14:37.915+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T14:14:37.919+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T14:14:37.919+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T14:14:37.920+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T14:14:37.920+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T14:14:37.921+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T14:14:37.922+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T14:14:37.923+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T14:14:37.924+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T14:14:37.924+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T14:14:37.925+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T14:14:37.926+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T14:14:37.926+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T14:14:37.927+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T14:14:37.932+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-29T14:14:37.941+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-29T14:14:37.943+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-29T14:14:37.945+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-29T14:14:37.947+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-29T14:14:37.949+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-29T14:14:37.951+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-29T14:14:37.953+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-29T14:14:37.955+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-29T14:14:37.956+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T14:14:37.958+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T14:14:37.960+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-29T14:14:37.963+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-29T14:14:37.965+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-29T14:14:37.968+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-29T14:14:37.981+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-29T14:14:37.983+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-29T14:14:37.985+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-29T14:14:37.987+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-29T14:14:37.989+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-29T14:14:37.991+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-29T14:14:37.993+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-29T14:14:37.996+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-29T14:14:37.998+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-29T14:14:38.000+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-29T14:14:38.003+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-29T14:14:38.006+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-29T14:14:38.008+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-29T14:14:38.010+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-29T14:14:38.013+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-29T14:14:38.018+01:00  INFO 87978 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T14:14:38.674+01:00  WARN 87978 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 1e0635a7-3ca8-430f-9da9-8673f99cbd6f

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-29T14:14:38.705+01:00  INFO 87978 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-29T14:14:39.400+01:00  INFO 87978 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-29T14:14:39.477+01:00  INFO 87978 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-29T14:14:39.478+01:00  INFO 87978 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-29T14:14:39.483+01:00  INFO 87978 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 4 ms
2025-01-29T14:14:39.530+01:00  INFO 87978 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.378 seconds (process running for 6.595)
2025-01-29T14:14:40.301+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T14:14:40.327+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T14:14:40.334+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T14:14:40.337+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T14:14:40.360+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T14:14:40.383+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T14:14:40.388+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T14:14:40.559+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T14:14:40.571+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T14:14:40.576+01:00 DEBUG 87978 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T14:14:40.647+01:00  WARN 87978 --- [librairie-online] [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Cannot invoke "com.example.librairie_online.entity.Role.getRole()" because "this.role" is null]
2025-01-29T14:14:40.696+01:00  INFO 87978 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T14:14:40.697+01:00 DEBUG 87978 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T14:14:40.702+01:00 DEBUG 87978 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T14:14:40.705+01:00 DEBUG 87978 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T14:14:40.707+01:00 DEBUG 87978 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T14:14:40.709+01:00 DEBUG 87978 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T14:14:40.710+01:00 DEBUG 87978 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T14:14:40.711+01:00 DEBUG 87978 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T14:14:40.713+01:00 DEBUG 87978 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T14:14:40.718+01:00 DEBUG 87978 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T14:14:40.720+01:00 DEBUG 87978 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T14:14:40.721+01:00 DEBUG 87978 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T14:14:40.722+01:00 DEBUG 87978 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T14:14:40.724+01:00 DEBUG 87978 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T14:14:40.725+01:00 DEBUG 87978 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T14:14:40.730+01:00  INFO 87978 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-29T14:14:40.736+01:00  INFO 87978 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-29T14:30:50.253+01:00  INFO 89385 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 89385 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-29T14:30:50.255+01:00  INFO 89385 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-29T14:30:51.018+01:00  INFO 89385 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-29T14:30:51.106+01:00  INFO 89385 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 79 ms. Found 14 JPA repository interfaces.
2025-01-29T14:30:51.801+01:00  INFO 89385 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-29T14:30:51.876+01:00  INFO 89385 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-29T14:30:51.916+01:00  INFO 89385 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-29T14:30:52.228+01:00  INFO 89385 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-29T14:30:52.252+01:00  INFO 89385 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-29T14:30:52.470+01:00  INFO 89385 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-29T14:30:52.473+01:00  INFO 89385 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-29T14:30:52.504+01:00  WARN 89385 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-29T14:30:53.563+01:00  INFO 89385 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-29T14:30:53.576+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T14:30:53.579+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T14:30:53.580+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T14:30:53.580+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T14:30:53.580+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T14:30:53.580+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T14:30:53.581+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T14:30:53.581+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T14:30:53.581+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T14:30:53.581+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T14:30:53.581+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T14:30:53.582+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T14:30:53.582+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T14:30:53.582+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T14:30:53.586+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-29T14:30:53.594+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-29T14:30:53.595+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-29T14:30:53.597+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-29T14:30:53.598+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-29T14:30:53.599+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-29T14:30:53.600+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-29T14:30:53.601+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-29T14:30:53.602+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-29T14:30:53.603+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T14:30:53.604+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T14:30:53.606+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-29T14:30:53.607+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-29T14:30:53.609+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-29T14:30:53.611+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-29T14:30:53.621+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-29T14:30:53.622+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-29T14:30:53.624+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-29T14:30:53.625+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-29T14:30:53.626+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-29T14:30:53.627+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-29T14:30:53.628+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-29T14:30:53.629+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-29T14:30:53.631+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-29T14:30:53.632+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-29T14:30:53.633+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-29T14:30:53.635+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-29T14:30:53.636+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-29T14:30:53.637+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-29T14:30:53.639+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-29T14:30:53.642+01:00  INFO 89385 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T14:30:54.339+01:00  WARN 89385 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: b34137e9-aac1-4e2f-a60e-da419f37d294

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-29T14:30:54.372+01:00  INFO 89385 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-29T14:30:55.084+01:00  INFO 89385 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-29T14:30:55.145+01:00  INFO 89385 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-29T14:30:55.146+01:00  INFO 89385 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-29T14:30:55.148+01:00  INFO 89385 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-01-29T14:30:55.181+01:00  INFO 89385 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.379 seconds (process running for 6.772)
2025-01-29T14:30:55.880+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T14:30:55.902+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T14:30:55.907+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T14:30:55.909+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T14:30:55.927+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T14:30:55.945+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T14:30:55.949+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T14:30:56.063+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T14:30:56.069+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T14:30:56.072+01:00 DEBUG 89385 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T14:30:56.110+01:00  WARN 89385 --- [librairie-online] [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Cannot invoke "com.example.librairie_online.entity.Role.getRole()" because "this.role" is null]
2025-01-29T14:30:56.168+01:00  INFO 89385 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T14:30:56.169+01:00 DEBUG 89385 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T14:30:56.173+01:00 DEBUG 89385 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T14:30:56.177+01:00 DEBUG 89385 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T14:30:56.178+01:00 DEBUG 89385 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T14:30:56.181+01:00 DEBUG 89385 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T14:30:56.183+01:00 DEBUG 89385 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T14:30:56.184+01:00 DEBUG 89385 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T14:30:56.186+01:00 DEBUG 89385 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T14:30:56.187+01:00 DEBUG 89385 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T14:30:56.189+01:00 DEBUG 89385 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T14:30:56.190+01:00 DEBUG 89385 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T14:30:56.191+01:00 DEBUG 89385 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T14:30:56.192+01:00 DEBUG 89385 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T14:30:56.193+01:00 DEBUG 89385 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T14:30:56.199+01:00  INFO 89385 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-29T14:30:56.202+01:00  INFO 89385 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-01-29T14:40:35.943+01:00  INFO 89682 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Starting AcheteControllerIntegrationTest using Java 22.0.2 with PID 89682 (started by cedinacoelho in /Users/cedinacoelho/Documents/src/librairie-online-Spring)
2025-01-29T14:40:35.944+01:00  INFO 89682 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : The following 1 profile is active: "testAchete"
2025-01-29T14:40:36.633+01:00  INFO 89682 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-29T14:40:36.741+01:00  INFO 89682 --- [librairie-online] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 100 ms. Found 14 JPA repository interfaces.
2025-01-29T14:40:37.305+01:00  INFO 89682 --- [librairie-online] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-29T14:40:37.368+01:00  INFO 89682 --- [librairie-online] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-01-29T14:40:37.401+01:00  INFO 89682 --- [librairie-online] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-01-29T14:40:37.691+01:00  INFO 89682 --- [librairie-online] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-29T14:40:37.715+01:00  INFO 89682 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-01-29T14:40:37.894+01:00  INFO 89682 --- [librairie-online] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdbAchete user=SA
2025-01-29T14:40:37.896+01:00  INFO 89682 --- [librairie-online] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-01-29T14:40:37.924+01:00  WARN 89682 --- [librairie-online] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-29T14:40:39.164+01:00  INFO 89682 --- [librairie-online] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-29T14:40:39.180+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T14:40:39.185+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T14:40:39.185+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T14:40:39.186+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T14:40:39.186+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T14:40:39.187+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T14:40:39.187+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T14:40:39.188+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T14:40:39.188+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T14:40:39.188+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T14:40:39.189+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T14:40:39.189+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T14:40:39.189+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T14:40:39.190+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T14:40:39.196+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : create table Achete (date date, id integer generated by default as identity, nAdherent integer, nSerie integer, prix numeric(9,2), primary key (id))
2025-01-29T14:40:39.205+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : create table Anime (date integer not null, nSerie integer generated by default as identity, nSerieM integer, nom varchar(255), nomStudio varchar(255), primary key (nSerie))
2025-01-29T14:40:39.206+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : create table Classe (nSerie integer not null, type varchar(255) not null, primary key (nSerie, type))
2025-01-29T14:40:39.210+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : create table Client (active boolean not null, age integer not null, date_adhesion date, date_naissance date, nAdherent integer generated by default as identity, roleId integer, email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255), primary key (nAdherent))
2025-01-29T14:40:39.213+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : create table Fournisseur (nom varchar(255) not null, ville varchar(255), primary key (nom))
2025-01-29T14:40:39.215+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : create table Genre (type varchar(255) not null, primary key (type))
2025-01-29T14:40:39.216+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : create table Loue (date date, dateMaximale date, dateRetour date, id integer generated by default as identity, nAdherent integer, nSerie integer, primary key (id))
2025-01-29T14:40:39.218+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : create table Manga (date_parution integer not null, nbExemplaire integer not null, nserie integer generated by default as identity, tome integer not null, nom varchar(255), nomFournisseur varchar(255), nomMangaka varchar(255), prenomMangaka varchar(255), primary key (nserie))
2025-01-29T14:40:39.220+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : create table Mangaka (nationalite varchar(255), nom varchar(255) not null, prenom varchar(255) not null, sexe varchar(255), primary key (nom, prenom))
2025-01-29T14:40:39.222+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteA (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T14:40:39.223+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : create table NoteM (date date, nSerie integer not null, nadherent integer not null, valeur numeric(38,2), primary key (nSerie, nadherent))
2025-01-29T14:40:39.226+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : create table Role (id integer generated by default as identity, role enum ('ADMIN','USER'), primary key (id))
2025-01-29T14:40:39.228+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : create table Studio (nom varchar(255) not null, nomDirecteur varchar(255), pays varchar(255), prenomDirecteur varchar(255), primary key (nom))
2025-01-29T14:40:39.231+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : create table Validation (ClientId integer unique, code integer not null, id integer not null, Activation_instant timestamp(6) with time zone, Creation_instant timestamp(6) with time zone, Expire_instant timestamp(6) with time zone, primary key (id))
2025-01-29T14:40:39.233+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKqb1e2gq63l9dowoni2ercv3ia foreign key (nAdherent) references Client
2025-01-29T14:40:39.249+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Achete add constraint FKndbwyt78vyn2ixt20vveswpy foreign key (nSerie) references Manga
2025-01-29T14:40:39.251+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FKiagcnb38yakykw03xitnyt3wl foreign key (nSerieM) references Manga
2025-01-29T14:40:39.252+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Anime add constraint FK6eecm0a8wmfpqoij85crf3m0w foreign key (nomStudio) references Studio
2025-01-29T14:40:39.254+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKmndai52ydfxv4egnm62drgpcs foreign key (type) references Genre
2025-01-29T14:40:39.256+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Classe add constraint FKpc3r5vfpoakf7vrwe8on06ux3 foreign key (nserie) references Manga
2025-01-29T14:40:39.257+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Client add constraint FK4bpcqc78ucwdr2mk0mpv6dckv foreign key (roleId) references Role
2025-01-29T14:40:39.259+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FKk9fmioh8om4kdauf119myfy88 foreign key (nSerie) references Anime
2025-01-29T14:40:39.261+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Loue add constraint FK7uxy40ng4oydutr0xg99abf8n foreign key (nAdherent) references Client
2025-01-29T14:40:39.265+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FK6jv3kix0ie77vrix41q74e9dp foreign key (nomFournisseur) references Fournisseur
2025-01-29T14:40:39.267+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Manga add constraint FKoxc656tng6cku1kgsbq5t1ifb foreign key (nomMangaka, prenomMangaka) references Mangaka
2025-01-29T14:40:39.271+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4se4t04m3xv4jvhufc8nhdfnx foreign key (nSerie) references Anime
2025-01-29T14:40:39.273+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteA add constraint FK4od391ruf1aqd8e0cqkw04ic5 foreign key (nadherent) references Client
2025-01-29T14:40:39.275+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FK3eoqdbnmssmi133k9fdsko3d3 foreign key (nadherent) references Client
2025-01-29T14:40:39.277+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists NoteM add constraint FKqy62n647qukdbu57egrbuerj6 foreign key (nSerie) references Manga
2025-01-29T14:40:39.279+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : alter table if exists Validation add constraint FK3jm2763f48u5y9wfcnhw6yd1p foreign key (ClientId) references Client
2025-01-29T14:40:39.289+01:00  INFO 89682 --- [librairie-online] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T14:40:40.054+01:00  WARN 89682 --- [librairie-online] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 8b4acc0f-f2de-43ae-96d1-84c55e7d1002

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-01-29T14:40:40.088+01:00  INFO 89682 --- [librairie-online] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-01-29T14:40:40.804+01:00  INFO 89682 --- [librairie-online] [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdbAchete'
2025-01-29T14:40:40.874+01:00  INFO 89682 --- [librairie-online] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-01-29T14:40:40.875+01:00  INFO 89682 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-01-29T14:40:40.877+01:00  INFO 89682 --- [librairie-online] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-01-29T14:40:40.915+01:00  INFO 89682 --- [librairie-online] [main] c.e.l.c.AcheteControllerIntegrationTest  : Started AcheteControllerIntegrationTest in 5.368 seconds (process running for 6.522)
2025-01-29T14:40:41.586+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T14:40:41.609+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T14:40:41.614+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T14:40:41.617+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T14:40:41.644+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T14:40:41.668+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T14:40:41.672+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T14:40:41.675+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T14:40:41.825+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T14:40:41.839+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T14:40:41.846+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T14:40:41.858+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : update Achete set nAdherent=?,date=?,nSerie=?,prix=? where id=?
2025-01-29T14:40:41.965+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T14:40:41.967+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T14:40:41.968+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T14:40:41.974+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-29T14:40:41.979+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T14:40:41.980+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-29T14:40:41.981+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-29T14:40:41.984+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T14:40:41.986+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-29T14:40:41.989+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T14:40:41.991+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Role where id=?
2025-01-29T14:40:41.993+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T14:40:41.995+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T14:40:41.998+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T14:40:41.999+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T14:40:42.005+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T14:40:42.010+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T14:40:42.013+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-29T14:40:42.021+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe,a1_0.date,m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome,a1_0.prix from Achete a1_0 left join Client c1_0 on c1_0.nAdherent=a1_0.nAdherent left join Role r1_0 on r1_0.id=c1_0.roleId left join Manga m1_0 on m1_0.nserie=a1_0.nSerie left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where a1_0.id=?
2025-01-29T14:40:42.037+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T14:40:42.040+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T14:40:42.041+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-29T14:40:42.044+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-29T14:40:42.048+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T14:40:42.050+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-29T14:40:42.053+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T14:40:42.055+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Role where id=?
2025-01-29T14:40:42.057+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T14:40:42.059+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T14:40:42.063+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T14:40:42.065+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T14:40:42.071+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T14:40:42.073+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T14:40:42.075+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T14:40:42.092+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select a1_0.id,a1_0.nAdherent,a1_0.date,a1_0.nSerie,a1_0.prix from Achete a1_0
2025-01-29T14:40:42.093+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T14:40:42.095+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T14:40:42.099+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Achete where id=?
2025-01-29T14:40:42.102+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,c1_0.roleId,c1_0.sexe from Client c1_0
2025-01-29T14:40:42.104+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0 where r1_0.id=?
2025-01-29T14:40:42.106+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Client where nAdherent=?
2025-01-29T14:40:42.109+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,m1_0.nomFournisseur,m1_0.nomMangaka,m1_0.prenomMangaka,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0
2025-01-29T14:40:42.111+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Manga where nserie=?
2025-01-29T14:40:42.115+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select r1_0.id,r1_0.role from Role r1_0
2025-01-29T14:40:42.117+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : delete from Role where id=?
2025-01-29T14:40:42.120+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Role (role,id) values (?,default)
2025-01-29T14:40:42.122+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Client (active,age,date_adhesion,date_naissance,email,nom,password,prenom,roleId,sexe,nAdherent) values (?,?,?,?,?,?,?,?,?,?,default)
2025-01-29T14:40:42.125+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Manga (date_parution,nomFournisseur,nomMangaka,prenomMangaka,nbExemplaire,nom,tome,nserie) values (?,?,?,?,?,?,?,default)
2025-01-29T14:40:42.131+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select m1_0.nserie,m1_0.date_parution,f1_0.nom,f1_0.ville,m2_0.nom,m2_0.prenom,m2_0.nationalite,m2_0.sexe,m1_0.nbExemplaire,m1_0.nom,m1_0.tome from Manga m1_0 left join Fournisseur f1_0 on f1_0.nom=m1_0.nomFournisseur left join Mangaka m2_0 on m2_0.nom=m1_0.nomMangaka and m2_0.prenom=m1_0.prenomMangaka where m1_0.nserie=?
2025-01-29T14:40:42.134+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select c1_0.nAdherent,c1_0.active,c1_0.age,c1_0.date_adhesion,c1_0.date_naissance,c1_0.email,c1_0.nom,c1_0.password,c1_0.prenom,r1_0.id,r1_0.role,c1_0.sexe from Client c1_0 left join Role r1_0 on r1_0.id=c1_0.roleId where c1_0.nAdherent=?
2025-01-29T14:40:42.136+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : insert into Achete (nAdherent,date,nSerie,prix,id) values (?,?,?,?,default)
2025-01-29T14:40:42.377+01:00 DEBUG 89682 --- [librairie-online] [main] org.hibernate.SQL                        : select count(*) from Achete a1_0
2025-01-29T14:40:42.464+01:00  INFO 89682 --- [librairie-online] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-29T14:40:42.465+01:00 DEBUG 89682 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Achete cascade 
2025-01-29T14:40:42.469+01:00 DEBUG 89682 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Anime cascade 
2025-01-29T14:40:42.470+01:00 DEBUG 89682 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Classe cascade 
2025-01-29T14:40:42.472+01:00 DEBUG 89682 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Client cascade 
2025-01-29T14:40:42.473+01:00 DEBUG 89682 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Fournisseur cascade 
2025-01-29T14:40:42.474+01:00 DEBUG 89682 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Genre cascade 
2025-01-29T14:40:42.474+01:00 DEBUG 89682 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Loue cascade 
2025-01-29T14:40:42.475+01:00 DEBUG 89682 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Manga cascade 
2025-01-29T14:40:42.476+01:00 DEBUG 89682 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Mangaka cascade 
2025-01-29T14:40:42.477+01:00 DEBUG 89682 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteA cascade 
2025-01-29T14:40:42.478+01:00 DEBUG 89682 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists NoteM cascade 
2025-01-29T14:40:42.479+01:00 DEBUG 89682 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Role cascade 
2025-01-29T14:40:42.480+01:00 DEBUG 89682 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Studio cascade 
2025-01-29T14:40:42.481+01:00 DEBUG 89682 --- [librairie-online] [SpringApplicationShutdownHook] org.hibernate.SQL                        : drop table if exists Validation cascade 
2025-01-29T14:40:42.484+01:00  INFO 89682 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-01-29T14:40:42.486+01:00  INFO 89682 --- [librairie-online] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
